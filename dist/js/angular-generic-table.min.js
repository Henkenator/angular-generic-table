angular.module("angular.generic.table",["ngAnimate","angular.filter","angular.bind.notifier","ngCsv"]),!function(e){try{e=angular.module("angular.generic.table")}catch(t){e=angular.module("angular.generic.table",[])}e.run(["$templateCache",function(e){e.put("generic-table/directive/generic-table/generic-table.html",'<div class="generic-table"><div class="gt-wrapper"><table class="table table-sortable" ng-if="gtHasData" ng-class=":gtRefresh:gtClasses"><thead><tr ng-class="::gtRowTransition ? \'fade-in animate\':\'\'"><th ng-repeat="field in ::gtFields | orderBy:\'columnOrder\' track by field.objectKey" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class="[field.classNames, (field.objectKey | camelToDash) + \'-column\', \'sort-\'+(gtSettings | getProperty:field.objectKey:\'sort\')]" ng-click=":gtRefresh:(gtSettings | getProperty:field.objectKey:\'sort\') === \'enable\' ? sort($event,field.objectKey):(gtSettings | getProperty:field.objectKey:\'sort\') === \'asc\' ? sort($event,field.objectKey):(gtSettings | getProperty:field.objectKey:\'sort\') === \'desc\' ? sort($event,field.objectKey):\'\'" ng-bind="::field.name"></th></tr><tr ng-if="::gtTotals" ng-class="::gtRowTransition ? \'fade-in animate\':\'\'"><td ng-repeat="field in ::gtFields | orderBy:\'columnOrder\' track by field.objectKey" class="total-column" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class="::[(gtFields | getProperty:field.objectKey:\'classNames\'), (field.objectKey | camelToDash) + \'-column\']" field-settings="::field" gt-render="" active-bindings="::bindings" row-data="::gtTotals" gt-compile="::field.compile"></td></tr></thead><tbody><tr gt-row="" ng-repeat="(rowIndex, row) in :gtRefresh:gtDisplayData | limitTo: displayRows" gt-event="" ng-class=":gtRefresh:[gtRowTransition ? \'fade-in animate\':\'\',row.isOpen ? \'row-open\':\'\', $index % 2 == 0 ? \'row-odd\':\'row-even\', gtRowInfo[$index] ? \'true-class\':\'false-class\']"><td ng-repeat="(fieldIndex, field) in :gtRefresh:gtFields | orderBy:\'columnOrder\' track by field.objectKey" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class="::[(gtFields | getProperty:field.objectKey:\'classNames\'), (field.objectKey | camelToDash) + \'-column\']"><span class="gt-row-label" ng-if="::(gtFields | getProperty:field.objectKey:\'stackedHeading\')" ng-bind="::(gtFields | getProperty:field.objectKey:\'stackedHeading\')=== true ? (gtFields | getProperty:field.objectKey:\'name\'):(gtFields | getProperty:field.objectKey:\'stackedHeading\')"></span><span class="gt-row-content" ng-class="::field.click ? \'gt-click-enabled\':\'\'" field-settings="::field" gt-render="" active-bindings="::bindings" row-data="::row" gt-compile="::field.compile" ng-click=":gtRefresh:!field.click || field.click(row);!field.expand || toggleRow(field.expand,(gtSettings | filter:{\'visible\':true}:true).length,row,field.objectKey);"></span></td></tr></tbody><tr ng-if=":gtRefresh:pagination === false"><td class="gt-no-data" colspan="{{:gtRefresh:(gtSettings | filter:{\'visible\':true}:true).length}}" ng-bind="::gtTranslations.noData"></td></tr></table></div><div class="gt-pagination text-center" ng-if=":gtRefresh:gtPagination === true && pagination !== false"><ul class="pagination"><li ng-class=":gtRefresh:{disabled: currentPage === 0}" ng-show="currentPage !== 0"><button class="btn-link link" ng-click="previousPage()" ng-disabled=":gtRefresh:currentPage === 0" ng-bind-html="::gtTranslations.previous"></button></li><li ng-show=":gtRefresh:currentPage > 3"><button class="btn-link link" ng-click="setPage(0)">1</button><small>&hellip;</small></li><li style="display: inline;padding: 0 5px;" ng-repeat="page in :gtRefresh:pagination" ng-class=":gtRefresh:page === currentPage ? \'active\':\'\'"><button class="btn-link link" ng-click="setPage(page)" ng-bind="page+1"></button></li><li ng-show=":gtRefresh:currentPage +1 < pages.length-1 && pages.length > 4"><small ng-show=":gtRefresh:currentPage + 3 < pages.length">&hellip;</small><button class="btn-link link" ng-click="setPage(pages.length-1)" ng-bind="pages.length"></button></li><li ng-class=":gtRefresh:{disabled: currentPage == pages.length}" ng-show=":gtRefresh:currentPage+1 !== pages.length"><button class="btn-link link" ng-click="nextPage()" ng-disabled=":gtRefresh:currentPage+1 === pages.length" ng-bind-html="::gtTranslations.next"></button></li></ul></div></div>')}])}(),angular.module("angular.generic.table").directive("genericTable",function(){return{restrict:"E",replace:!0,scope:{gtId:"=?gtId",gtClasses:"@gtClasses",gtSettings:"=gtSettings",gtFields:"=gtFields",gtTotals:"=?gtTotals",gtData:"=?gtData",gtRows:"@gtRows",gtRowTransition:"@gtRowTransition",gtPagination:"@gtPagination",gtExpand:"=?",gtTranslations:"=?"},templateUrl:"generic-table/directive/generic-table/generic-table.html",link:function(e,t,n,i){},controller:"genericTableController"}}).controller("genericTableController",["$scope","$filter","$timeout","CSV","$document",function(e,t,n,i,r){var a,o,s,g,l,c,d,f="undefined"==typeof e.gtSettings?!1:t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey});e.gtPagination="undefined"==typeof e.gtPagination?!0:"false"!==e.gtPagination,e.gtRows="undefined"==typeof e.gtRows?20:e.gtRows,e.gtTranslations="undefined"==typeof e.gtTranslations?{}:e.gtTranslations,e.gtTranslations.noData="undefined"==typeof e.gtTranslations.noData?"No table data to display":e.gtTranslations.noData,e.gtTranslations.previous="undefined"==typeof e.gtTranslations.previous?"&laquo; Prev":e.gtTranslations.previous,e.gtTranslations.next="undefined"==typeof e.gtTranslations.next?"Next &raquo;":e.gtTranslations.next,e.gtId="undefined"==typeof e.gtId?e.$id:e.gtId,e.gtExpand="undefined"==typeof e.gtExpand?{}:e.gtExpand,e.gtExpand.directive="undefined"==typeof e.gtExpand.directive?"":e.gtExpand.directive,e.gtExpand.multiple="undefined"==typeof e.gtExpand.multiple?!1:e.gtExpand.multiple,e.gtExpand.rows="undefined"==typeof e.gtExpand.rows?[]:e.gtExpand.rows,e.bindings=[],e.syncRows=function(t,n){if(t&&e.gtDisplayData){for(var i=0;i<e.gtDisplayData.length;i++)-1===e.gtExpand.rows.indexOf(i)&&e.$broadcast("$gt-open-row:"+i,n);e.$broadcast("$$rebind::gtRefresh")}else if(e.gtDisplayData){for(var i=0;i<e.gtRows;i++)-1!==e.gtExpand.rows.indexOf(i)&&e.$broadcast("$gt-close-row:"+i);e.$broadcast("$$rebind::gtRefresh")}},e.removeBinding=function(){var n=t("map")(e.gtDisplayData,"$$hashKey");if(e.bindings.length>0)for(var i=0;i<e.bindings.length;i++)n&&-1===n.indexOf(e.bindings[i].$$hashKey)&&e.bindings[i].scope.$destroy()};var u=function(){t("map")(e.gtSettings,function(n){try{var i=t("filter")(e.gtFields,{objectKey:n.objectKey},!0)[0];i.columnOrder=n.columnOrder,n["export"]===!1&&(i.exportField=!1)}catch(r){console.log('field definition object for property: "'+n.objectKey+'" not found.',r)}})};u();var p=function(t){e.gtHasData=!1,a=t.slice(0),e.$emit("gt-started-data-processing",e.gtId),y(t)},b=function(t){e.gtHasData=!1,a=t.slice(0),e.$emit("gt-started-data-processing",e.gtId),y(t)},y=function(n){l=t("map")(t("removeWith")(e.gtFields.slice(0),{search:!1}),"objectKey");var i=t("map")(t("filter")(e.gtSettings,{enabled:!0},!0),"objectKey");o=t("map")(n,function(n){var r={};return t("map")(i,function(i){if("undefined"!=typeof n[i])r[i]=n[i];else{var a=t("map")(t("filter")(e.gtFields,{objectKey:i},!0),"value")[0];a&&angular.isFunction(a)?r[i]=a(n):console.log('property: "'+i+'" does not exists in data object and no value function was declared')}}),r}),h(o)},h=function(n,i){var r=t("filter")(n.slice(0),c,function(e,t){return t.indexOf(e)>-1},!0).slice(0);s=t("searchRow")(r,l,i,e.gtFields),m()},m=function(){g=f!==!1?t("gtSort")(s,f,e.gtFields):s,v()},v=function(){e.pages=t("chunkBy")(g,parseInt(e.gtRows)),e.currentPage=0,e.loading=!0,e.$emit("gt-started-rendering"),e.gtDisplayData=e.pages[e.currentPage],w(e.pages.length,e.currentPage),n(function(){e.$emit("gt-finished-data-processing",e.gtId),e.gtHasData=!0},200),e.$broadcast("$$rebind::gtRefresh")};e.$on("gt-update-table:"+e.gtId,function(e,t){b(t)}),e.$on("gt-search-table:"+e.gtId,function(e,t){d=t,h(o.slice(0),t)}),e.$on("gt-filter-table:"+e.gtId,function(e,t){c=t,h(o.slice(0),d)}),e.$on("gt-open-all-rows:"+e.gtId,function(t,n){e.syncRows(!0,!0)}),e.$on("gt-close-all-rows:"+e.gtId,function(t,n){e.syncRows(!1)}),e.$on("gt-update-structure:"+e.gtId,function(n,i){e.gtFields=i.fields,e.gtSettings=i.settings,u(),l=t("map")(t("removeWith")(e.gtFields.slice(0),{search:!1}),"objectKey"),f===!1||i.forceSorting===!0?f=t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey}):(t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){e.sort="enable"}),t("map")(f,function(n){var i=-1===n.indexOf("-")?"asc":"desc";n=n.replace("-",""),t("filter")(e.gtSettings,{objectKey:n},!0)[0].sort=i}))}),e.$on("gt-paginate-table:"+e.gtId,function(t,n){e.gtRows=parseInt(n),v()}),e.$on("gt-export-csv:"+e.gtId,function(e,t){x(t)});var w=function(t,n){return e.syncRows(!1),e.removeBinding(),e.pagination=[],0===t?(e.pagination=!1,void e.$emit("gt-table-filtered",{total:o.length,filtered:0,showingFrom:0,showingTo:0,pageLength:e.gtRows,currentPage:0,numberOfPages:0})):(2>t?e.pagination=[0]:3>t?e.pagination=[0,1]:4>t?e.pagination=[0,1,2]:5>t?e.pagination=[0,1,2,3]:4>n?e.pagination=[0,1,2,3,4]:t>n+1?e.pagination=[n-1,n,n+1]:t===n+1?e.pagination=[n-2,n-1,n]:t-4>n&&(e.pagination=[n-1,n,n+1,n+2]),void e.$emit("gt-table-filtered",{total:o.length,filtered:s.length,showingFrom:e.currentPage*e.gtRows+(e.currentPage>1?0:1),showingTo:e.currentPage*e.gtRows+e.gtDisplayData.length,pageLength:e.gtRows,currentPage:e.currentPage,numberOfPages:e.pages.length}))};e.nextPage=function(){try{e.currentPage++,e.gtDisplayData=e.pages[e.currentPage],w(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(t){console.log(t)}},e.previousPage=function(){try{e.currentPage--,e.gtDisplayData=e.pages[e.currentPage],w(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(t){console.log(t)}},e.setPage=function(t){try{e.currentPage=t,e.gtDisplayData=e.pages[e.currentPage],w(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(n){console.log(n)}},e.sort=function(n,i){var r=n.ctrlKey||n.metaKey;if(!r&&i)for(var a=0;e.gtSettings.length>a;a++){var o=e.gtSettings[a];(o.objectKey!==i&&"asc"===o.sort||o.objectKey!==i&&"desc"===o.sort)&&(e.gtSettings[a].sort="enable")}if(i)for(var a=0;e.gtSettings.length>a;a++){var o=e.gtSettings[a];if(o.objectKey===i){var s=o.sort;switch(s){case"disable":break;case"enable":e.gtSettings[a].sort="asc";break;case"asc":e.gtSettings[a].sort="desc";break;case"desc":e.gtSettings[a].sort="enable"}}}f=t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey}),m()},e.gtData&&p(e.gtData);var x=function(a){a="undefined"==typeof a?{}:a;for(var o="undefined"==typeof a.fileName?"export":a.fileName,s=JSON.parse(angular.toJson(g.slice(0))),l=0;l<s.length;l++){var c=s[l];for(var d in c)if(c.hasOwnProperty(d)){var f=t("filter")(e.gtFields,{objectKey:d},!0)[0],u=t("filter")(e.gtSettings,{objectKey:d},!0)[0],p=f["export"];if(p&&angular.isFunction(p)){var b=p(c,d);c[d]=f.exportEscapeString===!1?b:t("escapeCsvString")(b)}else c[d]=f.exportEscapeString===!1?c[d]:t("escapeCsvString")(c[d]);"undefined"!=typeof a.exportColumns?-1===a.exportColumns.indexOf(u.objectKey)&&(c[d]=null):"undefined"!=typeof u["export"]&&u["export"]===!1&&(c[d]=null)}}var y=s;if("undefined"!=typeof a.exportColumns)var h=t("map")(a.exportColumns,function(n){return t("filter")(e.gtFields.slice(0),{objectKey:n},!0)[0]});else var h=t("orderBy")(t("removeWith")(e.gtFields,{exportField:!1}),"columnOrder");var m={fieldSep:"undefined"==typeof a.fieldSep?";":a.fieldSep,header:t("map")(h,"name"),txtDelim:"undefined"==typeof a.txtDelim?'"':a.txtDelim,columnOrder:t("map")(h,"objectKey"),decimalSep:"undefined"==typeof a.decimalSep?",":a.decimalSep,addByteOrderMarker:"undefined"==typeof a.addBom,charset:"undefined"==typeof a.charset?"utf-8":a.charset,quoteStrings:"undefined"==typeof a.quoteStrings?!1:a.quoteStrings};i.stringify(y,m).then(function(e){var t;if(window.navigator.msSaveOrOpenBlob)t=new Blob([e],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(t,"export.csv");else if("Microsoft Internet Explorer"===window.navigator.appName){window.alert("You're using an old version of Internet Explorer and the export might therefore have the wrong format, please update your browser.");var i=angular.element("<iframe></iframe>");i[0].style.display="none";var a=angular.element("body");a.append(i);var s=null;i[0].contentDocument?s=i[0].contentDocument:i[0].contentWindow&&(s=i[0].contentWindow.document),s.open("text/plain","replace"),s.write([e]),s.close(),s.execCommand("SaveAs",!0,o+".csv")}else{t=new Blob([e],{type:"text/csv;charset=utf-8;"});var g=angular.element("<a></a>");g.attr("href",window.URL.createObjectURL(t)),g.attr("download",o+".csv"),r.find("body").append(g),n(function(){g[0].click(),g.remove()},null)}})}}]).directive("gtRow",["$compile","$filter",function(e,t){return{restrict:"A",scope:!1,link:function(n,i,r,a){var o=t("filter")(n.gtSettings,{visible:!0},!0).length,s=function(t){n.gtExpand.multiple||t?"":n.syncRows(!1);var r=n.$new(),a=e('<tr class="expanded-row"><td colspan="'+o+'">'+n.gtExpand.directive+"</td></tr>")(r);i.after(a),n.row.isOpen=!0,n.gtExpand.rows.push(l)},g=function(){n.row.isOpen=!1,n.gtExpand.rows.splice(n.gtExpand.rows.indexOf(l),1),i.next().scope().$destroy(),i.next().remove()},l=n.$index;n.toggleRow=function(){var e=-1!==n.gtExpand.rows.indexOf(l);e?g():s(),n.$broadcast("$$rebind::gtRefresh")},n.$on("$gt-open-row:"+l,function(e,t){var i=-1!==n.gtExpand.rows.indexOf(l);i||s(t)}),n.$on("$gt-close-row:"+l,function(){var e=-1!==n.gtExpand.rows.indexOf(l);e&&g()})}}}]).directive("gtEvent",function(){return{restrict:"A",link:function(e,t,n,i){e.$last&&e.$emit("gt-finished-rendering",e.gtId)}}}).directive("gtRender",["$compile",function(e){return{restrict:"A",scope:{row:"=rowData",settings:"=fieldSettings",compile:"=gtCompile",activeBindings:"=activeBindings"},link:function(t,n,i,r){var a,o=t.row,s=t.settings.objectKey,g=t.settings.render;if(a=g&&angular.isFunction(g)?g(o,s):o[s],t.compile&&t.compile!==!1){var l;t.compile!==!0&&t.compile.$watch?(l=t.compile.$new(),t.activeBindings.push({$$hashKey:t.row.$$hashKey,scope:l})):l=t.$parent.$new(),a=e(a)(l),n.append(a)}else n[0].innerHTML=a}}}]).filter("getProperty",["$filter",function(e){return function(t,n,i){try{var r=e("filter")(t,{objectKey:n},!0)[0][i]}catch(a){console.log('cannot read property: "'+i+'" on missing key: "'+n+'" in settings.',a)}return r}}]).filter("searchRow",["$filter","$interpolate",function(e,t){return function(t,n,i,r){for(var a={},o=0;o<r.length;o++){var s=r[o];if(s.search&&angular.isFunction(s.search)){var g=s.objectKey;a[g]=s.search}}if(!i||0===i.replace(/"/g,"").length)return t;var l=[];i="undefined"==typeof i?"":i;for(var c=i.toLowerCase().match(/"[^"]+"|[\w]+/g),d=0;d<t.length;d++){var f=t[d],u="",p=0;e("map")(n,function(e){var t=0===p?"":" & ";u+=a[e]?t+a[e](f,e):t+f[e],p++}),u=u.toLowerCase();for(var b=!0,o=0;o<c.length;o++){var y=c[o].replace(/"/g,"");if(b=-1!==u.indexOf(y),!b)break}b&&l.push(f)}return l}}]).filter("camelToDash",function(){return function(e){try{return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}catch(t){console.log("nothing to replace:",t)}}}).filter("gtSort",function(){return function(e,t,n){function i(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,i){var r=null===n[e]?"":a[e]?a[e](n,e):n[e],o=null===i[e]?"":a[e]?a[e](i,e):i[e],s=o>r?-1:r>o?1:0;return s*t}}function r(e){var t=e;return function(e,n){for(var r=0,a=0,o=t.length;0===a&&o>r;)a=i(t[r])(e,n),r++;return a}}for(var a={},o=0;o<n.length;o++){var s=n[o];s.sort&&angular.isFunction(s.sort)&&(a[s.objectKey]=s.sort)}return e.sort(r(t))}}).filter("escapeCsvString",function(){return function(e){return/^(\=|\@|\+,\-).*/g.test(e)?"'"+e:e}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyaWMtdGFibGUuanMiLCJhbmd1bGFyLmdlbmVyaWMudGFibGUudHBsLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJlIiwidCIsInJ1biIsInB1dCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVwbGFjZSIsInNjb3BlIiwiZ3RJZCIsImd0Q2xhc3NlcyIsImd0U2V0dGluZ3MiLCJndEZpZWxkcyIsImd0VG90YWxzIiwiZ3REYXRhIiwiZ3RSb3dzIiwiZ3RSb3dUcmFuc2l0aW9uIiwiZ3RQYWdpbmF0aW9uIiwiZ3RFeHBhbmQiLCJndFRyYW5zbGF0aW9ucyIsInRlbXBsYXRlVXJsIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsImZuIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRmaWx0ZXIiLCIkdGltZW91dCIsIkNTViIsIiRkb2N1bWVudCIsIm9yaWdpbmFsRGF0YSIsIm1hcHBlZERhdGEiLCJmaWx0ZXJlZERhdGEiLCJzb3J0ZWREYXRhIiwic2VhcmNoQ29sdW1ucyIsInRhYmxlRmlsdGVycyIsInNlYXJjaFRlcm1zIiwic29ydGluZyIsInNvcnQiLCJleHBlY3RlZCIsImFjdHVhbCIsImluZGV4T2YiLCJvYmplY3RLZXkiLCJub0RhdGEiLCJwcmV2aW91cyIsIm5leHQiLCIkaWQiLCJtdWx0aXBsZSIsInJvd3MiLCJiaW5kaW5ncyIsInN5bmNSb3dzIiwib3BlbiIsImZvcmNlIiwiZ3REaXNwbGF5RGF0YSIsImkiLCJsZW5ndGgiLCIkYnJvYWRjYXN0IiwicmVtb3ZlQmluZGluZyIsImFjdGl2ZUl0ZW1zIiwiJCRoYXNoS2V5IiwiJGRlc3Ryb3kiLCJleHRlbmRGaWVsZERlZmluaXRpb25zIiwic2V0dGluZyIsImZpZWxkIiwiY29sdW1uT3JkZXIiLCJleHBvcnRGaWVsZCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImluaXRUYWJsZSIsImluaXREYXRhIiwiZ3RIYXNEYXRhIiwic2xpY2UiLCIkZW1pdCIsIm1hcEtleXMiLCJjaGFuZ2VEYXRhIiwibmV3RGF0YSIsImRhdGEiLCJzZWFyY2giLCJwcm9wZXJ0aWVzIiwiZW5hYmxlZCIsInJvdyIsIm9iaiIsInByb3BlcnR5IiwidmFsdWVGdW5jdGlvbiIsImlzRnVuY3Rpb24iLCJhcHBseUZpbHRlciIsImZpbHRlcmVkIiwiYXBwbHlTb3J0IiwiYXBwbHlQYWdpbmF0aW9uIiwicGFnZXMiLCJwYXJzZUludCIsImN1cnJlbnRQYWdlIiwibG9hZGluZyIsInBhZ2luYXRpb24iLCIkb24iLCJldmVudCIsImFyZyIsImZpZWxkcyIsInNldHRpbmdzIiwiZm9yY2VTb3J0aW5nIiwic29ydFByb3BlcnR5IiwiZ3RFeHBvcnQiLCJ0b3RhbFBhZ2VzIiwidG90YWwiLCJzaG93aW5nRnJvbSIsInNob3dpbmdUbyIsInBhZ2VMZW5ndGgiLCJudW1iZXJPZlBhZ2VzIiwibmV4dFBhZ2UiLCJwcmV2aW91c1BhZ2UiLCJzZXRQYWdlIiwicGFnZSIsIiRldmVudCIsImN0cmxLZXkiLCJtZXRhS2V5Iiwib3B0aW9ucyIsImZpbGVOYW1lIiwiZXhwb3J0RGF0YSIsIkpTT04iLCJwYXJzZSIsInRvSnNvbiIsImtleSIsImhhc093blByb3BlcnR5IiwiZmllbGRTZXR0aW5nIiwidGFibGVTZXR0aW5nIiwiZXhwb3J0TWV0aG9kIiwiZXhwb3J0VmFsdWUiLCJleHBvcnRFc2NhcGVTdHJpbmciLCJleHBvcnRDb2x1bW5zIiwiZXhwb3J0RmllbGRzIiwiaGVhZGVycyIsImZpZWxkU2VwIiwiaGVhZGVyIiwidHh0RGVsaW0iLCJkZWNpbWFsU2VwIiwiYWRkQnl0ZU9yZGVyTWFya2VyIiwiYWRkQm9tIiwiY2hhcnNldCIsInF1b3RlU3RyaW5ncyIsInN0cmluZ2lmeSIsInRoZW4iLCJyZXN1bHQiLCJibG9iIiwid2luZG93IiwibmF2aWdhdG9yIiwibXNTYXZlT3JPcGVuQmxvYiIsIkJsb2IiLCJ0eXBlIiwibXNTYXZlQmxvYiIsImFwcE5hbWUiLCJhbGVydCIsImlmcmFtZSIsInN0eWxlIiwiZGlzcGxheSIsImFwcGVuZCIsImRvYyIsImNvbnRlbnREb2N1bWVudCIsImNvbnRlbnRXaW5kb3ciLCJkb2N1bWVudCIsIndyaXRlIiwiY2xvc2UiLCJleGVjQ29tbWFuZCIsImRvd25sb2FkTGluayIsImF0dHIiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJmaW5kIiwiY2xpY2siLCJyZW1vdmUiLCIkY29tcGlsZSIsImNvbHVtbnMiLCJ2aXNpYmxlIiwiYWRkUm93Iiwib3BlbkFsbCIsIm5ld1Njb3BlIiwiJG5ldyIsImFmdGVyIiwiaXNPcGVuIiwicHVzaCIsImluZGV4IiwicmVtb3ZlUm93Iiwic3BsaWNlIiwiJGluZGV4IiwidG9nZ2xlUm93IiwiZXhwYW5kZWQiLCIkbGFzdCIsImNvbXBpbGUiLCJhY3RpdmVCaW5kaW5ncyIsIm91dHB1dCIsInJlbmRlck1ldGhvZCIsInJlbmRlciIsImVsZW1lbnRTY29wZSIsIiR3YXRjaCIsIiRwYXJlbnQiLCJpbm5lckhUTUwiLCJmaWx0ZXIiLCIkaW50ZXJwb2xhdGUiLCJhcnJheSIsImZpZWxkc1NldHRpbmdzIiwiayIsImZpbHRlcmVkQXJyYXkiLCJzZWFyY2hUZXJtc0FycmF5IiwidG9Mb3dlckNhc2UiLCJtYXRjaCIsInN0cmluZyIsImoiLCJzZXBhcmF0b3IiLCJ0ZXJtIiwicHJvcGVydHlBcnJheSIsImR5bmFtaWNTb3J0Iiwic29ydE9yZGVyIiwic3Vic3RyIiwiYSIsImIiLCJ2YWx1ZTEiLCJjdXN0b21Tb3J0IiwidmFsdWUyIiwiZHluYW1pY1NvcnRNdWx0aXBsZSIsInByb3BzIiwib2JqMSIsIm9iajIiLCJudW1iZXJPZlByb3BlcnRpZXMiLCJpbnB1dCIsInRlc3QiXSwibWFwcGluZ3MiOiJBQU9BQSxRQUFBQyxPQUFBLHlCQUFBLFlBQUEsaUJBQUEsd0JBQUEsV0NQQSxTQUFBQyxHQUFBLElBQUFBLEVBQUFGLFFBQUFDLE9BQUEseUJBQUEsTUFBQUUsR0FBQUQsRUFBQUYsUUFBQUMsT0FBQSw0QkFBQUMsRUFBQUUsS0FBQSxpQkFBQSxTQUFBRixHQUFBQSxFQUFBRyxJQUFBLDJEQUFBLHlqSURrQkFMLFFBQUFDLE9BQUEseUJBQUFLLFVBQUEsZUFBQSxXQUNBLE9BQ0FDLFNBQUEsSUFDQUMsU0FBQSxFQUNBQyxPQUNBQyxLQUFBLFNBQ0FDLFVBQUEsYUFDQUMsV0FBQSxjQUNBQyxTQUFBLFlBQ0FDLFNBQUEsYUFFQUMsT0FBQSxXQUNBQyxPQUFBLFVBQ0FDLGdCQUFBLG1CQUNBQyxhQUFBLGdCQUVBQyxTQUFBLEtBQ0FDLGVBQUEsTUFFQUMsWUFBQSwyREFDQUMsS0FBQSxTQUFBYixFQUFBYyxFQUFBQyxFQUFBQyxLQUdBQyxXQUFBLDRCQUVBQSxXQUFBLDBCQUFBLFNBQUEsVUFBQSxXQUFBLE1BQUEsWUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBRUFDLEVBQUEsbUJBQUFaLEdBQUFmLFlBQUEsRUFBQWdCLEVBQUEsT0FBQUEsRUFBQSxVQUFBRCxFQUFBZixZQUFBNEIsS0FBQSxZQUFBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsUUFBQUYsR0FBQSxLQUNBLFNBQUFELEdBQ0EsT0FBQSxTQUFBQSxFQUFBQSxLQUFBLElBQUEsSUFBQUEsRUFBQUksV0FFQWpCLEdBQUFULGFBQUEsbUJBQUFTLEdBQUFULGNBQUEsRUFBQSxVQUFBUyxFQUFBVCxhQUNBUyxFQUFBWCxPQUFBLG1CQUFBVyxHQUFBWCxPQUFBLEdBQUFXLEVBQUFYLE9BR0FXLEVBQUFQLGVBQUEsbUJBQUFPLEdBQUFQLGtCQUFBTyxFQUFBUCxlQUNBTyxFQUFBUCxlQUFBeUIsT0FBQSxtQkFBQWxCLEdBQUFQLGVBQUF5QixPQUFBLDJCQUFBbEIsRUFBQVAsZUFBQXlCLE9BQ0FsQixFQUFBUCxlQUFBMEIsU0FBQSxtQkFBQW5CLEdBQUFQLGVBQUEwQixTQUFBLGVBQUFuQixFQUFBUCxlQUFBMEIsU0FDQW5CLEVBQUFQLGVBQUEyQixLQUFBLG1CQUFBcEIsR0FBQVAsZUFBQTJCLEtBQUEsZUFBQXBCLEVBQUFQLGVBQUEyQixLQUVBcEIsRUFBQWpCLEtBQUEsbUJBQUFpQixHQUFBakIsS0FBQWlCLEVBQUFxQixJQUFBckIsRUFBQWpCLEtBRUFpQixFQUFBUixTQUFBLG1CQUFBUSxHQUFBUixZQUFBUSxFQUFBUixTQUNBUSxFQUFBUixTQUFBYixVQUFBLG1CQUFBcUIsR0FBQVIsU0FBQWIsVUFBQSxHQUFBcUIsRUFBQVIsU0FBQWIsVUFDQXFCLEVBQUFSLFNBQUE4QixTQUFBLG1CQUFBdEIsR0FBQVIsU0FBQThCLFVBQUEsRUFBQXRCLEVBQUFSLFNBQUE4QixTQUNBdEIsRUFBQVIsU0FBQStCLEtBQUEsbUJBQUF2QixHQUFBUixTQUFBK0IsUUFBQXZCLEVBQUFSLFNBQUErQixLQUNBdkIsRUFBQXdCLFlBR0F4QixFQUFBeUIsU0FBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUFELEdBQUExQixFQUFBNEIsY0FBQSxDQUNBLElBQUEsR0FBQUMsR0FBQSxFQUFBQSxFQUFBN0IsRUFBQTRCLGNBQUFFLE9BQUFELElBQ0EsS0FBQTdCLEVBQUFSLFNBQUErQixLQUFBUCxRQUFBYSxJQUNBN0IsRUFBQStCLFdBQUEsZ0JBQUFGLEVBQUFGLEVBR0EzQixHQUFBK0IsV0FBQSwyQkFDQSxJQUFBL0IsRUFBQTRCLGNBQUEsQ0FDQSxJQUFBLEdBQUFDLEdBQUEsRUFBQUEsRUFBQTdCLEVBQUFYLE9BQUF3QyxJQUNBLEtBQUE3QixFQUFBUixTQUFBK0IsS0FBQVAsUUFBQWEsSUFDQTdCLEVBQUErQixXQUFBLGlCQUFBRixFQUdBN0IsR0FBQStCLFdBQUEseUJBS0EvQixFQUFBZ0MsY0FBQSxXQUVBLEdBQUFDLEdBQUFoQyxFQUFBLE9BQUFELEVBQUE0QixjQUFBLFlBRUEsSUFBQTVCLEVBQUF3QixTQUFBTSxPQUFBLEVBQ0EsSUFBQSxHQUFBRCxHQUFBLEVBQUFBLEVBQUE3QixFQUFBd0IsU0FBQU0sT0FBQUQsSUFHQUksR0FBQSxLQUFBQSxFQUFBakIsUUFBQWhCLEVBQUF3QixTQUFBSyxHQUFBSyxZQUVBbEMsRUFBQXdCLFNBQUFLLEdBQUEvQyxNQUFBcUQsV0FRQSxJQUFBQyxHQUFBLFdBQ0FuQyxFQUFBLE9BQUFELEVBQUFmLFdBQUEsU0FBQW9ELEdBQ0EsSUFDQSxHQUFBQyxHQUFBckMsRUFBQSxVQUFBRCxFQUFBZCxVQUFBK0IsVUFBQW9CLEVBQUFwQixZQUFBLEdBQUEsRUFDQXFCLEdBQUFDLFlBQUFGLEVBQUFFLFlBQ0FGLEVBQUFBLGFBQUEsSUFDQUMsRUFBQUUsYUFBQSxHQUVBLE1BQUFDLEdBQ0FDLFFBQUFDLElBQUEsMENBQUFOLEVBQUFwQixVQUFBLGVBQUF3QixNQUtBTCxJQUVBLElBQUFRLEdBQUEsU0FBQUMsR0FDQTdDLEVBQUE4QyxXQUFBLEVBQ0F6QyxFQUFBd0MsRUFBQUUsTUFBQSxHQUNBL0MsRUFBQWdELE1BQUEsNkJBQUFoRCxFQUFBakIsTUFDQWtFLEVBQUFKLElBSUFLLEVBQUEsU0FBQUMsR0FDQW5ELEVBQUE4QyxXQUFBLEVBQ0F6QyxFQUFBOEMsRUFBQUosTUFBQSxHQUNBL0MsRUFBQWdELE1BQUEsNkJBQUFoRCxFQUFBakIsTUFDQWtFLEVBQUFFLElBSUFGLEVBQUEsU0FBQUcsR0FHQTNDLEVBQUFSLEVBQUEsT0FBQUEsRUFBQSxjQUFBRCxFQUFBZCxTQUFBNkQsTUFBQSxJQUFBTSxRQUFBLElBQUEsWUFHQSxJQUFBQyxHQUFBckQsRUFBQSxPQUFBQSxFQUFBLFVBQUFELEVBQUFmLFlBQUFzRSxTQUFBLElBQUEsR0FBQSxZQUdBakQsR0FBQUwsRUFBQSxPQUFBbUQsRUFBQSxTQUFBSSxHQUNBLEdBQUFDLEtBcUJBLE9BbEJBeEQsR0FBQSxPQUFBcUQsRUFBQSxTQUFBSSxHQUVBLEdBQUEsbUJBQUFGLEdBQUFFLEdBRUFELEVBQUFDLEdBQUFGLEVBQUFFLE9BQ0EsQ0FHQSxHQUFBQyxHQUFBMUQsRUFBQSxPQUFBQSxFQUFBLFVBQUFELEVBQUFkLFVBQUErQixVQUFBeUMsSUFBQSxHQUFBLFNBQUEsRUFDQUMsSUFBQXRGLFFBQUF1RixXQUFBRCxHQUdBRixFQUFBQyxHQUFBQyxFQUFBSCxHQUVBZCxRQUFBQyxJQUFBLGNBQUFlLEVBQUEsMEVBSUFELElBR0FJLEVBQUF2RCxJQUlBdUQsRUFBQSxTQUFBVCxFQUFBQyxHQUdBLEdBQUFTLEdBQUE3RCxFQUFBLFVBQUFtRCxFQUFBTCxNQUFBLEdBQUFyQyxFQUFBLFNBQUFJLEVBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsUUFBQUYsR0FBQSxLQUNBLEdBQUFpQyxNQUFBLEVBR0F4QyxHQUFBTixFQUFBLGFBQUE2RCxFQUFBckQsRUFBQTRDLEVBQUFyRCxFQUFBZCxVQUNBNkUsS0FJQUEsRUFBQSxXQUNBdkQsRUFBQUksS0FBQSxFQUFBWCxFQUFBLFVBQUFNLEVBQUFLLEVBQUFaLEVBQUFkLFVBQUFxQixFQUNBeUQsS0FJQUEsRUFBQSxXQUNBaEUsRUFBQWlFLE1BQUFoRSxFQUFBLFdBQUFPLEVBQUEwRCxTQUFBbEUsRUFBQVgsU0FDQVcsRUFBQW1FLFlBQUEsRUFDQW5FLEVBQUFvRSxTQUFBLEVBQ0FwRSxFQUFBZ0QsTUFBQSx3QkFDQWhELEVBQUE0QixjQUFBNUIsRUFBQWlFLE1BQUFqRSxFQUFBbUUsYUFDQUUsRUFBQXJFLEVBQUFpRSxNQUFBbkMsT0FBQTlCLEVBQUFtRSxhQUNBakUsRUFBQSxXQUNBRixFQUFBZ0QsTUFBQSw4QkFBQWhELEVBQUFqQixNQUNBaUIsRUFBQThDLFdBQUEsR0FDQSxLQU9BOUMsRUFBQStCLFdBQUEsdUJBSUEvQixHQUFBc0UsSUFBQSxtQkFBQXRFLEVBQUFqQixLQUFBLFNBQUF3RixFQUFBQyxHQUNBdEIsRUFBQXNCLEtBSUF4RSxFQUFBc0UsSUFBQSxtQkFBQXRFLEVBQUFqQixLQUFBLFNBQUF3RixFQUFBQyxHQUNBN0QsRUFBQTZELEVBQ0FYLEVBQUF2RCxFQUFBeUMsTUFBQSxHQUFBeUIsS0FJQXhFLEVBQUFzRSxJQUFBLG1CQUFBdEUsRUFBQWpCLEtBQUEsU0FBQXdGLEVBQUFDLEdBQ0E5RCxFQUFBOEQsRUFDQVgsRUFBQXZELEVBQUF5QyxNQUFBLEdBQUFwQyxLQUdBWCxFQUFBc0UsSUFBQSxvQkFBQXRFLEVBQUFqQixLQUFBLFNBQUF3RixFQUFBQyxHQUNBeEUsRUFBQXlCLFVBQUEsR0FBQSxLQUdBekIsRUFBQXNFLElBQUEscUJBQUF0RSxFQUFBakIsS0FBQSxTQUFBd0YsRUFBQUMsR0FDQXhFLEVBQUF5QixVQUFBLEtBSUF6QixFQUFBc0UsSUFBQSx1QkFBQXRFLEVBQUFqQixLQUFBLFNBQUF3RixFQUFBQyxHQUNBeEUsRUFBQWQsU0FBQXNGLEVBQUFDLE9BQ0F6RSxFQUFBZixXQUFBdUYsRUFBQUUsU0FDQXRDLElBQ0EzQixFQUFBUixFQUFBLE9BQUFBLEVBQUEsY0FBQUQsRUFBQWQsU0FBQTZELE1BQUEsSUFBQU0sUUFBQSxJQUFBLGFBR0F6QyxLQUFBLEdBQUE0RCxFQUFBRyxnQkFBQSxFQUdBL0QsRUFBQVgsRUFBQSxPQUFBQSxFQUFBLFVBQUFELEVBQUFmLFlBQUE0QixLQUFBLFlBQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBQSxHQUFBQyxRQUFBRixHQUFBLEtBQ0EsU0FBQUQsR0FDQSxPQUFBLFNBQUFBLEVBQUFBLEtBQUEsSUFBQSxJQUFBQSxFQUFBSSxhQUlBaEIsRUFBQSxPQUFBQSxFQUFBLFVBQUFELEVBQUFmLFlBQUE0QixLQUFBLFlBQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBQSxHQUFBQyxRQUFBRixHQUFBLEtBQ0EsU0FBQXVCLEdBQ0FBLEVBQUF4QixLQUFBLFdBSUFaLEVBQUEsT0FBQVcsRUFBQSxTQUFBZ0UsR0FDQSxHQUFBL0QsR0FBQSxLQUFBK0QsRUFBQTVELFFBQUEsS0FBQSxNQUFBLE1BQ0E0RCxHQUFBQSxFQUFBL0YsUUFBQSxJQUFBLElBQ0FvQixFQUFBLFVBQUFELEVBQUFmLFlBQUFnQyxVQUFBMkQsSUFBQSxHQUFBLEdBQUEvRCxLQUFBQSxPQVFBYixFQUFBc0UsSUFBQSxxQkFBQXRFLEVBQUFqQixLQUFBLFNBQUF3RixFQUFBQyxHQUNBeEUsRUFBQVgsT0FBQTZFLFNBQUFNLEdBQ0FSLE1BSUFoRSxFQUFBc0UsSUFBQSxpQkFBQXRFLEVBQUFqQixLQUFBLFNBQUF3RixFQUFBQyxHQUNBSyxFQUFBTCxJQUtBLElBQUFILEdBQUEsU0FBQVMsRUFBQVgsR0FPQSxNQU5BbkUsR0FBQXlCLFVBQUEsR0FDQXpCLEVBQUFnQyxnQkFFQWhDLEVBQUFxRSxjQUdBLElBQUFTLEdBQ0E5RSxFQUFBcUUsWUFBQSxNQUNBckUsR0FBQWdELE1BQUEscUJBQ0ErQixNQUFBekUsRUFBQXdCLE9BQ0FnQyxTQUFBLEVBQ0FrQixZQUFBLEVBQ0FDLFVBQUEsRUFDQUMsV0FBQWxGLEVBQUFYLE9BQ0E4RSxZQUFBLEVBQ0FnQixjQUFBLE1BTUEsRUFBQUwsRUFDQTlFLEVBQUFxRSxZQUFBLEdBR0EsRUFBQVMsRUFDQTlFLEVBQUFxRSxZQUFBLEVBQUEsR0FHQSxFQUFBUyxFQUNBOUUsRUFBQXFFLFlBQUEsRUFBQSxFQUFBLEdBR0EsRUFBQVMsRUFDQTlFLEVBQUFxRSxZQUFBLEVBQUEsRUFBQSxFQUFBLEdBR0EsRUFBQUYsRUFDQW5FLEVBQUFxRSxZQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FHQVMsRUFBQVgsRUFBQSxFQUNBbkUsRUFBQXFFLFlBQUFGLEVBQUEsRUFBQUEsRUFBQUEsRUFBQSxHQUdBVyxJQUFBWCxFQUFBLEVBQ0FuRSxFQUFBcUUsWUFBQUYsRUFBQSxFQUFBQSxFQUFBLEVBQUFBLEdBR0FXLEVBQUEsRUFBQVgsSUFDQW5FLEVBQUFxRSxZQUFBRixFQUFBLEVBQUFBLEVBQUFBLEVBQUEsRUFBQUEsRUFBQSxRQUdBbkUsR0FBQWdELE1BQUEscUJBQ0ErQixNQUFBekUsRUFBQXdCLE9BQ0FnQyxTQUFBdkQsRUFBQXVCLE9BQ0FrRCxZQUFBaEYsRUFBQW1FLFlBQUFuRSxFQUFBWCxRQUFBVyxFQUFBbUUsWUFBQSxFQUFBLEVBQUEsR0FDQWMsVUFBQWpGLEVBQUFtRSxZQUFBbkUsRUFBQVgsT0FBQVcsRUFBQTRCLGNBQUFFLE9BQ0FvRCxXQUFBbEYsRUFBQVgsT0FDQThFLFlBQUFuRSxFQUFBbUUsWUFDQWdCLGNBQUFuRixFQUFBaUUsTUFBQW5DLFVBSUE5QixHQUFBb0YsU0FBQSxXQUNBLElBQ0FwRixFQUFBbUUsY0FDQW5FLEVBQUE0QixjQUFBNUIsRUFBQWlFLE1BQUFqRSxFQUFBbUUsYUFDQUUsRUFBQXJFLEVBQUFpRSxNQUFBbkMsT0FBQTlCLEVBQUFtRSxhQUNBbkUsRUFBQWdELE1BQUEsdUJBQUFoRCxFQUFBakIsTUFDQWlCLEVBQUErQixXQUFBLHVCQUNBLE1BQUFVLEdBQ0FDLFFBQUFDLElBQUFGLEtBS0F6QyxFQUFBcUYsYUFBQSxXQUNBLElBQ0FyRixFQUFBbUUsY0FDQW5FLEVBQUE0QixjQUFBNUIsRUFBQWlFLE1BQUFqRSxFQUFBbUUsYUFDQUUsRUFBQXJFLEVBQUFpRSxNQUFBbkMsT0FBQTlCLEVBQUFtRSxhQUNBbkUsRUFBQWdELE1BQUEsdUJBQUFoRCxFQUFBakIsTUFDQWlCLEVBQUErQixXQUFBLHVCQUNBLE1BQUFVLEdBQ0FDLFFBQUFDLElBQUFGLEtBR0F6QyxFQUFBc0YsUUFBQSxTQUFBQyxHQUNBLElBQ0F2RixFQUFBbUUsWUFBQW9CLEVBQ0F2RixFQUFBNEIsY0FBQTVCLEVBQUFpRSxNQUFBakUsRUFBQW1FLGFBQ0FFLEVBQUFyRSxFQUFBaUUsTUFBQW5DLE9BQUE5QixFQUFBbUUsYUFDQW5FLEVBQUFnRCxNQUFBLHVCQUFBaEQsRUFBQWpCLE1BQ0FpQixFQUFBK0IsV0FBQSx1QkFDQSxNQUFBVSxHQUNBQyxRQUFBQyxJQUFBRixLQUtBekMsRUFBQWEsS0FBQSxTQUFBMkUsRUFBQTlCLEdBQ0EsR0FBQStCLEdBQUFELEVBQUFDLFNBQUFELEVBQUFFLE9BR0EsS0FBQUQsR0FBQS9CLEVBQ0EsSUFBQSxHQUFBN0IsR0FBQSxFQUFBN0IsRUFBQWYsV0FBQTZDLE9BQUFELEVBQUFBLElBQUEsQ0FDQSxHQUFBUSxHQUFBckMsRUFBQWYsV0FBQTRDLElBQ0FRLEVBQUFwQixZQUFBeUMsR0FBQSxRQUFBckIsRUFBQXhCLE1BQUF3QixFQUFBcEIsWUFBQXlDLEdBQUEsU0FBQXJCLEVBQUF4QixRQUNBYixFQUFBZixXQUFBNEMsR0FBQWhCLEtBQUEsVUFLQSxHQUFBNkMsRUFDQSxJQUFBLEdBQUE3QixHQUFBLEVBQUE3QixFQUFBZixXQUFBNkMsT0FBQUQsRUFBQUEsSUFBQSxDQUNBLEdBQUFRLEdBQUFyQyxFQUFBZixXQUFBNEMsRUFDQSxJQUFBUSxFQUFBcEIsWUFBQXlDLEVBQUEsQ0FDQSxHQUFBN0MsR0FBQXdCLEVBQUF4QixJQUNBLFFBQUFBLEdBQ0EsSUFBQSxVQUVBLEtBQ0EsS0FBQSxTQUNBYixFQUFBZixXQUFBNEMsR0FBQWhCLEtBQUEsS0FDQSxNQUNBLEtBQUEsTUFDQWIsRUFBQWYsV0FBQTRDLEdBQUFoQixLQUFBLE1BQ0EsTUFDQSxLQUFBLE9BQ0FiLEVBQUFmLFdBQUE0QyxHQUFBaEIsS0FBQSxXQVFBRCxFQUFBWCxFQUFBLE9BQUFBLEVBQUEsVUFBQUQsRUFBQWYsWUFBQTRCLEtBQUEsWUFBQSxTQUFBQyxFQUFBQyxHQUNBLE1BQUFBLEdBQUFDLFFBQUFGLEdBQUEsS0FDQSxTQUFBRCxHQUNBLE9BQUEsU0FBQUEsRUFBQUEsS0FBQSxJQUFBLElBQUFBLEVBQUFJLFlBR0E4QyxLQUlBL0QsRUFBQVosUUFDQXdELEVBQUE1QyxFQUFBWixPQUlBLElBQUF5RixHQUFBLFNBQUFjLEdBQ0FBLEVBQUEsbUJBQUFBLE1BQUFBLENBTUEsS0FBQSxHQUpBQyxHQUFBLG1CQUFBRCxHQUFBQyxTQUFBLFNBQUFELEVBQUFDLFNBR0FDLEVBQUFDLEtBQUFDLE1BQUExSCxRQUFBMkgsT0FBQXhGLEVBQUF1QyxNQUFBLEtBQ0FsQixFQUFBLEVBQUFBLEVBQUFnRSxFQUFBL0QsT0FBQUQsSUFBQSxDQUNBLEdBQUEyQixHQUFBcUMsRUFBQWhFLEVBQ0EsS0FBQSxHQUFBb0UsS0FBQXpDLEdBQ0EsR0FBQUEsRUFBQTBDLGVBQUFELEdBQUEsQ0FDQSxHQUFBRSxHQUFBbEcsRUFBQSxVQUFBRCxFQUFBZCxVQUFBK0IsVUFBQWdGLElBQUEsR0FBQSxHQUNBRyxFQUFBbkcsRUFBQSxVQUFBRCxFQUFBZixZQUFBZ0MsVUFBQWdGLElBQUEsR0FBQSxHQUVBSSxFQUFBRixFQUFBQSxTQUdBLElBQUFFLEdBQUFoSSxRQUFBdUYsV0FBQXlDLEdBQUEsQ0FFQSxHQUFBQyxHQUFBRCxFQUFBN0MsRUFBQXlDLEVBQ0F6QyxHQUFBeUMsR0FBQUUsRUFBQUksc0JBQUEsRUFBQUQsRUFBQXJHLEVBQUEsbUJBQUFxRyxPQUVBOUMsR0FBQXlDLEdBQUFFLEVBQUFJLHNCQUFBLEVBQUEvQyxFQUFBeUMsR0FBQWhHLEVBQUEsbUJBQUF1RCxFQUFBeUMsR0FJQSxvQkFBQU4sR0FBQWEsY0FFQSxLQUFBYixFQUFBYSxjQUFBeEYsUUFBQW9GLEVBQUFuRixhQUNBdUMsRUFBQXlDLEdBQUEsTUFJQSxtQkFBQUcsR0FBQUEsV0FBQUEsRUFBQUEsYUFBQSxJQUVBNUMsRUFBQXlDLEdBQUEsT0FPQSxHQUFBN0MsR0FBQXlDLENBR0EsSUFBQSxtQkFBQUYsR0FBQWEsY0FHQSxHQUFBQyxHQUFBeEcsRUFBQSxPQUFBMEYsRUFBQWEsY0FBQSxTQUFBdkYsR0FDQSxNQUFBaEIsR0FBQSxVQUFBRCxFQUFBZCxTQUFBNkQsTUFBQSxJQUFBOUIsVUFBQUEsSUFBQSxHQUFBLFNBS0EsSUFBQXdGLEdBQUF4RyxFQUFBLFdBQUFBLEVBQUEsY0FBQUQsRUFBQWQsVUFBQXNELGFBQUEsSUFBQSxjQUdBLElBQUFrRSxJQUNBQyxTQUFBLG1CQUFBaEIsR0FBQWdCLFNBQUEsSUFBQWhCLEVBQUFnQixTQUNBQyxPQUFBM0csRUFBQSxPQUFBd0csRUFBQSxRQUNBSSxTQUFBLG1CQUFBbEIsR0FBQWtCLFNBQUEsSUFBQWxCLEVBQUFrQixTQUNBdEUsWUFBQXRDLEVBQUEsT0FBQXdHLEVBQUEsYUFDQUssV0FBQSxtQkFBQW5CLEdBQUFtQixXQUFBLElBQUFuQixFQUFBbUIsV0FDQUMsbUJBQUEsbUJBQUFwQixHQUFBcUIsT0FDQUMsUUFBQSxtQkFBQXRCLEdBQUFzQixRQUFBLFFBQUF0QixFQUFBc0IsUUFDQUMsYUFBQSxtQkFBQXZCLEdBQUF1QixjQUFBLEVBQUF2QixFQUFBdUIsYUFHQS9HLEdBQUFnSCxVQUFBL0QsRUFBQXNELEdBQUFVLEtBQUEsU0FBQUMsR0FFQSxHQUFBQyxFQUVBLElBQUFDLE9BQUFDLFVBQUFDLGlCQUNBSCxFQUFBLEdBQUFJLE9BQUFMLElBQ0FNLEtBQUEsNEJBRUFILFVBQUFJLFdBQUFOLEVBQUEsa0JBS0EsSUFBQSxnQ0FBQUMsT0FBQUMsVUFBQUssUUFBQSxDQUNBTixPQUFBTyxNQUFBLHFJQUNBLElBQUFDLEdBQUExSixRQUFBdUIsUUFBQSxvQkFDQW1JLEdBQUEsR0FBQUMsTUFBQUMsUUFBQSxNQUNBLElBQUFySSxHQUFBdkIsUUFBQXVCLFFBQUEsT0FDQUEsR0FBQXNJLE9BQUFILEVBQ0EsSUFBQUksR0FBQSxJQUNBSixHQUFBLEdBQUFLLGdCQUNBRCxFQUFBSixFQUFBLEdBQUFLLGdCQUNBTCxFQUFBLEdBQUFNLGdCQUNBRixFQUFBSixFQUFBLEdBQUFNLGNBQUFDLFVBRUFILEVBQUF6RyxLQUFBLGFBQUEsV0FDQXlHLEVBQUFJLE9BQUFsQixJQUNBYyxFQUFBSyxRQUVBTCxFQUFBTSxZQUFBLFVBQUEsRUFBQTdDLEVBQUEsWUFDQSxDQUNBMEIsRUFBQSxHQUFBSSxPQUFBTCxJQUNBTSxLQUFBLDJCQUVBLElBQUFlLEdBQUFySyxRQUFBdUIsUUFBQSxVQUNBOEksR0FBQUMsS0FBQSxPQUFBcEIsT0FBQXFCLElBQUFDLGdCQUFBdkIsSUFDQW9CLEVBQUFDLEtBQUEsV0FBQS9DLEVBQUEsUUFHQXhGLEVBQUEwSSxLQUFBLFFBQUFaLE9BQUFRLEdBQ0F4SSxFQUFBLFdBR0F3SSxFQUFBLEdBQUFLLFFBQ0FMLEVBQUFNLFVBQ0EsYUFPQXJLLFVBQUEsU0FBQSxXQUFBLFVBQUEsU0FBQXNLLEVBQUFoSixHQUNBLE9BQ0FyQixTQUFBLElBQ0FFLE9BQUEsRUFDQWEsS0FBQSxTQUFBYixFQUFBYyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFvSixHQUFBakosRUFBQSxVQUFBbkIsRUFBQUcsWUFBQWtLLFNBQUEsSUFBQSxHQUFBckgsT0FDQXNILEVBQUEsU0FBQUMsR0FDQXZLLEVBQUFVLFNBQUE4QixVQUFBK0gsRUFBQSxHQUFBdkssRUFBQTJDLFVBQUEsRUFDQSxJQUFBNkgsR0FBQXhLLEVBQUF5SyxPQUNBL0YsRUFBQXlGLEVBQUEseUNBQUFDLEVBQUEsS0FBQXBLLEVBQUFVLFNBQUFiLFVBQUEsY0FBQTJLLEVBQ0ExSixHQUFBNEosTUFBQWhHLEdBQ0ExRSxFQUFBMEUsSUFBQWlHLFFBQUEsRUFDQTNLLEVBQUFVLFNBQUErQixLQUFBbUksS0FBQUMsSUFFQUMsRUFBQSxXQUVBOUssRUFBQTBFLElBQUFpRyxRQUFBLEVBQ0EzSyxFQUFBVSxTQUFBK0IsS0FBQXNJLE9BQUEvSyxFQUFBVSxTQUFBK0IsS0FBQVAsUUFBQTJJLEdBQUEsR0FDQS9KLEVBQUF3QixPQUFBdEMsUUFBQXFELFdBQ0F2QyxFQUFBd0IsT0FBQTRILFVBR0FXLEVBQUE3SyxFQUFBZ0wsTUFDQWhMLEdBQUFpTCxVQUFBLFdBQ0EsR0FBQUMsR0FBQSxLQUFBbEwsRUFBQVUsU0FBQStCLEtBQUFQLFFBQUEySSxFQUNBSyxHQUlBSixJQUhBUixJQUtBdEssRUFBQWlELFdBQUEsd0JBRUFqRCxFQUFBd0YsSUFBQSxnQkFBQXFGLEVBQUEsU0FBQXBGLEVBQUE1QyxHQUNBLEdBQUFxSSxHQUFBLEtBQUFsTCxFQUFBVSxTQUFBK0IsS0FBQVAsUUFBQTJJLEVBQ0FLLElBQ0FaLEVBQUF6SCxLQUdBN0MsRUFBQXdGLElBQUEsaUJBQUFxRixFQUFBLFdBQ0EsR0FBQUssR0FBQSxLQUFBbEwsRUFBQVUsU0FBQStCLEtBQUFQLFFBQUEySSxFQUNBSyxJQUNBSixXQUtBakwsVUFBQSxVQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBZSxLQUFBLFNBQUFiLEVBQUFjLEVBQUFDLEVBQUFDLEdBQ0FoQixFQUFBbUwsT0FDQW5MLEVBQUFrRSxNQUFBLHdCQUFBbEUsRUFBQUMsVUFLQUosVUFBQSxZQUFBLFdBQUEsU0FBQXNLLEdBQ0EsT0FDQXJLLFNBQUEsSUFDQUUsT0FDQTBFLElBQUEsV0FDQWtCLFNBQUEsaUJBQ0F3RixRQUFBLGFBQ0FDLGVBQUEsbUJBRUF4SyxLQUFBLFNBQUFiLEVBQUFjLEVBQUFDLEVBQUFDLEdBQ0EsR0FFQXNLLEdBRkE1RyxFQUFBMUUsRUFBQTBFLElBQ0F5QyxFQUFBbkgsRUFBQTRGLFNBQUF6RCxVQUdBb0osRUFBQXZMLEVBQUE0RixTQUFBNEYsTUFNQSxJQUpBRixFQURBQyxHQUFBaE0sUUFBQXVGLFdBQUF5RyxHQUNBQSxFQUFBN0csRUFBQXlDLEdBRUF6QyxFQUFBeUMsR0FFQW5ILEVBQUFvTCxTQUFBcEwsRUFBQW9MLFdBQUEsRUFBQSxDQUVBLEdBQUFLLEVBQ0F6TCxHQUFBb0wsV0FBQSxHQUFBcEwsRUFBQW9MLFFBQUFNLFFBQ0FELEVBQUF6TCxFQUFBb0wsUUFBQVgsT0FFQXpLLEVBQUFxTCxlQUFBVCxNQUFBeEgsVUFBQXBELEVBQUEwRSxJQUFBdEIsVUFBQXBELE1BQUF5TCxLQUVBQSxFQUFBekwsRUFBQTJMLFFBQUFsQixPQUVBYSxFQUFBbkIsRUFBQW1CLEdBQUFHLEdBQ0EzSyxFQUFBc0ksT0FBQWtDLE9BRUF4SyxHQUFBLEdBQUE4SyxVQUFBTixPQUlBTyxPQUFBLGVBQUEsVUFBQSxTQUFBMUssR0FDQSxNQUFBLFVBQUF5RSxFQUFBdUIsRUFBQXZDLEdBRUEsSUFDQSxHQUFBMEcsR0FBQW5LLEVBQUEsVUFBQXlFLEdBQUF6RCxVQUFBZ0YsSUFBQSxHQUFBLEdBQUF2QyxHQUNBLE1BQUFqQixHQUNBQyxRQUFBQyxJQUFBLDBCQUFBZSxFQUFBLHNCQUFBdUMsRUFBQSxpQkFBQXhELEdBRUEsTUFBQTJILE9BRUFPLE9BQUEsYUFBQSxVQUFBLGVBQUEsU0FBQTFLLEVBQUEySyxHQUNBLE1BQUEsVUFBQUMsRUFBQXBHLEVBQUE5RCxFQUFBbUssR0FHQSxJQUFBLEdBREF6SCxNQUNBMEgsRUFBQSxFQUFBQSxFQUFBRCxFQUFBaEosT0FBQWlKLElBQUEsQ0FFQSxHQUFBNUUsR0FBQTJFLEVBQUFDLEVBQ0EsSUFBQTVFLEVBQUE5QyxRQUFBaEYsUUFBQXVGLFdBQUF1QyxFQUFBOUMsUUFBQSxDQUNBLEdBQUFwQyxHQUFBa0YsRUFBQWxGLFNBQ0FvQyxHQUFBcEMsR0FBQWtGLEVBQUE5QyxRQUlBLElBQUExQyxHQUFBLElBQUFBLEVBQUE5QixRQUFBLEtBQUEsSUFBQWlELE9BQ0EsTUFBQStJLEVBRUEsSUFBQUcsS0FDQXJLLEdBQUEsbUJBQUFBLEdBQUEsR0FBQUEsQ0FHQSxLQUFBLEdBRkFzSyxHQUFBdEssRUFBQXVLLGNBQUFDLE1BQUEsa0JBRUF0SixFQUFBLEVBQUFBLEVBQUFnSixFQUFBL0ksT0FBQUQsSUFBQSxDQUNBLEdBQUEyQixHQUFBcUgsRUFBQWhKLEdBQ0F1SixFQUFBLEdBQ0FDLEVBQUEsQ0FDQXBMLEdBQUEsT0FBQXdFLEVBQUEsU0FBQW5DLEdBQ0EsR0FBQWdKLEdBQUEsSUFBQUQsRUFBQSxHQUFBLEtBQ0FELElBQUEvSCxFQUFBZixHQUFBZ0osRUFBQWpJLEVBQUFmLEdBQUFrQixFQUFBbEIsR0FBQWdKLEVBQUE5SCxFQUFBbEIsR0FDQStJLE1BRUFELEVBQUFBLEVBQUFGLGFBRUEsS0FBQSxHQURBQyxJQUFBLEVBQ0FKLEVBQUEsRUFBQUEsRUFBQUUsRUFBQW5KLE9BQUFpSixJQUFBLENBQ0EsR0FBQVEsR0FBQU4sRUFBQUYsR0FBQWxNLFFBQUEsS0FBQSxHQUdBLElBRkFzTSxFQUFBLEtBQUFDLEVBQUFwSyxRQUFBdUssSUFFQUosRUFDQSxNQU1BQSxHQUVBSCxFQUFBdEIsS0FBQWxHLEdBR0EsTUFBQXdILE9BRUFMLE9BQUEsY0FBQSxXQUNBLE1BQUEsVUFBQVMsR0FBQSxJQUNBLE1BQUFBLEdBQUF2TSxRQUFBLGtCQUFBLFNBQUFxTSxjQUFBLE1BQUF6SSxHQUFBQyxRQUFBQyxJQUFBLHNCQUFBRixPQUVBa0ksT0FBQSxTQUFBLFdBQ0EsTUFBQSxVQUFBRSxFQUFBVyxFQUFBL0csR0FlQSxRQUFBZ0gsR0FBQS9ILEdBQ0EsR0FBQWdJLEdBQUEsQ0FLQSxPQUpBLE1BQUFoSSxFQUFBLEtBQ0FnSSxFQUFBLEdBQ0FoSSxFQUFBQSxFQUFBaUksT0FBQSxJQUVBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQSxPQUFBRixFQUFBbEksR0FBQSxHQUFBcUksRUFBQXJJLEdBQUFxSSxFQUFBckksR0FBQWtJLEVBQUFsSSxHQUFBa0ksRUFBQWxJLEdBQ0FzSSxFQUFBLE9BQUFILEVBQUFuSSxHQUFBLEdBQUFxSSxFQUFBckksR0FBQXFJLEVBQUFySSxHQUFBbUksRUFBQW5JLEdBQUFtSSxFQUFBbkksR0FDQTJELEVBQUEyRSxFQUFBRixFQUFBLEdBQUFBLEVBQUFFLEVBQUEsRUFBQSxDQUNBLE9BQUEzRSxHQUFBcUUsR0FHQSxRQUFBTyxHQUFBVCxHQU1BLEdBQUFVLEdBQUFWLENBQ0EsT0FBQSxVQUFBVyxFQUFBQyxHQUtBLElBSkEsR0FBQXZLLEdBQUEsRUFBQXdGLEVBQUEsRUFBQWdGLEVBQUFILEVBQUFwSyxPQUlBLElBQUF1RixHQUFBZ0YsRUFBQXhLLEdBQ0F3RixFQUFBb0UsRUFBQVMsRUFBQXJLLElBQUFzSyxFQUFBQyxHQUNBdkssR0FFQSxPQUFBd0YsSUF4Q0EsSUFBQSxHQUhBMEUsTUFHQWxLLEVBQUEsRUFBQUEsRUFBQTRDLEVBQUEzQyxPQUFBRCxJQUFBLENBQ0EsR0FBQVMsR0FBQW1DLEVBQUE1QyxFQUdBUyxHQUFBekIsTUFBQXhDLFFBQUF1RixXQUFBdEIsRUFBQXpCLFFBR0FrTCxFQUFBekosRUFBQXJCLFdBQUFxQixFQUFBekIsTUFvQ0EsTUFBQWdLLEdBQUFoSyxLQUFBb0wsRUFBQVQsT0FFQWIsT0FBQSxrQkFBQSxXQUNBLE1BQUEsVUFBQTJCLEdBQ0EsTUFBQSxvQkFBQUMsS0FBQUQsR0FBQSxJQUFBQSxFQUFBQSIsImZpbGUiOiJhbmd1bGFyLWdlbmVyaWMtdGFibGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICogQG5hbWUgYW5ndWxhci5nZW5lcmljLnRhYmxlLmRpcmVjdGl2ZTpnZW5lcmljVGFibGVcclxuICogQHJlcXVpcmVzIC8vICdwcm92aWRlIGFueSBkZXBlbmRlbmNpZXMgZXguICRzY29wZSwgeW91IGNhbiBoYXZlIG11bHRpcGxlIEByZXF1aXJlcyBsaW5lcydcclxuICpcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERlc2NyaXB0aW9uIG9mIGdlbmVyaWNUYWJsZSBkaXJlY3RpdmUsIGxvcmVtIGlwc3VtIGRvbGFyIHNpdCBhbWV0XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gZGF0YS1hdHRyaWJ1dGUgLy8gJ2F0dHJpYnV0ZXMgdXNlZCBieSBkaXJlY3RpdmUsIHlvdSBjYW4gaGF2ZSBtdWx0aXBsZSBAcGFyYW0gbGluZXMnXHJcbiAqXHJcbiAqICBAZXhhbXBsZSA8cHJlPlxyXG4gKlxyXG4gKiA8Z2VuZXJpYy10YWJsZSBkYXRhLWF0dHJpYnV0ZT1cIm15LXZhbHVlXCI+PC9nZW5lcmljLXRhYmxlPlxyXG4gKlxyXG4gKiA8L3ByZT5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdhbmd1bGFyLmdlbmVyaWMudGFibGUnKS5kaXJlY3RpdmUoJ2dlbmVyaWNUYWJsZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgZ3RJZDonPT9ndElkJyxcclxuICAgICAgICAgICAgZ3RDbGFzc2VzOidAZ3RDbGFzc2VzJyxcclxuICAgICAgICAgICAgZ3RTZXR0aW5nczonPWd0U2V0dGluZ3MnLFxyXG4gICAgICAgICAgICBndEZpZWxkczonPWd0RmllbGRzJyxcclxuICAgICAgICAgICAgZ3RUb3RhbHM6Jz0/Z3RUb3RhbHMnLFxyXG4gICAgICAgICAgICAvL2d0SW5kZXg6Jz1ndEluZGV4JyxcclxuICAgICAgICAgICAgZ3REYXRhOic9P2d0RGF0YScsXHJcbiAgICAgICAgICAgIGd0Um93czonQGd0Um93cycsXHJcbiAgICAgICAgICAgIGd0Um93VHJhbnNpdGlvbjonQGd0Um93VHJhbnNpdGlvbicsXHJcbiAgICAgICAgICAgIGd0UGFnaW5hdGlvbjonQGd0UGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIC8vZ3ROb0RhdGFUeHQ6J0AnLFxyXG4gICAgICAgICAgICBndEV4cGFuZDonPT8nLFxyXG4gICAgICAgICAgICBndFRyYW5zbGF0aW9uczonPT8nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2dlbmVyaWMtdGFibGUvZGlyZWN0aXZlL2dlbmVyaWMtdGFibGUvZ2VuZXJpYy10YWJsZS5odG1sJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGZuKSB7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjpcImdlbmVyaWNUYWJsZUNvbnRyb2xsZXJcIlxyXG4gICAgfTtcclxufSkuY29udHJvbGxlcignZ2VuZXJpY1RhYmxlQ29udHJvbGxlcicsZnVuY3Rpb24oJHNjb3BlLCRmaWx0ZXIsJHRpbWVvdXQsIENTViwkZG9jdW1lbnQpe1xyXG4gICAgdmFyIG9yaWdpbmFsRGF0YTsgLy8gb3JpZ2luYWwgdW50b3VjaGVkIGRhdGFcclxuICAgIHZhciBtYXBwZWREYXRhOyAvLyBtYXBwZWQgZGF0YSwgYXJyYXkgY29udGFpbmluZyBtYXBwZWQga2V5cyB1c2VkIGJ5IHRhYmxlXHJcbiAgICB2YXIgZmlsdGVyZWREYXRhOyAvLyBmaWx0ZXJlZCBtYXBwZWQgZGF0YVxyXG4gICAgdmFyIHNvcnRlZERhdGE7IC8vIHNvcnRlZCBtYXBwZWQgZGF0YVxyXG4gICAgdmFyIHNlYXJjaENvbHVtbnM7IC8vIGNvbHVtbnMgdG8gc2VhcmNoXHJcbiAgICB2YXIgdGFibGVGaWx0ZXJzOyAvLyBmaWx0ZXJzIGFwcGxpZWQgdG8gdGhlIHRhYmxlIGludGVybmFsbHlcclxuICAgIHZhciBzZWFyY2hUZXJtczsgLy8gc2VhcmNoIHRlcm1zIHVzZWQgZm9yIHNlYXJjaGluZyB0YWJsZVxyXG5cclxuICAgIHZhciBzb3J0aW5nID0gdHlwZW9mICRzY29wZS5ndFNldHRpbmdzID09PSAndW5kZWZpbmVkJyA/IGZhbHNlOiRmaWx0ZXIoJ21hcCcpKCRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndFNldHRpbmdzLHtzb3J0OlwiYXNjIGRlc2NcIn0sZnVuY3Rpb24oZXhwZWN0ZWQsIGFjdHVhbCl7XHJcbiAgICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xO1xyXG4gICAgfSksZnVuY3Rpb24oc29ydCl7XHJcbiAgICAgICAgcmV0dXJuIChzb3J0LnNvcnQgPT09ICdkZXNjJyA/ICctJzonJykgKyBzb3J0Lm9iamVjdEtleVxyXG4gICAgfSk7IC8vIHJldHVybnMgYXJyYXkgY29udGFpbmluZyBzb3J0aW5nIGNyaXRlcmlhXHJcbiAgICAkc2NvcGUuZ3RQYWdpbmF0aW9uID0gdHlwZW9mICRzY29wZS5ndFBhZ2luYXRpb24gPT09ICd1bmRlZmluZWQnID8gdHJ1ZTokc2NvcGUuZ3RQYWdpbmF0aW9uICE9PSAnZmFsc2UnO1xyXG4gICAgJHNjb3BlLmd0Um93cyA9IHR5cGVvZiAkc2NvcGUuZ3RSb3dzID09PSAndW5kZWZpbmVkJyA/IDIwOiRzY29wZS5ndFJvd3M7XHJcblxyXG4gICAgLy8gdGV4dCB0cmFuc2xhdGlvbnNcclxuICAgICRzY29wZS5ndFRyYW5zbGF0aW9ucyA9IHR5cGVvZiAkc2NvcGUuZ3RUcmFuc2xhdGlvbnMgPT09ICd1bmRlZmluZWQnID8ge306JHNjb3BlLmd0VHJhbnNsYXRpb25zO1xyXG4gICAgJHNjb3BlLmd0VHJhbnNsYXRpb25zLm5vRGF0YSA9IHR5cGVvZiAkc2NvcGUuZ3RUcmFuc2xhdGlvbnMubm9EYXRhID09PSAndW5kZWZpbmVkJyA/ICdObyB0YWJsZSBkYXRhIHRvIGRpc3BsYXknOiRzY29wZS5ndFRyYW5zbGF0aW9ucy5ub0RhdGE7XHJcbiAgICAkc2NvcGUuZ3RUcmFuc2xhdGlvbnMucHJldmlvdXMgPSB0eXBlb2YgJHNjb3BlLmd0VHJhbnNsYXRpb25zLnByZXZpb3VzID09PSAndW5kZWZpbmVkJyA/ICcmbGFxdW87IFByZXYnOiRzY29wZS5ndFRyYW5zbGF0aW9ucy5wcmV2aW91cztcclxuICAgICRzY29wZS5ndFRyYW5zbGF0aW9ucy5uZXh0ID0gdHlwZW9mICRzY29wZS5ndFRyYW5zbGF0aW9ucy5uZXh0ID09PSAndW5kZWZpbmVkJyA/ICdOZXh0ICZyYXF1bzsnOiRzY29wZS5ndFRyYW5zbGF0aW9ucy5uZXh0O1xyXG5cclxuICAgICRzY29wZS5ndElkID0gdHlwZW9mICRzY29wZS5ndElkID09PSAndW5kZWZpbmVkJyA/ICRzY29wZS4kaWQ6JHNjb3BlLmd0SWQ7XHJcblxyXG4gICAgJHNjb3BlLmd0RXhwYW5kID0gdHlwZW9mICRzY29wZS5ndEV4cGFuZCA9PT0gJ3VuZGVmaW5lZCcgPyB7fTokc2NvcGUuZ3RFeHBhbmQ7XHJcbiAgICAkc2NvcGUuZ3RFeHBhbmQuZGlyZWN0aXZlID0gdHlwZW9mICRzY29wZS5ndEV4cGFuZC5kaXJlY3RpdmUgPT09ICd1bmRlZmluZWQnID8gJyc6JHNjb3BlLmd0RXhwYW5kLmRpcmVjdGl2ZTtcclxuICAgICRzY29wZS5ndEV4cGFuZC5tdWx0aXBsZSA9IHR5cGVvZiAkc2NvcGUuZ3RFeHBhbmQubXVsdGlwbGUgPT09ICd1bmRlZmluZWQnID8gZmFsc2U6JHNjb3BlLmd0RXhwYW5kLm11bHRpcGxlO1xyXG4gICAgJHNjb3BlLmd0RXhwYW5kLnJvd3MgPSB0eXBlb2YgJHNjb3BlLmd0RXhwYW5kLnJvd3MgPT09ICd1bmRlZmluZWQnID8gW106JHNjb3BlLmd0RXhwYW5kLnJvd3M7XHJcbiAgICAkc2NvcGUuYmluZGluZ3MgPSBbXTtcclxuXHJcbiAgICAvLyBzeW5jIHJvdyBzdGF0ZSBpLmUuIGlmIHJvdyBzaG91bGQgYmUgb3BlbmVkIG9yIGNsb3NlZFxyXG4gICAgJHNjb3BlLnN5bmNSb3dzID0gZnVuY3Rpb24gKG9wZW4sIGZvcmNlKSB7XHJcbiAgICAgICAgaWYob3BlbiAmJiAkc2NvcGUuZ3REaXNwbGF5RGF0YSl7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7aSA8ICRzY29wZS5ndERpc3BsYXlEYXRhLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5ndEV4cGFuZC5yb3dzLmluZGV4T2YoaSkgPT09IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnJGd0LW9wZW4tcm93OicraSwgZm9yY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCckJHJlYmluZDo6Z3RSZWZyZXNoJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuZ3REaXNwbGF5RGF0YSkge1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwO2kgPCAkc2NvcGUuZ3RSb3dzOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLmd0RXhwYW5kLnJvd3MuaW5kZXhPZihpKSAhPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCckZ3QtY2xvc2Utcm93OicraSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJyQkcmViaW5kOjpndFJlZnJlc2gnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJlbW92ZSBiaW5kaW5ncyBhbmQgb2xkIHdhdGNoZXJzXHJcbiAgICAkc2NvcGUucmVtb3ZlQmluZGluZyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygkc2NvcGUuZ3REaXNwbGF5RGF0YSwkc2NvcGUuYmluZGluZ3MpO1xyXG4gICAgICAgIHZhciBhY3RpdmVJdGVtcyA9ICRmaWx0ZXIoJ21hcCcpKCRzY29wZS5ndERpc3BsYXlEYXRhLCckJGhhc2hLZXknKTtcclxuICAgICAgICAvLyBpZiB3ZSBoYXZlIGFjdGl2ZSBiaW5kaW5ncyB0aGF0IHdlIG5lZWQgdG8gcmVtb3ZlLi4uXHJcbiAgICAgICAgaWYoJHNjb3BlLmJpbmRpbmdzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICRzY29wZS5iaW5kaW5ncy5sZW5ndGg7aSsrKXtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBpdGVtIGlzIHBhcnQgb2YgYWN0aXZlIHZpZXcuLi5cclxuICAgICAgICAgICAgICAgIGlmKGFjdGl2ZUl0ZW1zICYmIGFjdGl2ZUl0ZW1zLmluZGV4T2YoJHNjb3BlLmJpbmRpbmdzW2ldLiQkaGFzaEtleSkgPT09IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyAuLi5yZW1vdmUgc2NvcGUgYW5kIGFjdGl2ZSB3YXRjaGVycyBpZiBub3RcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmluZGluZ3NbaV0uc2NvcGUuJGRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vIGV4dGVuZCBmaWVsZCBkZWZpbml0aW9uc1xyXG4gICAgdmFyIGV4dGVuZEZpZWxkRGVmaW5pdGlvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAkZmlsdGVyKCdtYXAnKSgkc2NvcGUuZ3RTZXR0aW5ncyxmdW5jdGlvbihzZXR0aW5nKXtcclxuICAgICAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0RmllbGRzLHtvYmplY3RLZXk6c2V0dGluZy5vYmplY3RLZXl9LHRydWUpWzBdO1xyXG4gICAgICAgICAgICAgICAgZmllbGQuY29sdW1uT3JkZXIgPSBzZXR0aW5nLmNvbHVtbk9yZGVyOyAvLyBhZGQgY29sdW1uIG9yZGVyXHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5nLmV4cG9ydCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5leHBvcnRGaWVsZCA9IGZhbHNlOyAvLyBhZGQgZXhwb3J0IGZpZWxkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaWVsZCBkZWZpbml0aW9uIG9iamVjdCBmb3IgcHJvcGVydHk6IFwiJysgc2V0dGluZy5vYmplY3RLZXkgKydcIiBub3QgZm91bmQuJyxlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgZXh0ZW5kRmllbGREZWZpbml0aW9ucygpO1xyXG5cclxuICAgIHZhciBpbml0VGFibGUgPSBmdW5jdGlvbihpbml0RGF0YSl7XHJcbiAgICAgICAgJHNjb3BlLmd0SGFzRGF0YSA9IGZhbHNlO1xyXG4gICAgICAgIG9yaWdpbmFsRGF0YSA9IGluaXREYXRhLnNsaWNlKDApO1xyXG4gICAgICAgICRzY29wZS4kZW1pdCgnZ3Qtc3RhcnRlZC1kYXRhLXByb2Nlc3NpbmcnLCRzY29wZS5ndElkKTtcclxuICAgICAgICBtYXBLZXlzKGluaXREYXRhKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gY2hhbmdlIGRhdGEsIHRoaXMgd2UgdXBkYXRlIG9yIGRhdGEgc2V0XHJcbiAgICB2YXIgY2hhbmdlRGF0YSA9IGZ1bmN0aW9uKG5ld0RhdGEpe1xyXG4gICAgICAgICRzY29wZS5ndEhhc0RhdGEgPSBmYWxzZTtcclxuICAgICAgICBvcmlnaW5hbERhdGEgPSBuZXdEYXRhLnNsaWNlKDApO1xyXG4gICAgICAgICRzY29wZS4kZW1pdCgnZ3Qtc3RhcnRlZC1kYXRhLXByb2Nlc3NpbmcnLCRzY29wZS5ndElkKTtcclxuICAgICAgICBtYXBLZXlzKG5ld0RhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBtYXBwaW5nLCB0aGlzIGlzIHdoZXJlIHdlIG1hcCB3aGljaCBrZXlzIHNob3VsZCBiZSBwYXJ0IG9mIHRoZSB0YWJsZSBhcnJheSByb3cgb2JqZWN0XHJcbiAgICB2YXIgbWFwS2V5cyA9IGZ1bmN0aW9uIChkYXRhKXtcclxuXHJcbiAgICAgICAgLy8gZGVmaW5lIHdoaWNoIGZpZWxkcyBzaG91bGQgYmUgc2VhcmNoYWJsZVxyXG4gICAgICAgIHNlYXJjaENvbHVtbnMgPSAkZmlsdGVyKCdtYXAnKSgkZmlsdGVyKCdyZW1vdmVXaXRoJykoJHNjb3BlLmd0RmllbGRzLnNsaWNlKDApLHtzZWFyY2g6ZmFsc2V9KSwnb2JqZWN0S2V5Jyk7XHJcblxyXG4gICAgICAgIC8vIGdldCBrZXkgbmFtZXMgZnJvbSBzZXR0aW5nc1xyXG4gICAgICAgIHZhciBwcm9wZXJ0aWVzID0gJGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3MsIHtlbmFibGVkOnRydWV9LHRydWUpLCdvYmplY3RLZXknKTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIG5ldyBhcnJheSB3aXRoIG1hcHBlZCBkYXRhXHJcbiAgICAgICAgbWFwcGVkRGF0YSA9ICRmaWx0ZXIoJ21hcCcpKGRhdGEsIGZ1bmN0aW9uKHJvdyl7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7fTsgLy8gY3JlYXRlIG5ldyByb3cgb2JqZWN0XHJcblxyXG4gICAgICAgICAgICAvLyByZXRyaWV2ZSBvYmplY3QgdmFsdWVzIGZyb20gcm93IGFuZCBhZGQgdGhlbSB0byB0aGUgY29ycmVzcG9uZGluZyBrZXkgZGVmaW5lZCBieSB0aGUgdGFibGUgZmllbGRzXHJcbiAgICAgICAgICAgICRmaWx0ZXIoJ21hcCcpKHByb3BlcnRpZXMsZnVuY3Rpb24ocHJvcGVydHkpe1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgcHJvcGVydHkgZXhpc3RzIGluIGRhdGEgb2JqZWN0Li4uXHJcbiAgICAgICAgICAgICAgICBpZih0eXBlb2Ygcm93W3Byb3BlcnR5XSAhPT0gJ3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCBjb2x1bW4gdmFsdWUgZnJvbSBkYXRhIHByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqW3Byb3BlcnR5XT1yb3dbcHJvcGVydHldXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Byb3BlcnR5OiBcIicgKyBwcm9wZXJ0eSAgKyAnXCIgZG9lcyBub3QgZXhpc3QgaW4gZGF0YSBvYmplY3QsIGF0dGVtcHRpbmcgdG8gdXNlIHZhbHVlIGZ1bmN0aW9uIGluc3RlYWQgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvcGVydHkgZG9lcyBub3QgZXhpc3RzIGluIGRhdGEsIHVzZSB2YWx1ZSBmdW5jdGlvbiB0byBnZXQgdmFsdWUgZm9yIGNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZUZ1bmN0aW9uID0gJGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0RmllbGRzLCB7b2JqZWN0S2V5OnByb3BlcnR5fSx0cnVlKSwndmFsdWUnKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZUZ1bmN0aW9uICYmIGFuZ3VsYXIuaXNGdW5jdGlvbih2YWx1ZUZ1bmN0aW9uKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZSBjdXN0b20gdmFsdWUgZnVuY3Rpb24gdG8gcmV0cmlldmUgdmFsdWUgZm9yIGNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd1c2luZyB2YWx1ZSBmdW5jdGlvbiB0byBnZXQgZGF0YSBmb3Igcm93IGNvbHVtbiAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqW3Byb3BlcnR5XSA9IHZhbHVlRnVuY3Rpb24ocm93KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncHJvcGVydHk6IFwiJyArIHByb3BlcnR5ICArICdcIiBkb2VzIG5vdCBleGlzdHMgaW4gZGF0YSBvYmplY3QgYW5kIG5vIHZhbHVlIGZ1bmN0aW9uIHdhcyBkZWNsYXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFwcGx5RmlsdGVyKG1hcHBlZERhdGEpXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGludGVybmFsIGZpbHRlciwgdGhpcyBpcyB3aGVyZSB3ZSBhcHBseSBmaWx0ZXJzXHJcbiAgICB2YXIgYXBwbHlGaWx0ZXIgPSBmdW5jdGlvbiAoZGF0YSwgc2VhcmNoKSB7XHJcblxyXG4gICAgICAgIC8vIGFwcGx5IHRhYmxlIGZpbHRlcnNcclxuICAgICAgICB2YXIgZmlsdGVyZWQgPSAkZmlsdGVyKCdmaWx0ZXInKShkYXRhLnNsaWNlKDApLHRhYmxlRmlsdGVycyxmdW5jdGlvbihleHBlY3RlZCwgYWN0dWFsKXtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xO1xyXG4gICAgICAgIH0sdHJ1ZSkuc2xpY2UoMCk7XHJcblxyXG4gICAgICAgIC8vIHJldHVybiByb3dzIHdoZXJlIGNvbHVtbnMgbWF0Y2ggZW50ZXJlZCBzZWFyY2ggdGVybXNcclxuICAgICAgICBmaWx0ZXJlZERhdGEgPSAkZmlsdGVyKCdzZWFyY2hSb3cnKShmaWx0ZXJlZCxzZWFyY2hDb2x1bW5zLCBzZWFyY2gsICRzY29wZS5ndEZpZWxkcyk7XHJcbiAgICAgICAgYXBwbHlTb3J0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHNvcnQsIHRoaXMgaXMgd2hlcmUgd2Ugc29ydCB0aGUgZmlsdGVyZWQgcmVzdWx0c1xyXG4gICAgdmFyIGFwcGx5U29ydCA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgIHNvcnRlZERhdGEgPSBzb3J0aW5nICE9PSBmYWxzZSA/ICRmaWx0ZXIoJ2d0U29ydCcpKGZpbHRlcmVkRGF0YSwgc29ydGluZywkc2NvcGUuZ3RGaWVsZHMpOiBmaWx0ZXJlZERhdGE7XHJcbiAgICAgICAgYXBwbHlQYWdpbmF0aW9uKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHBhZ2luYXRpb24sIHRoaXMgaXMgd2hlcmUgd2UgZGVjaWRlIHdoaWNoIHN1YnNldCBvZiB0aGUgZGF0YSB0byBzaG93XHJcbiAgICB2YXIgYXBwbHlQYWdpbmF0aW9uID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgJHNjb3BlLnBhZ2VzID0gJGZpbHRlcignY2h1bmtCeScpKHNvcnRlZERhdGEsIHBhcnNlSW50KCRzY29wZS5ndFJvd3MpKTtcclxuICAgICAgICAkc2NvcGUuY3VycmVudFBhZ2UgPSAwO1xyXG4gICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LXN0YXJ0ZWQtcmVuZGVyaW5nJyk7XHJcbiAgICAgICAgJHNjb3BlLmd0RGlzcGxheURhdGEgPSAkc2NvcGUucGFnZXNbJHNjb3BlLmN1cnJlbnRQYWdlXTtcclxuICAgICAgICBwYWdpbmF0aW9uKCRzY29wZS5wYWdlcy5sZW5ndGgsJHNjb3BlLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LWZpbmlzaGVkLWRhdGEtcHJvY2Vzc2luZycsJHNjb3BlLmd0SWQpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ3RIYXNEYXRhID0gdHJ1ZTtcclxuICAgICAgICB9LDIwMCk7XHJcbiAgICAgICAgLy8kc2NvcGUuJGVtaXQoJ2d0LWZpbmlzaGVkLXJlbmRlcmluZycpO1xyXG4gICAgICAgIC8qaWYoJHNjb3BlLmxvYWRpbmcpe1xyXG4gICAgICAgICBjb25zb2xlLmxvZygnc3RpbGwgbG9vYWRpbmcnKTtcclxuICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1maW5pc2hlZC1yZW5kZXJpbmcnKTtcclxuICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgfSovXHJcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJyQkcmViaW5kOjpndFJlZnJlc2gnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbGlzdGVuIGZvciB1cGRhdGUgdGFibGUgZXZlbnRzXHJcbiAgICAkc2NvcGUuJG9uKCdndC11cGRhdGUtdGFibGU6Jyskc2NvcGUuZ3RJZCxmdW5jdGlvbihldmVudCxhcmcpe1xyXG4gICAgICAgIGNoYW5nZURhdGEoYXJnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGxpc3RlbiBmb3Igc2VhcmNoIGV2ZW50c1xyXG4gICAgJHNjb3BlLiRvbignZ3Qtc2VhcmNoLXRhYmxlOicrJHNjb3BlLmd0SWQsZnVuY3Rpb24oZXZlbnQsYXJnKXtcclxuICAgICAgICBzZWFyY2hUZXJtcyA9IGFyZztcclxuICAgICAgICBhcHBseUZpbHRlcihtYXBwZWREYXRhLnNsaWNlKDApLGFyZyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBsaXN0ZW4gZm9yIGZpbHRlciBldmVudHNcclxuICAgICRzY29wZS4kb24oJ2d0LWZpbHRlci10YWJsZTonKyRzY29wZS5ndElkLGZ1bmN0aW9uKGV2ZW50LGFyZyl7XHJcbiAgICAgICAgdGFibGVGaWx0ZXJzID0gYXJnO1xyXG4gICAgICAgIGFwcGx5RmlsdGVyKG1hcHBlZERhdGEuc2xpY2UoMCksc2VhcmNoVGVybXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLiRvbignZ3Qtb3Blbi1hbGwtcm93czonKyRzY29wZS5ndElkLGZ1bmN0aW9uKGV2ZW50LGFyZyl7XHJcbiAgICAgICAgJHNjb3BlLnN5bmNSb3dzKHRydWUsIHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJHNjb3BlLiRvbignZ3QtY2xvc2UtYWxsLXJvd3M6Jyskc2NvcGUuZ3RJZCxmdW5jdGlvbihldmVudCxhcmcpe1xyXG4gICAgICAgICRzY29wZS5zeW5jUm93cyhmYWxzZSk7IC8vIGNsb3NlIG9wZW4gcm93c1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gbGlzdGVuIGZvciB1cGRhdGUgdGFibGUgZXZlbnRzXHJcbiAgICAkc2NvcGUuJG9uKCdndC11cGRhdGUtc3RydWN0dXJlOicrJHNjb3BlLmd0SWQsZnVuY3Rpb24oZXZlbnQsYXJnKXtcclxuICAgICAgICAkc2NvcGUuZ3RGaWVsZHMgPSBhcmcuZmllbGRzO1xyXG4gICAgICAgICRzY29wZS5ndFNldHRpbmdzID0gYXJnLnNldHRpbmdzO1xyXG4gICAgICAgIGV4dGVuZEZpZWxkRGVmaW5pdGlvbnMoKTtcclxuICAgICAgICBzZWFyY2hDb2x1bW5zID0gJGZpbHRlcignbWFwJykoJGZpbHRlcigncmVtb3ZlV2l0aCcpKCRzY29wZS5ndEZpZWxkcy5zbGljZSgwKSx7c2VhcmNoOmZhbHNlfSksJ29iamVjdEtleScpO1xyXG5cclxuICAgICAgICAvLyBpZiBubyBzb3J0aW5nIGlzIGFwcGxpZWQgb3IgaWYgc29ydGluZyBpcyBmb3JjZWQuLi5cclxuICAgICAgICBpZihzb3J0aW5nID09PSBmYWxzZSB8fCBhcmcuZm9yY2VTb3J0aW5nID09PSB0cnVlKSB7XHJcblxyXG4gICAgICAgICAgICAvLyAuLi5zZXQgc29ydGluZyBvcmRlclxyXG4gICAgICAgICAgICBzb3J0aW5nID0gJGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3Mse3NvcnQ6XCJhc2MgZGVzY1wifSxmdW5jdGlvbihleHBlY3RlZCwgYWN0dWFsKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhY3R1YWwuaW5kZXhPZihleHBlY3RlZCkgPiAtMTtcclxuICAgICAgICAgICAgfSksZnVuY3Rpb24oc29ydCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNvcnQuc29ydCA9PT0gJ2Rlc2MnID8gJy0nOicnKSArIHNvcnQub2JqZWN0S2V5XHJcbiAgICAgICAgICAgIH0pOyAvLyByZXR1cm5zIGFycmF5IGNvbnRhaW5pbmcgc29ydGluZyBjcml0ZXJpYVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IHNvcnRpbmcgc2V0dGluZyAnYXNjJyBhbmQgJ2Rlc2MnIHRvICdlbmFibGUnXHJcbiAgICAgICAgICAgICRmaWx0ZXIoJ21hcCcpKCRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndFNldHRpbmdzLHtzb3J0OlwiYXNjIGRlc2NcIn0sZnVuY3Rpb24oZXhwZWN0ZWQsIGFjdHVhbCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0dWFsLmluZGV4T2YoZXhwZWN0ZWQpID4gLTE7XHJcbiAgICAgICAgICAgIH0pLGZ1bmN0aW9uKHNldHRpbmcpe1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZy5zb3J0ID0gJ2VuYWJsZSc7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gdXBkYXRlIHNldHRpbmdzIHRvIG1hdGNoIHNvcnRpbmcgaW4gdGFibGVcclxuICAgICAgICAgICAgJGZpbHRlcignbWFwJykoc29ydGluZyxmdW5jdGlvbihzb3J0UHJvcGVydHkpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvcnQgPSBzb3J0UHJvcGVydHkuaW5kZXhPZignLScpID09PSAtMSA/ICdhc2MnOidkZXNjJztcclxuICAgICAgICAgICAgICAgIHNvcnRQcm9wZXJ0eSA9IHNvcnRQcm9wZXJ0eS5yZXBsYWNlKCctJywnJyk7XHJcbiAgICAgICAgICAgICAgICAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZ3RTZXR0aW5ncywgeydvYmplY3RLZXknOnNvcnRQcm9wZXJ0eX0sdHJ1ZSlbMF0uc29ydCA9IHNvcnQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gbGlzdGVuIGZvciBwYWdpbmF0aW9uIGxlbmd0aCBjaGFuZ2VcclxuICAgICRzY29wZS4kb24oJ2d0LXBhZ2luYXRlLXRhYmxlOicrJHNjb3BlLmd0SWQsZnVuY3Rpb24oZXZlbnQsYXJnKXtcclxuICAgICAgICAkc2NvcGUuZ3RSb3dzID0gcGFyc2VJbnQoYXJnKTtcclxuICAgICAgICBhcHBseVBhZ2luYXRpb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGxpc3RlbiBmb3IgZXhwb3J0IGV2ZW50XHJcbiAgICAkc2NvcGUuJG9uKCdndC1leHBvcnQtY3N2OicrJHNjb3BlLmd0SWQsZnVuY3Rpb24oZXZlbnQsYXJnKXtcclxuICAgICAgICBndEV4cG9ydChhcmcpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vIGNyZWF0ZSBwYWdpbmF0aW9uXHJcbiAgICB2YXIgcGFnaW5hdGlvbiA9IGZ1bmN0aW9uKHRvdGFsUGFnZXMsIGN1cnJlbnRQYWdlKXtcclxuICAgICAgICAkc2NvcGUuc3luY1Jvd3MoZmFsc2UpOyAvLyBjbG9zZSBvcGVuIHJvd3NcclxuICAgICAgICAkc2NvcGUucmVtb3ZlQmluZGluZygpOyAvLyByZW1vdmUgb2xkIGJpbmRpbmdzXHJcblxyXG4gICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gW107XHJcblxyXG4gICAgICAgIC8vIGlmIHRvdGFsIHBhZ2VzIGVxdWFscyAwIGllLiBubyBkYXRhIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmKHRvdGFsUGFnZXMgPT09IDAgKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS4kZW1pdCgnZ3QtdGFibGUtZmlsdGVyZWQnLCB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbDptYXBwZWREYXRhLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGZpbHRlcmVkOjAsXHJcbiAgICAgICAgICAgICAgICBzaG93aW5nRnJvbTowLFxyXG4gICAgICAgICAgICAgICAgc2hvd2luZ1RvOjAsXHJcbiAgICAgICAgICAgICAgICBwYWdlTGVuZ3RoOiRzY29wZS5ndFJvd3MsXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTowLFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZQYWdlczowXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiBsZXNzIHRoYW4gdHdvIHBhZ2VzXHJcbiAgICAgICAgaWYodG90YWxQYWdlcyA8IDIpe1xyXG4gICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbiA9IFswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbGVzcyB0aGFuIHRocmVlIHBhZ2VzXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzIDwgMyl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gWzAsMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGxlc3MgdGhhbiBmb3VyIHBhZ2VzXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzIDwgNCl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gWzAsMSwyXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbGVzcyB0aGFuIGZpdmUgcGFnZXNcclxuICAgICAgICBlbHNlIGlmKHRvdGFsUGFnZXMgPCA1KXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbMCwxLDIsM107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGN1cnJlbnQgcGFnZSBpcyBvbmUgb2YgdGhlIGZvdXIgZmlyc3QgcGFnZXNcclxuICAgICAgICBlbHNlIGlmKGN1cnJlbnRQYWdlIDwgNCl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gWzAsMSwyLDMsNF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIG5leHQgdG8gbGFzdCBwYWdlXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzID4gY3VycmVudFBhZ2UrMSl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gW2N1cnJlbnRQYWdlLTEsY3VycmVudFBhZ2UsY3VycmVudFBhZ2UrMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGxhc3QgcGFnZVxyXG4gICAgICAgIGVsc2UgaWYodG90YWxQYWdlcyA9PT0gY3VycmVudFBhZ2UrMSl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gW2N1cnJlbnRQYWdlLTIsY3VycmVudFBhZ2UtMSxjdXJyZW50UGFnZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGN1cnJlbnQgcGFnZSBpcyBub3Qgb25lIG9mIHRoZSBmb3VyIGZpcnN0IHBhZ2VzXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzLTQgPiBjdXJyZW50UGFnZSl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gW2N1cnJlbnRQYWdlLTEsY3VycmVudFBhZ2UsY3VycmVudFBhZ2UrMSwgY3VycmVudFBhZ2UrMl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LXRhYmxlLWZpbHRlcmVkJywge1xyXG4gICAgICAgICAgICB0b3RhbDptYXBwZWREYXRhLmxlbmd0aCxcclxuICAgICAgICAgICAgZmlsdGVyZWQ6ZmlsdGVyZWREYXRhLmxlbmd0aCxcclxuICAgICAgICAgICAgc2hvd2luZ0Zyb206JHNjb3BlLmN1cnJlbnRQYWdlKiRzY29wZS5ndFJvd3MrKCRzY29wZS5jdXJyZW50UGFnZSA+IDEgPyAwOjEpLFxyXG4gICAgICAgICAgICBzaG93aW5nVG86JHNjb3BlLmN1cnJlbnRQYWdlKiRzY29wZS5ndFJvd3MrJHNjb3BlLmd0RGlzcGxheURhdGEubGVuZ3RoLFxyXG4gICAgICAgICAgICBwYWdlTGVuZ3RoOiRzY29wZS5ndFJvd3MsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiRzY29wZS5jdXJyZW50UGFnZSxcclxuICAgICAgICAgICAgbnVtYmVyT2ZQYWdlczokc2NvcGUucGFnZXMubGVuZ3RoXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5uZXh0UGFnZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlICsrO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ3REaXNwbGF5RGF0YSA9ICRzY29wZS5wYWdlc1skc2NvcGUuY3VycmVudFBhZ2VdO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uKCRzY29wZS5wYWdlcy5sZW5ndGgsJHNjb3BlLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1zdGFydGVkLXJlbmRlcmluZycsJHNjb3BlLmd0SWQpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnJCRyZWJpbmQ6Omd0UmVmcmVzaCcpO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5wcmV2aW91c1BhZ2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UGFnZSAtLTtcclxuICAgICAgICAgICAgJHNjb3BlLmd0RGlzcGxheURhdGEgPSAkc2NvcGUucGFnZXNbJHNjb3BlLmN1cnJlbnRQYWdlXTtcclxuICAgICAgICAgICAgcGFnaW5hdGlvbigkc2NvcGUucGFnZXMubGVuZ3RoLCRzY29wZS5jdXJyZW50UGFnZSk7XHJcbiAgICAgICAgICAgICRzY29wZS4kZW1pdCgnZ3Qtc3RhcnRlZC1yZW5kZXJpbmcnLCRzY29wZS5ndElkKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJyQkcmViaW5kOjpndFJlZnJlc2gnKTtcclxuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLnNldFBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFBhZ2UgPSBwYWdlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ3REaXNwbGF5RGF0YSA9ICRzY29wZS5wYWdlc1skc2NvcGUuY3VycmVudFBhZ2VdO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uKCRzY29wZS5wYWdlcy5sZW5ndGgsJHNjb3BlLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1zdGFydGVkLXJlbmRlcmluZycsJHNjb3BlLmd0SWQpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnJCRyZWJpbmQ6Omd0UmVmcmVzaCcpO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gc29ydCBmdW5jdGlvblxyXG4gICAgJHNjb3BlLnNvcnQgPSBmdW5jdGlvbigkZXZlbnQscHJvcGVydHkpe1xyXG4gICAgICAgIHZhciBjdHJsS2V5ID0gJGV2ZW50LmN0cmxLZXkgfHwgJGV2ZW50Lm1ldGFLZXk7XHJcblxyXG4gICAgICAgIC8vIHJlc2V0IHNvcnRpbmcgdW5sZXNzIGN0cmwga2V5IG9yIG1ldGEga2V5IChtYWMpIGlzIHByZXNzZWQgd2hpbGUgc29ydGluZ1xyXG4gICAgICAgIGlmKCFjdHJsS2V5ICYmIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyAkc2NvcGUuZ3RTZXR0aW5ncy5sZW5ndGggPiBpOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmcgPSAkc2NvcGUuZ3RTZXR0aW5nc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmKHNldHRpbmcub2JqZWN0S2V5ICE9PSBwcm9wZXJ0eSAmJiBzZXR0aW5nLnNvcnQgPT09ICdhc2MnIHx8IHNldHRpbmcub2JqZWN0S2V5ICE9PSBwcm9wZXJ0eSAmJiBzZXR0aW5nLnNvcnQgPT09ICdkZXNjJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmd0U2V0dGluZ3NbaV0uc29ydCA9ICdlbmFibGUnO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvcGVydHkpe1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgJHNjb3BlLmd0U2V0dGluZ3MubGVuZ3RoID4gaTsgaSsrKXtcclxuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5nID0gJHNjb3BlLmd0U2V0dGluZ3NbaV07XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5nLm9iamVjdEtleSA9PT0gcHJvcGVydHkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ID0gc2V0dGluZy5zb3J0O1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc29ydCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Rpc2FibGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3RTZXR0aW5nc1tpXS5zb3J0ID0gJ2FzYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXNjJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ndFNldHRpbmdzW2ldLnNvcnQgPSAnZGVzYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVzYyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3RTZXR0aW5nc1tpXS5zb3J0ID0gJ2VuYWJsZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBzb3J0aW5nID0gJGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3Mse3NvcnQ6XCJhc2MgZGVzY1wifSxmdW5jdGlvbihleHBlY3RlZCwgYWN0dWFsKXtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xO1xyXG4gICAgICAgIH0pLGZ1bmN0aW9uKHNvcnQpe1xyXG4gICAgICAgICAgICByZXR1cm4gKHNvcnQuc29ydCA9PT0gJ2Rlc2MnID8gJy0nOicnKSArIHNvcnQub2JqZWN0S2V5O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhcHBseVNvcnQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gaWYgdGFibGUgaGFzIGRhdGEgdXBvbiBpbml0aWFsaXphdGlvbi4uLlxyXG4gICAgaWYoJHNjb3BlLmd0RGF0YSl7XHJcbiAgICAgICAgaW5pdFRhYmxlKCRzY29wZS5ndERhdGEpOyAvLyBpbml0aWFsaXplIHRhYmxlIHdpdGggZGF0YSBwYXNzZWQgdG8gZGlyZWN0aXZlXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZXhwb3J0IGZ1bmN0aW9uXHJcbiAgICB2YXIgZ3RFeHBvcnQgPSBmdW5jdGlvbihvcHRpb25zKXtcclxuICAgICAgICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnPyB7fTpvcHRpb25zO1xyXG5cclxuICAgICAgICB2YXIgZmlsZU5hbWUgPSB0eXBlb2Ygb3B0aW9ucy5maWxlTmFtZSA9PT0gJ3VuZGVmaW5lZCcgPyAnZXhwb3J0JzpvcHRpb25zLmZpbGVOYW1lO1xyXG5cclxuICAgICAgICAvLyBmaXggZXhwb3J0IGRhdGFcclxuICAgICAgICB2YXIgZXhwb3J0RGF0YSA9IEpTT04ucGFyc2UoYW5ndWxhci50b0pzb24oc29ydGVkRGF0YS5zbGljZSgwKSkpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwb3J0RGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBleHBvcnREYXRhW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcm93KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocm93Lmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRTZXR0aW5nID0gJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0RmllbGRzLCB7b2JqZWN0S2V5OiBrZXl9LCB0cnVlKVswXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVTZXR0aW5nID0gJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3MsIHtvYmplY3RLZXk6IGtleX0sIHRydWUpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhwb3J0TWV0aG9kID0gZmllbGRTZXR0aW5nLmV4cG9ydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgZXhwb3J0IG1ldGhvZCBpcyBkZWNsYXJlZCBhbmQgaXMgYSBmdW5jdGlvbi4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRNZXRob2QgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKGV4cG9ydE1ldGhvZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi4ucmVwbGFjZSBleHBvcnQgZGF0YSByb3cgdmFsdWUgd2l0aCB2YWx1ZSByZXR1cm5lZCBieSBmdW5jdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhwb3J0VmFsdWUgPSBleHBvcnRNZXRob2Qocm93LCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dba2V5XSA9IGZpZWxkU2V0dGluZy5leHBvcnRFc2NhcGVTdHJpbmcgPT09IGZhbHNlID8gZXhwb3J0VmFsdWUgOiAkZmlsdGVyKCdlc2NhcGVDc3ZTdHJpbmcnKShleHBvcnRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93W2tleV0gPSBmaWVsZFNldHRpbmcuZXhwb3J0RXNjYXBlU3RyaW5nID09PSBmYWxzZSA/IHJvd1trZXldIDogJGZpbHRlcignZXNjYXBlQ3N2U3RyaW5nJykocm93W2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgZXhwb3J0Q29sdW1ucyBhcmUgcGFzc2VkIHdpdGggb3B0aW9ucy4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5leHBvcnRDb2x1bW5zICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5zZXQgdmFsdWUgdG8gbnVsbCBpLmUuIGRvbid0IGV4cG9ydCBjb2x1bW4gaWYgaXQncyBub3QgaW4gdGhlIGV4cG9ydENvbHVtbnMgYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZXhwb3J0Q29sdW1ucy5pbmRleE9mKHRhYmxlU2V0dGluZy5vYmplY3RLZXkpPT09LTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93W2tleV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGV4cG9ydCBpcyBzZXQgdG8gZmFsc2UgZm9yIGZpZWxkLi4uXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHRhYmxlU2V0dGluZy5leHBvcnQgIT09ICd1bmRlZmluZWQnICYmIHRhYmxlU2V0dGluZy5leHBvcnQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLnNldCB2YWx1ZSB0byBudWxsIGkuZS4gZG9uJ3QgZXhwb3J0IGNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dba2V5XSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZWNsYXJlIGV4cG9ydCBkYXRhXHJcbiAgICAgICAgdmFyIGRhdGEgPSBleHBvcnREYXRhOy8vSlNPTi5wYXJzZShhbmd1bGFyLnRvSnNvbihzb3J0ZWREYXRhLnNsaWNlKDApKSk7XHJcblxyXG4gICAgICAgIC8vIGlmIGV4cG9ydENvbHVtbnMgYXJlIHBhc3NlZCB3aXRoIG9wdGlvbnMuLi5cclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZXhwb3J0Q29sdW1ucyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIC4uLmdldCBmaWVsZCBzZXR0aW5ncyBmb3IgYWxsIG9iamVjdEtleXMgaW4gZXhwb3J0Q29sdW1ucyBhcnJheVxyXG4gICAgICAgICAgICB2YXIgZXhwb3J0RmllbGRzID0gJGZpbHRlcignbWFwJykob3B0aW9ucy5leHBvcnRDb2x1bW5zLCBmdW5jdGlvbihvYmplY3RLZXkpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndEZpZWxkcy5zbGljZSgwKSwge29iamVjdEtleTpvYmplY3RLZXl9LCB0cnVlKVswXTtcclxuICAgICAgICAgICAgfSApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBlbHNlIGV4cG9ydCBhbGwgY29sdW1ucyBleGNlcHQgY29sdW1ucyBub3QgbWFya2VkIGZvciBleHBvcnQgaS5lLiBoYXMgZmllbGQgc2V0dGluZyBleHBvcnQ6ZmFsc2UgKGFkZGVkIHRvIGd0RmllbGRcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGV4cG9ydEZpZWxkcyA9ICRmaWx0ZXIoJ29yZGVyQnknKSgkZmlsdGVyKCdyZW1vdmVXaXRoJykoJHNjb3BlLmd0RmllbGRzLHtleHBvcnRGaWVsZDpmYWxzZX0pLFwiY29sdW1uT3JkZXJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaGVhZGVycyA9IHtcclxuICAgICAgICAgICAgZmllbGRTZXA6IHR5cGVvZiBvcHRpb25zLmZpZWxkU2VwID09PSAndW5kZWZpbmVkJyA/IFwiO1wiOm9wdGlvbnMuZmllbGRTZXAsXHJcbiAgICAgICAgICAgIGhlYWRlcjogJGZpbHRlcignbWFwJykoZXhwb3J0RmllbGRzLFwibmFtZVwiKSwgLy8gZ2V0IGhlYWRlcnMgYnkgY29sdW1uIG9yZGVyXHJcbiAgICAgICAgICAgIHR4dERlbGltOiB0eXBlb2Ygb3B0aW9ucy50eHREZWxpbSA9PT0gJ3VuZGVmaW5lZCcgPyAnXCInOm9wdGlvbnMudHh0RGVsaW0sXHJcbiAgICAgICAgICAgIGNvbHVtbk9yZGVyOiRmaWx0ZXIoJ21hcCcpKGV4cG9ydEZpZWxkcyxcIm9iamVjdEtleVwiKSwgLy8gZ2V0IGNvbHVtbiBvcmRlclxyXG4gICAgICAgICAgICBkZWNpbWFsU2VwOnR5cGVvZiBvcHRpb25zLmRlY2ltYWxTZXAgPT09ICd1bmRlZmluZWQnID8gJywnOm9wdGlvbnMuZGVjaW1hbFNlcCxcclxuICAgICAgICAgICAgYWRkQnl0ZU9yZGVyTWFya2VyOnR5cGVvZiBvcHRpb25zLmFkZEJvbSA9PT0gJ3VuZGVmaW5lZCcsXHJcbiAgICAgICAgICAgIGNoYXJzZXQ6dHlwZW9mIG9wdGlvbnMuY2hhcnNldCA9PT0gJ3VuZGVmaW5lZCcgPyAndXRmLTgnOm9wdGlvbnMuY2hhcnNldCxcclxuICAgICAgICAgICAgcXVvdGVTdHJpbmdzOiB0eXBlb2Ygb3B0aW9ucy5xdW90ZVN0cmluZ3MgPT09ICd1bmRlZmluZWQnID8gZmFsc2UgOiBvcHRpb25zLnF1b3RlU3RyaW5nc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIENTVi5zdHJpbmdpZnkoZGF0YSwgaGVhZGVycykudGhlbihmdW5jdGlvbihyZXN1bHQpe1xyXG5cclxuICAgICAgICAgICAgdmFyIGJsb2I7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKSB7XHJcbiAgICAgICAgICAgICAgICBibG9iID0gbmV3IEJsb2IoW3Jlc3VsdF0sIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQvY3N2O2NoYXJzZXQ9dXRmLTg7XCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYiwgJ2V4cG9ydC5jc3YnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgbm90IGEgZnVsbHkgd29ya2luZyBzb2x1dGlvbiwgc29tZSB0YWdzICh0ZXggPEJPRFk+KSBzaG93IHVwIGluIGV4Y2VsIHRvZ2V0aGVyIHdpdGggdGhlIGNvcnJlY3QgZGF0YS5cclxuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYWRkZWQgYW4gYWxlcnQgbWVzc2FnZSB0byB1cmdlIHVzZXJzIHRvIHVzZSBhbm90aGVyIGJyb3dzZXIgb3IgdXBkYXRlIHRoZWlyIGJyb3dzZXIgZm9yIGEgYmV0dGVyIGxvb2tpbmcgZXhwb3J0LlxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWxlcnQoXCJZb3UncmUgdXNpbmcgYW4gb2xkIHZlcnNpb24gb2YgSW50ZXJuZXQgRXhwbG9yZXIgYW5kIHRoZSBleHBvcnQgbWlnaHQgdGhlcmVmb3JlIGhhdmUgdGhlIHdyb25nIGZvcm1hdCwgcGxlYXNlIHVwZGF0ZSB5b3VyIGJyb3dzZXIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWUgPSBhbmd1bGFyLmVsZW1lbnQoJzxpZnJhbWU+PC9pZnJhbWU+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWZyYW1lWzBdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCgnYm9keScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKGlmcmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvYyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlmcmFtZVswXS5jb250ZW50RG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jID0gaWZyYW1lWzBdLmNvbnRlbnREb2N1bWVudDtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZiAoaWZyYW1lWzBdLmNvbnRlbnRXaW5kb3cpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSBpZnJhbWVbMF0uY29udGVudFdpbmRvdy5kb2N1bWVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jLm9wZW4oXCJ0ZXh0L3BsYWluXCIsIFwicmVwbGFjZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBkb2Mud3JpdGUoW3Jlc3VsdF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvYy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaWZyYW1lLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jLmV4ZWNDb21tYW5kKCdTYXZlQXMnLCB0cnVlLCBmaWxlTmFtZSsnLmNzdicpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFtyZXN1bHRdLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dC9jc3Y7Y2hhcnNldD11dGYtODtcIlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZExpbmsgPSBhbmd1bGFyLmVsZW1lbnQoJzxhPjwvYT4nKTtcclxuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsuYXR0cignaHJlZicsIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcclxuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsuYXR0cignZG93bmxvYWQnLGZpbGVOYW1lKycuY3N2Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFwcGVuZCBkb3dubG9hZCBsaW5rIHRvIGJvZHkgYW5kIGNsaWNrIGl0LCBvbmNlIGNsaWNrZWQgcmVtb3ZlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50LmZpbmQoJ2JvZHknKS5hcHBlbmQoZG93bmxvYWRMaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rWzBdLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluay5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG59KS5kaXJlY3RpdmUoJ2d0Um93JywgZnVuY3Rpb24oJGNvbXBpbGUsICRmaWx0ZXIpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICBzY29wZTpmYWxzZSxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGZuKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2x1bW5zID0gJGZpbHRlcignZmlsdGVyJykoc2NvcGUuZ3RTZXR0aW5ncyx7J3Zpc2libGUnOnRydWV9LHRydWUpLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGFkZFJvdyA9IGZ1bmN0aW9uKG9wZW5BbGwpe1xyXG4gICAgICAgICAgICAgICAgIXNjb3BlLmd0RXhwYW5kLm11bHRpcGxlICYmICFvcGVuQWxsID8gc2NvcGUuc3luY1Jvd3MoZmFsc2UpOicnO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1Njb3BlID0gc2NvcGUuJG5ldygpOyAvLyBjcmVhdGUgbmV3IHNjb3BlIGZvciByb3dcclxuICAgICAgICAgICAgICAgIHZhciByb3cgPSAkY29tcGlsZSgnPHRyIGNsYXNzPVwiZXhwYW5kZWQtcm93XCI+PHRkIGNvbHNwYW49XCInK2NvbHVtbnMrJ1wiPicrc2NvcGUuZ3RFeHBhbmQuZGlyZWN0aXZlKyc8L3RkPjwvdHI+JykobmV3U2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5hZnRlcihyb3cpOyAvLyBhZGQgZWxlbWVudCB0byB2aWV3XHJcbiAgICAgICAgICAgICAgICBzY29wZS5yb3cuaXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLmd0RXhwYW5kLnJvd3MucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVSb3cgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgLy9zY29wZS4kJHdhdGNoZXJzID0gbnVsbDsgLy8gcmVtb3ZlIHdhdGNoZXNcclxuICAgICAgICAgICAgICAgIHNjb3BlLnJvdy5pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNjb3BlLmd0RXhwYW5kLnJvd3Muc3BsaWNlKHNjb3BlLmd0RXhwYW5kLnJvd3MuaW5kZXhPZihpbmRleCksMSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm5leHQoKS5zY29wZSgpLiRkZXN0cm95KCk7IC8vIGRlc3Ryb3kgc2NvcGUgYW5kIHJlbW92ZSB3YXRjaGVyc1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0KCkucmVtb3ZlKCk7IC8vIHJlbW92ZSBlbGVtZW50IGZyb20gdmlld1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4O1xyXG4gICAgICAgICAgICBzY29wZS50b2dnbGVSb3cgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZGVkID0gc2NvcGUuZ3RFeHBhbmQucm93cy5pbmRleE9mKGluZGV4KSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICBpZighZXhwYW5kZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFJvdygpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUm93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kYnJvYWRjYXN0KCckJHJlYmluZDo6Z3RSZWZyZXNoJyk7IC8vIHVwZGF0ZSBiaW5kaW5nc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzY29wZS4kb24oJyRndC1vcGVuLXJvdzonK2luZGV4LGZ1bmN0aW9uIChldmVudCxmb3JjZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4cGFuZGVkID0gc2NvcGUuZ3RFeHBhbmQucm93cy5pbmRleE9mKGluZGV4KSAhPT0gLTE7XHJcbiAgICAgICAgICAgICAgICBpZighZXhwYW5kZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFJvdyhmb3JjZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzY29wZS4kb24oJyRndC1jbG9zZS1yb3c6JytpbmRleCxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXhwYW5kZWQgPSBzY29wZS5ndEV4cGFuZC5yb3dzLmluZGV4T2YoaW5kZXgpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgIGlmKGV4cGFuZGVkKXtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVSb3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkuZGlyZWN0aXZlKCdndEV2ZW50JywgZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBmbikge1xyXG4gICAgICAgICAgICBpZiAoc2NvcGUuJGxhc3Qpe1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ2d0LWZpbmlzaGVkLXJlbmRlcmluZycsc2NvcGUuZ3RJZCk7XHJcbiAgICAgICAgICAgICAgICAvL3Njb3BlLiRwYXJlbnQuJHBhcmVudC5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KS5kaXJlY3RpdmUoJ2d0UmVuZGVyJywgZnVuY3Rpb24oJGNvbXBpbGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICBzY29wZTp7XHJcbiAgICAgICAgICAgIHJvdzonPXJvd0RhdGEnLFxyXG4gICAgICAgICAgICBzZXR0aW5nczonPWZpZWxkU2V0dGluZ3MnLFxyXG4gICAgICAgICAgICBjb21waWxlOic9Z3RDb21waWxlJyxcclxuICAgICAgICAgICAgYWN0aXZlQmluZGluZ3M6ICc9YWN0aXZlQmluZGluZ3MnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGZuKSB7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBzY29wZS5yb3c7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBzY29wZS5zZXR0aW5ncy5vYmplY3RLZXk7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVuZGVyTWV0aG9kID0gc2NvcGUuc2V0dGluZ3MucmVuZGVyO1xyXG4gICAgICAgICAgICBpZihyZW5kZXJNZXRob2QgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKHJlbmRlck1ldGhvZCkpe1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gcmVuZGVyTWV0aG9kKHJvdywga2V5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG91dHB1dCA9IHJvd1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHNjb3BlLmNvbXBpbGUgJiYgc2NvcGUuY29tcGlsZSAhPT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgLy8gZGVjbGFyZSBlbGVtZW50IHNjb3BlXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFNjb3BlO1xyXG4gICAgICAgICAgICAgICAgaWYoc2NvcGUuY29tcGlsZSAhPT0gdHJ1ZSAmJiBzY29wZS5jb21waWxlLiR3YXRjaCl7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFNjb3BlID0gc2NvcGUuY29tcGlsZS4kbmV3KCk7IC8vIGNyZWF0ZSBuZXcgc2NvcGUgZm9yIHJlbmRlcmVkIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzY29wZS5yb3cuJCRoYXNoS2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5hY3RpdmVCaW5kaW5ncy5wdXNoKHskJGhhc2hLZXk6c2NvcGUucm93LiQkaGFzaEtleSxzY29wZTplbGVtZW50U2NvcGV9KTsgLy8gYWRkIHNjb3BlIHRvIGFjdGl2ZSBiaW5kaW5ncyB3aGljaCB3ZSB1c2UgdG8gY2xlYXIvcmVtb3ZlIG9ic29sZXRlIHNjb3Blcy93YXRjaGVzXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRTY29wZSA9IHNjb3BlLiRwYXJlbnQuJG5ldygpOyAvLyBjcmVhdGUgbmV3IHNjb3BlIGZvciByZW5kZXJlZCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gJGNvbXBpbGUob3V0cHV0KShlbGVtZW50U2NvcGUpOyAvLyBjb21waWxlXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChvdXRwdXQpOyAvLyBhZGQgaHRtbFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudFswXS5pbm5lckhUTUwgPSBvdXRwdXQ7IC8vIGFkZCBodG1sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KS5maWx0ZXIoJ2dldFByb3BlcnR5JyxmdW5jdGlvbigkZmlsdGVyKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihzZXR0aW5ncywga2V5LHByb3BlcnR5KXtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGtleSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICRmaWx0ZXIoJ2ZpbHRlcicpKHNldHRpbmdzLHtvYmplY3RLZXk6a2V5fSx0cnVlKVswXVtwcm9wZXJ0eV07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nhbm5vdCByZWFkIHByb3BlcnR5OiBcIicgKyBwcm9wZXJ0eSArICdcIiBvbiBtaXNzaW5nIGtleTogXCInICsga2V5ICsgJ1wiIGluIHNldHRpbmdzLicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxufSkuZmlsdGVyKCdzZWFyY2hSb3cnLGZ1bmN0aW9uKCRmaWx0ZXIsJGludGVycG9sYXRlKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSxmaWVsZHMsc2VhcmNoVGVybXMsZmllbGRzU2V0dGluZ3Mpe1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coYXJyYXksZmllbGRzLGZpZWxkc1NldHRpbmdzKTtcclxuICAgICAgICB2YXIgc2VhcmNoID0ge307XHJcbiAgICAgICAgZm9yKHZhciBrID0gMDsgayA8IGZpZWxkc1NldHRpbmdzLmxlbmd0aDtrKyspe1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFycmF5W2tdKTtcclxuICAgICAgICAgICAgdmFyIGZpZWxkU2V0dGluZyA9IGZpZWxkc1NldHRpbmdzW2tdO1xyXG4gICAgICAgICAgICBpZihmaWVsZFNldHRpbmcuc2VhcmNoICYmIGFuZ3VsYXIuaXNGdW5jdGlvbihmaWVsZFNldHRpbmcuc2VhcmNoKSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqZWN0S2V5ID0gZmllbGRTZXR0aW5nLm9iamVjdEtleTtcclxuICAgICAgICAgICAgICAgIHNlYXJjaFtvYmplY3RLZXldID0gZmllbGRTZXR0aW5nLnNlYXJjaDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoIXNlYXJjaFRlcm1zIHx8IHNlYXJjaFRlcm1zLnJlcGxhY2UoL1wiL2csXCJcIikubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmlsdGVyZWRBcnJheSA9IFtdO1xyXG4gICAgICAgIHNlYXJjaFRlcm1zID0gdHlwZW9mIHNlYXJjaFRlcm1zID09PSAndW5kZWZpbmVkJyA/ICcnOnNlYXJjaFRlcm1zO1xyXG4gICAgICAgIHZhciBzZWFyY2hUZXJtc0FycmF5ID0gc2VhcmNoVGVybXMudG9Mb3dlckNhc2UoKS5tYXRjaCgvXCJbXlwiXStcInxbXFx3XSsvZyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICB2YXIgcm93ID0gYXJyYXlbaV07XHJcbiAgICAgICAgICAgIHZhciBzdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgdmFyIGogPSAwO1xyXG4gICAgICAgICAgICAkZmlsdGVyKCdtYXAnKShmaWVsZHMsZnVuY3Rpb24oZmllbGQpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlcGFyYXRvciA9IGogPT09IDAgPyAnJzonICYgJztcclxuICAgICAgICAgICAgICAgIHN0cmluZyArPSBzZWFyY2hbZmllbGRdID8gc2VwYXJhdG9yK3NlYXJjaFtmaWVsZF0ocm93LGZpZWxkKTpzZXBhcmF0b3Ircm93W2ZpZWxkXTtcclxuICAgICAgICAgICAgICAgIGorKztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHN0cmluZyA9IHN0cmluZy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHNlYXJjaFRlcm1zQXJyYXkubGVuZ3RoO2srKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVybSA9IHNlYXJjaFRlcm1zQXJyYXlba10ucmVwbGFjZSgvXCIvZywnJyk7XHJcbiAgICAgICAgICAgICAgICBtYXRjaCA9IHN0cmluZy5pbmRleE9mKHRlcm0pICE9PSAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZighbWF0Y2gpe1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIG1hdGNoXHJcbiAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gbWF0Y2g7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKG1hdGNoKXtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3B1c2gnLHJvdyk7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJlZEFycmF5LnB1c2gocm93KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmaWx0ZXJlZEFycmF5O1xyXG4gICAgfVxyXG59KS5maWx0ZXIoJ2NhbWVsVG9EYXNoJyxmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZyl7dHJ5e1xyXG4gICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSggLyhbYS16XSkoW0EtWl0pL2csICckMS0kMicgKS50b0xvd2VyQ2FzZSgpfSBjYXRjaChlcnJvcil7Y29uc29sZS5sb2coJ25vdGhpbmcgdG8gcmVwbGFjZTonLCBlcnJvcil9O1xyXG4gICAgfVxyXG59KS5maWx0ZXIoJ2d0U29ydCcsZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJvcGVydHlBcnJheSxmaWVsZHMpe1xyXG4gICAgICAgIHZhciBjdXN0b21Tb3J0ID0ge307IC8vIHN0b3JlIGN1c3RvbSBzb3J0IGZ1bmN0aW9uXHJcblxyXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBmaWVsZHMuLi5cclxuICAgICAgICBmb3IodmFyIGkgPSAwO2kgPCBmaWVsZHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICB2YXIgZmllbGQgPSBmaWVsZHNbaV07XHJcblxyXG4gICAgICAgICAgICAvLyAuLi5hbmQgaWYgZmllbGQgaGFzIGN1c3RvbSBzb3J0IGZ1bmN0aW9uLi4uXHJcbiAgICAgICAgICAgIGlmKGZpZWxkLnNvcnQgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKGZpZWxkLnNvcnQpKXtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyAuLi5zdG9yZSBjdXN0b20gc29ydCBmdW5jdGlvbiBpbiBjdXN0b20gc29ydCBvYmplY3RcclxuICAgICAgICAgICAgICAgIGN1c3RvbVNvcnRbZmllbGQub2JqZWN0S2V5XSA9IGZpZWxkLnNvcnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGR5bmFtaWNTb3J0KHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIHZhciBzb3J0T3JkZXIgPSAxO1xyXG4gICAgICAgICAgICBpZihwcm9wZXJ0eVswXSA9PT0gXCItXCIpIHtcclxuICAgICAgICAgICAgICAgIHNvcnRPcmRlciA9IC0xO1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHkgPSBwcm9wZXJ0eS5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTEgPSBhW3Byb3BlcnR5XSA9PT0gbnVsbCA/ICcnOmN1c3RvbVNvcnRbcHJvcGVydHldID8gY3VzdG9tU29ydFtwcm9wZXJ0eV0oYSxwcm9wZXJ0eSk6YVtwcm9wZXJ0eV07IC8vIHNldCB2YWx1ZSB0byBlbXB0eSBzdHJpbmcgaWYgbnVsbCBhbmQgdXNlIGN1c3RvbSBzb3J0IGZ1bmN0aW9uIGlmIG9uZSBpcyBwcm92aWRlZFxyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlMiA9IGJbcHJvcGVydHldID09PSBudWxsID8gJyc6Y3VzdG9tU29ydFtwcm9wZXJ0eV0gPyBjdXN0b21Tb3J0W3Byb3BlcnR5XShiLHByb3BlcnR5KTpiW3Byb3BlcnR5XTsgLy8gc2V0IHZhbHVlIHRvIGVtcHR5IHN0cmluZyBpZiBudWxsIGFuZCB1c2UgY3VzdG9tIHNvcnQgZnVuY3Rpb24gaWYgb25lIGlzIHByb3ZpZGVkXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gKHZhbHVlMSA8IHZhbHVlMikgPyAtMSA6ICh2YWx1ZTEgPiB2YWx1ZTIpID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICogc29ydE9yZGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGR5bmFtaWNTb3J0TXVsdGlwbGUocHJvcGVydHlBcnJheSkge1xyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgKiBzYXZlIHRoZSBhcmd1bWVudHMgb2JqZWN0IGFzIGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW5cclxuICAgICAgICAgICAgICogbm90ZSB0aGF0IGFyZ3VtZW50cyBvYmplY3QgaXMgYW4gYXJyYXktbGlrZSBvYmplY3RcclxuICAgICAgICAgICAgICogY29uc2lzdGluZyBvZiB0aGUgbmFtZXMgb2YgdGhlIHByb3BlcnRpZXMgdG8gc29ydCBieVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdmFyIHByb3BzID0gcHJvcGVydHlBcnJheTsgLy9hcmd1bWVudHM7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAob2JqMSwgb2JqMikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwLCByZXN1bHQgPSAwLCBudW1iZXJPZlByb3BlcnRpZXMgPSBwcm9wcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAvKiB0cnkgZ2V0dGluZyBhIGRpZmZlcmVudCByZXN1bHQgZnJvbSAwIChlcXVhbClcclxuICAgICAgICAgICAgICAgICAqIGFzIGxvbmcgYXMgd2UgaGF2ZSBleHRyYSBwcm9wZXJ0aWVzIHRvIGNvbXBhcmVcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgd2hpbGUocmVzdWx0ID09PSAwICYmIGkgPCBudW1iZXJPZlByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkeW5hbWljU29ydChwcm9wc1tpXSkob2JqMSwgb2JqMik7XHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXkuc29ydChkeW5hbWljU29ydE11bHRpcGxlKHByb3BlcnR5QXJyYXkpKTtcclxuICAgIH1cclxufSkuZmlsdGVyKCdlc2NhcGVDc3ZTdHJpbmcnLCBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCl7XHJcbiAgICAgICAgcmV0dXJuIC9eKFxcPXxcXEB8XFwrLFxcLSkuKi9nLnRlc3QoaW5wdXQpID8gJ1xcJycraW5wdXQgOiBpbnB1dDtcclxuICAgIH1cclxufSk7XHJcbiIsIiFmdW5jdGlvbihlKXt0cnl7ZT1hbmd1bGFyLm1vZHVsZShcImFuZ3VsYXIuZ2VuZXJpYy50YWJsZVwiKX1jYXRjaCh0KXtlPWFuZ3VsYXIubW9kdWxlKFwiYW5ndWxhci5nZW5lcmljLnRhYmxlXCIsW10pfWUucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oZSl7ZS5wdXQoXCJnZW5lcmljLXRhYmxlL2RpcmVjdGl2ZS9nZW5lcmljLXRhYmxlL2dlbmVyaWMtdGFibGUuaHRtbFwiLCc8ZGl2IGNsYXNzPVwiZ2VuZXJpYy10YWJsZVwiPjxkaXYgY2xhc3M9XCJndC13cmFwcGVyXCI+PHRhYmxlIGNsYXNzPVwidGFibGUgdGFibGUtc29ydGFibGVcIiBuZy1pZj1cImd0SGFzRGF0YVwiIG5nLWNsYXNzPVwiOmd0UmVmcmVzaDpndENsYXNzZXNcIj48dGhlYWQ+PHRyIG5nLWNsYXNzPVwiOjpndFJvd1RyYW5zaXRpb24gPyBcXCdmYWRlLWluIGFuaW1hdGVcXCc6XFwnXFwnXCI+PHRoIG5nLXJlcGVhdD1cImZpZWxkIGluIDo6Z3RGaWVsZHMgfCBvcmRlckJ5OlxcJ2NvbHVtbk9yZGVyXFwnIHRyYWNrIGJ5IGZpZWxkLm9iamVjdEtleVwiIG5nLXNob3c9XCI6Z3RSZWZyZXNoOmd0U2V0dGluZ3MgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwndmlzaWJsZVxcJ1wiIG5nLWNsYXNzPVwiW2ZpZWxkLmNsYXNzTmFtZXMsIChmaWVsZC5vYmplY3RLZXkgfCBjYW1lbFRvRGFzaCkgKyBcXCctY29sdW1uXFwnLCBcXCdzb3J0LVxcJysoZ3RTZXR0aW5ncyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCdzb3J0XFwnKV1cIiBuZy1jbGljaz1cIjpndFJlZnJlc2g6KGd0U2V0dGluZ3MgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnc29ydFxcJykgPT09IFxcJ2VuYWJsZVxcJyA/IHNvcnQoJGV2ZW50LGZpZWxkLm9iamVjdEtleSk6KGd0U2V0dGluZ3MgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnc29ydFxcJykgPT09IFxcJ2FzY1xcJyA/IHNvcnQoJGV2ZW50LGZpZWxkLm9iamVjdEtleSk6KGd0U2V0dGluZ3MgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnc29ydFxcJykgPT09IFxcJ2Rlc2NcXCcgPyBzb3J0KCRldmVudCxmaWVsZC5vYmplY3RLZXkpOlxcJ1xcJ1wiIG5nLWJpbmQ9XCI6OmZpZWxkLm5hbWVcIj48L3RoPjwvdHI+PHRyIG5nLWlmPVwiOjpndFRvdGFsc1wiIG5nLWNsYXNzPVwiOjpndFJvd1RyYW5zaXRpb24gPyBcXCdmYWRlLWluIGFuaW1hdGVcXCc6XFwnXFwnXCI+PHRkIG5nLXJlcGVhdD1cImZpZWxkIGluIDo6Z3RGaWVsZHMgfCBvcmRlckJ5OlxcJ2NvbHVtbk9yZGVyXFwnIHRyYWNrIGJ5IGZpZWxkLm9iamVjdEtleVwiIGNsYXNzPVwidG90YWwtY29sdW1uXCIgbmctc2hvdz1cIjpndFJlZnJlc2g6Z3RTZXR0aW5ncyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCd2aXNpYmxlXFwnXCIgbmctY2xhc3M9XCI6OlsoZ3RGaWVsZHMgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnY2xhc3NOYW1lc1xcJyksIChmaWVsZC5vYmplY3RLZXkgfCBjYW1lbFRvRGFzaCkgKyBcXCctY29sdW1uXFwnXVwiIGZpZWxkLXNldHRpbmdzPVwiOjpmaWVsZFwiIGd0LXJlbmRlcj1cIlwiIGFjdGl2ZS1iaW5kaW5ncz1cIjo6YmluZGluZ3NcIiByb3ctZGF0YT1cIjo6Z3RUb3RhbHNcIiBndC1jb21waWxlPVwiOjpmaWVsZC5jb21waWxlXCI+PC90ZD48L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBndC1yb3c9XCJcIiBuZy1yZXBlYXQ9XCIocm93SW5kZXgsIHJvdykgaW4gOmd0UmVmcmVzaDpndERpc3BsYXlEYXRhIHwgbGltaXRUbzogZGlzcGxheVJvd3NcIiBndC1ldmVudD1cIlwiIG5nLWNsYXNzPVwiOmd0UmVmcmVzaDpbZ3RSb3dUcmFuc2l0aW9uID8gXFwnZmFkZS1pbiBhbmltYXRlXFwnOlxcJ1xcJyxyb3cuaXNPcGVuID8gXFwncm93LW9wZW5cXCc6XFwnXFwnLCAkaW5kZXggJSAyID09IDAgPyBcXCdyb3ctb2RkXFwnOlxcJ3Jvdy1ldmVuXFwnLCBndFJvd0luZm9bJGluZGV4XSA/IFxcJ3RydWUtY2xhc3NcXCc6XFwnZmFsc2UtY2xhc3NcXCddXCI+PHRkIG5nLXJlcGVhdD1cIihmaWVsZEluZGV4LCBmaWVsZCkgaW4gOmd0UmVmcmVzaDpndEZpZWxkcyB8IG9yZGVyQnk6XFwnY29sdW1uT3JkZXJcXCcgdHJhY2sgYnkgZmllbGQub2JqZWN0S2V5XCIgbmctc2hvdz1cIjpndFJlZnJlc2g6Z3RTZXR0aW5ncyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCd2aXNpYmxlXFwnXCIgbmctY2xhc3M9XCI6OlsoZ3RGaWVsZHMgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnY2xhc3NOYW1lc1xcJyksIChmaWVsZC5vYmplY3RLZXkgfCBjYW1lbFRvRGFzaCkgKyBcXCctY29sdW1uXFwnXVwiPjxzcGFuIGNsYXNzPVwiZ3Qtcm93LWxhYmVsXCIgbmctaWY9XCI6OihndEZpZWxkcyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCdzdGFja2VkSGVhZGluZ1xcJylcIiBuZy1iaW5kPVwiOjooZ3RGaWVsZHMgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnc3RhY2tlZEhlYWRpbmdcXCcpPT09IHRydWUgPyAoZ3RGaWVsZHMgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnbmFtZVxcJyk6KGd0RmllbGRzIHwgZ2V0UHJvcGVydHk6ZmllbGQub2JqZWN0S2V5OlxcJ3N0YWNrZWRIZWFkaW5nXFwnKVwiPjwvc3Bhbj48c3BhbiBjbGFzcz1cImd0LXJvdy1jb250ZW50XCIgbmctY2xhc3M9XCI6OmZpZWxkLmNsaWNrID8gXFwnZ3QtY2xpY2stZW5hYmxlZFxcJzpcXCdcXCdcIiBmaWVsZC1zZXR0aW5ncz1cIjo6ZmllbGRcIiBndC1yZW5kZXI9XCJcIiBhY3RpdmUtYmluZGluZ3M9XCI6OmJpbmRpbmdzXCIgcm93LWRhdGE9XCI6OnJvd1wiIGd0LWNvbXBpbGU9XCI6OmZpZWxkLmNvbXBpbGVcIiBuZy1jbGljaz1cIjpndFJlZnJlc2g6IWZpZWxkLmNsaWNrIHx8IGZpZWxkLmNsaWNrKHJvdyk7IWZpZWxkLmV4cGFuZCB8fCB0b2dnbGVSb3coZmllbGQuZXhwYW5kLChndFNldHRpbmdzIHwgZmlsdGVyOntcXCd2aXNpYmxlXFwnOnRydWV9OnRydWUpLmxlbmd0aCxyb3csZmllbGQub2JqZWN0S2V5KTtcIj48L3NwYW4+PC90ZD48L3RyPjwvdGJvZHk+PHRyIG5nLWlmPVwiOmd0UmVmcmVzaDpwYWdpbmF0aW9uID09PSBmYWxzZVwiPjx0ZCBjbGFzcz1cImd0LW5vLWRhdGFcIiBjb2xzcGFuPVwie3s6Z3RSZWZyZXNoOihndFNldHRpbmdzIHwgZmlsdGVyOntcXCd2aXNpYmxlXFwnOnRydWV9OnRydWUpLmxlbmd0aH19XCIgbmctYmluZD1cIjo6Z3RUcmFuc2xhdGlvbnMubm9EYXRhXCI+PC90ZD48L3RyPjwvdGFibGU+PC9kaXY+PGRpdiBjbGFzcz1cImd0LXBhZ2luYXRpb24gdGV4dC1jZW50ZXJcIiBuZy1pZj1cIjpndFJlZnJlc2g6Z3RQYWdpbmF0aW9uID09PSB0cnVlICYmIHBhZ2luYXRpb24gIT09IGZhbHNlXCI+PHVsIGNsYXNzPVwicGFnaW5hdGlvblwiPjxsaSBuZy1jbGFzcz1cIjpndFJlZnJlc2g6e2Rpc2FibGVkOiBjdXJyZW50UGFnZSA9PT0gMH1cIiBuZy1zaG93PVwiY3VycmVudFBhZ2UgIT09IDBcIj48YnV0dG9uIGNsYXNzPVwiYnRuLWxpbmsgbGlua1wiIG5nLWNsaWNrPVwicHJldmlvdXNQYWdlKClcIiBuZy1kaXNhYmxlZD1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UgPT09IDBcIiBuZy1iaW5kLWh0bWw9XCI6Omd0VHJhbnNsYXRpb25zLnByZXZpb3VzXCI+PC9idXR0b24+PC9saT48bGkgbmctc2hvdz1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UgPiAzXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi1saW5rIGxpbmtcIiBuZy1jbGljaz1cInNldFBhZ2UoMClcIj4xPC9idXR0b24+PHNtYWxsPiZoZWxsaXA7PC9zbWFsbD48L2xpPjxsaSBzdHlsZT1cImRpc3BsYXk6IGlubGluZTtwYWRkaW5nOiAwIDVweDtcIiBuZy1yZXBlYXQ9XCJwYWdlIGluIDpndFJlZnJlc2g6cGFnaW5hdGlvblwiIG5nLWNsYXNzPVwiOmd0UmVmcmVzaDpwYWdlID09PSBjdXJyZW50UGFnZSA/IFxcJ2FjdGl2ZVxcJzpcXCdcXCdcIj48YnV0dG9uIGNsYXNzPVwiYnRuLWxpbmsgbGlua1wiIG5nLWNsaWNrPVwic2V0UGFnZShwYWdlKVwiIG5nLWJpbmQ9XCJwYWdlKzFcIj48L2J1dHRvbj48L2xpPjxsaSBuZy1zaG93PVwiOmd0UmVmcmVzaDpjdXJyZW50UGFnZSArMSA8IHBhZ2VzLmxlbmd0aC0xICYmIHBhZ2VzLmxlbmd0aCA+IDRcIj48c21hbGwgbmctc2hvdz1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UgKyAzIDwgcGFnZXMubGVuZ3RoXCI+JmhlbGxpcDs8L3NtYWxsPjxidXR0b24gY2xhc3M9XCJidG4tbGluayBsaW5rXCIgbmctY2xpY2s9XCJzZXRQYWdlKHBhZ2VzLmxlbmd0aC0xKVwiIG5nLWJpbmQ9XCJwYWdlcy5sZW5ndGhcIj48L2J1dHRvbj48L2xpPjxsaSBuZy1jbGFzcz1cIjpndFJlZnJlc2g6e2Rpc2FibGVkOiBjdXJyZW50UGFnZSA9PSBwYWdlcy5sZW5ndGh9XCIgbmctc2hvdz1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UrMSAhPT0gcGFnZXMubGVuZ3RoXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi1saW5rIGxpbmtcIiBuZy1jbGljaz1cIm5leHRQYWdlKClcIiBuZy1kaXNhYmxlZD1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UrMSA9PT0gcGFnZXMubGVuZ3RoXCIgbmctYmluZC1odG1sPVwiOjpndFRyYW5zbGF0aW9ucy5uZXh0XCI+PC9idXR0b24+PC9saT48L3VsPjwvZGl2PjwvZGl2PicpfV0pfSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
