angular.module("angular.generic.table",["ngAnimate","angular.filter","angular.bind.notifier","ngCsv"]),!function(e){try{e=angular.module("angular.generic.table")}catch(t){e=angular.module("angular.generic.table",[])}e.run(["$templateCache",function(e){e.put("generic-table/directive/generic-table/generic-table.html",'<div class="generic-table"><div class="gt-wrapper"><table class="table table-sortable" ng-if="gtHasData" ng-class=":gtRefresh:gtClasses"><thead><tr ng-class="::gtRowTransition ? \'fade-in animate\':\'\'"><th ng-repeat="field in ::gtFields | orderBy:\'columnOrder\' track by field.objectKey" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class=":gtRefresh:[field.classNames, (field.objectKey | camelToDash) + \'-column\', \'sort-\'+(gtSettings | getProperty:field.objectKey:\'sort\')]"><span ng-click=":gtRefresh:(gtSettings | getProperty:field.objectKey:\'sort\') === \'enable\' ? sort(field.objectKey):(gtSettings | getProperty:field.objectKey:\'sort\') === \'asc\' ? sort(field.objectKey):(gtSettings | getProperty:field.objectKey:\'sort\') === \'desc\' ? sort(field.objectKey):\'\'">{{::field.name}}</span></th></tr><tr ng-if=":gtRefresh:gtTotals" ng-class="::gtRowTransition ? \'fade-in animate\':\'\'"><td ng-repeat="field in ::gtFields | orderBy:\'columnOrder\' track by field.objectKey" class="total-column" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class="::[(gtFields | getProperty:field.objectKey:\'classNames\'), (field.objectKey | camelToDash) + \'-column\']" field-settings="::field" gt-render="" row-data="::gtTotals" gt-compile="::field.compile"></td></tr></thead><tbody><tr gt-row="" ng-repeat="row in :gtRefresh:gtDisplayData | limitTo: displayRows" gt-event="" ng-class=":gtRefresh:[gtRowTransition ? \'fade-in animate\':\'\',row.isOpen ? \'row-open\':\'\', $index % 2 == 0 ? \'row-odd\':\'row-even\']"><td ng-repeat="field in :gtRefresh:gtFields | orderBy:\'columnOrder\' track by field.objectKey" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class="::[(gtFields | getProperty:field.objectKey:\'classNames\'), (field.objectKey | camelToDash) + \'-column\']"><span ng-class="::field.click ? \'gt-click-enabled\':\'\'" field-settings="::field" gt-render="" row-data="::row" gt-compile="::field.compile" ng-click=":gtRefresh:!field.click || field.click(row);!field.expand || toggleRow(field.expand,(gtSettings | filter:{\'visible\':true}:true).length,row,field.objectKey);"></span></td></tr></tbody><tr ng-if=":gtRefresh:pagination === false"><td class="gt-no-data" colspan="{{:gtRefresh:(gtSettings | filter:{\'visible\':true}:true).length}}">{{::gtNoDataTxt}}</td></tr></table></div><div class="gt-pagination text-center" ng-if=":gtRefresh:gtPagination === true && pagination !== false"><ul class="pagination"><li ng-class=":gtRefresh:{disabled: currentPage === 0}" ng-show="currentPage !== 0"><button class="btn-link link" ng-click="previousPage()" translate="ALL.GENERAL#PAGINATION_PREVIOUS#BUTTON" ng-disabled=":gtRefresh:currentPage === 0">&laquo; Prev</button></li><li ng-show=":gtRefresh:currentPage > 3"><button class="btn-link link" ng-click="setPage(0)">1</button><small>&hellip;</small></li><li style="display: inline;padding: 0 5px;" ng-repeat="page in :gtRefresh:pagination" ng-class=":gtRefresh:page === currentPage ? \'active\':\'\'"><button class="btn-link link" ng-click="setPage(page)">{{page+1}}</button></li><li ng-show=":gtRefresh:currentPage +1 < pages.length-1 && pages.length > 4"><small ng-show=":gtRefresh:currentPage + 3 < pages.length">&hellip;</small><button class="btn-link link" ng-click="setPage(pages.length-1)">{{pages.length}}</button></li><li ng-class=":gtRefresh:{disabled: currentPage == pages.length}" ng-show=":gtRefresh:currentPage+1 !== pages.length"><button class="btn-link link" ng-click="nextPage()" translate="ALL.GENERAL#PAGINATION_NEXT#BUTTON" ng-disabled=":gtRefresh:currentPage+1 === pages.length">Next &raquo;</button></li></ul></div></div>')}])}(),angular.module("angular.generic.table").directive("genericTable",function(){return{restrict:"E",replace:!0,scope:{gtId:"=gtId",gtClasses:"@gtClasses",gtSettings:"=gtSettings",gtFields:"=gtFields",gtTotals:"=gtTotals",gtData:"=gtData",gtRows:"@gtRows",gtRowTransition:"@gtRowTransition",gtPagination:"@gtPagination",gtNoDataTxt:"@"},templateUrl:"generic-table/directive/generic-table/generic-table.html",link:function(e,t,n,r){},controller:"genericTableController"}}).controller("genericTableController",["$scope","$filter","$timeout","CSV","$document",function(e,t,n,r,a){var i,o,g,s,l,c,d,f="undefined"==typeof e.gtSettings?!1:t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey});e.gtPagination="undefined"==typeof e.gtPagination?!0:"false"!==e.gtPagination,e.gtRows="undefined"==typeof e.gtRows?20:e.gtRows,e.gtNoDataTxt="undefined"==typeof e.gtNoDataTxt?"No table data to display":e.gtNoDataTxt,e.gtId="undefined"==typeof e.gtId?e.$id:e.gtId;var u=function(){t("map")(e.gtSettings,function(n){try{var r=t("filter")(e.gtFields,{objectKey:n.objectKey},!0)[0];r.columnOrder=n.columnOrder,n["export"]===!1&&(r.exportField=!1)}catch(a){console.log('field definition object for property: "'+n.objectKey+'" not found.',a)}})};u();var p=function(t){e.gtHasData=!1,i=t.slice(0),e.$emit("gt-started-data-processing",e.gtId),h(t)},b=function(t){e.gtHasData=!1,i=t.slice(0),e.$emit("gt-started-data-processing",e.gtId),h(t)},h=function(n){l=t("map")(t("removeWith")(e.gtFields.slice(0),{search:!1}),"objectKey");var r=t("map")(t("filter")(e.gtSettings,{enabled:!0},!0),"objectKey");o=t("map")(n,function(n){var a={};return t("map")(r,function(r){if("undefined"!=typeof n[r])a[r]=n[r];else{var i=t("map")(t("filter")(e.gtFields,{objectKey:r},!0),"value")[0];i&&angular.isFunction(i)?a[r]=i(n):console.log('property: "'+r+'" does not exists in data object and no value function was declared')}}),a}),m(o)},m=function(e,n){var r=t("filter")(e.slice(0),c,function(e,t){return t.indexOf(e)>-1},!0).slice(0);g=t("searchRow")(r,l,n),y()},y=function(){s=f!==!1?t("gtSort")(g,f):g,v()},v=function(){e.pages=t("chunkBy")(s,parseInt(e.gtRows)),e.currentPage=0,e.loading=!0,e.$emit("gt-started-rendering"),e.gtDisplayData=e.pages[e.currentPage],w(e.pages.length,e.currentPage),n(function(){e.$emit("gt-finished-data-processing",e.gtId),e.gtHasData=!0},200),e.$broadcast("$$rebind::gtRefresh")};e.$on("gt-update-table:"+e.gtId,function(e,t){b(t)}),e.$on("gt-search-table:"+e.gtId,function(e,t){d=t,m(o.slice(0),t)}),e.$on("gt-filter-table:"+e.gtId,function(e,t){c=t,m(o.slice(0),d)}),e.$on("gt-update-structure:"+e.gtId,function(n,r){e.gtFields=r.fields,e.gtSettings=r.settings,u(),l=t("map")(t("removeWith")(e.gtFields.slice(0),{search:!1}),"objectKey"),f===!1||r.forceSorting===!0?f=t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey}):(t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){e.sort="enable"}),t("map")(f,function(n){var r=-1===n.indexOf("-")?"asc":"desc";n=n.replace("-",""),t("filter")(e.gtSettings,{objectKey:n},!0)[0].sort=r}))}),e.$on("gt-paginate-table:"+e.gtId,function(t,n){e.gtRows=parseInt(n),v()}),e.$on("gt-export-csv:"+e.gtId,function(e,t){P(t)});var w=function(t,n){return e.pagination=[],0===t?(e.pagination=!1,void e.$emit("gt-table-filtered",{total:o.length,filtered:0,showingFrom:0,showingTo:0,pageLength:e.gtRows,currentPage:0,numberOfPages:0})):(2>t?e.pagination=[0]:3>t?e.pagination=[0,1]:4>t?e.pagination=[0,1,2]:5>t?e.pagination=[0,1,2,3]:4>n?e.pagination=[0,1,2,3,4]:t>n+1?e.pagination=[n-1,n,n+1]:t===n+1?e.pagination=[n-2,n-1,n]:t-4>n&&(e.pagination=[n-1,n,n+1,n+2]),void e.$emit("gt-table-filtered",{total:o.length,filtered:g.length,showingFrom:e.currentPage*e.gtRows+(e.currentPage>1?0:1),showingTo:e.currentPage*e.gtRows+e.gtDisplayData.length,pageLength:e.gtRows,currentPage:e.currentPage,numberOfPages:e.pages.length}))};e.nextPage=function(){try{e.currentPage++,e.gtDisplayData=e.pages[e.currentPage],w(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(t){console.log(t)}},e.previousPage=function(){try{e.currentPage--,e.gtDisplayData=e.pages[e.currentPage],w(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(t){console.log(t)}},e.setPage=function(t){try{e.currentPage=t,e.gtDisplayData=e.pages[e.currentPage],w(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(n){console.log(n)}},e.sort=function(n){if(n)for(var r=0;e.gtSettings.length>r;r++){var a=e.gtSettings[r];if(a.objectKey===n){var i=a.sort;switch(i){case"disable":break;case"enable":e.gtSettings[r].sort="asc";break;case"asc":e.gtSettings[r].sort="desc";break;case"desc":e.gtSettings[r].sort="enable"}}}f=t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey}),y()},e.gtData&&p(e.gtData);var P=function(i){i="undefined"==typeof i?{}:i;for(var o="undefined"==typeof i.fileName?"export":i.fileName,g=JSON.parse(angular.toJson(s.slice(0))),l=0;l<g.length;l++){var c=g[l];for(var d in c)if(c.hasOwnProperty(d)){var f=t("filter")(e.gtFields,{objectKey:d},!0)[0],u=t("filter")(e.gtSettings,{objectKey:d},!0)[0],p=f["export"];p&&angular.isFunction(p)&&(c[d]=p(c,d)),"undefined"!=typeof i.exportColumns?-1===i.exportColumns.indexOf(u.objectKey)&&(c[d]=null):"undefined"!=typeof u["export"]&&u["export"]===!1&&(c[d]=null)}}var b=g;if("undefined"!=typeof i.exportColumns)var h=t("map")(i.exportColumns,function(n){return t("filter")(e.gtFields.slice(0),{objectKey:n},!0)[0]});else var h=t("orderBy")(t("removeWith")(e.gtFields,{exportField:!1}),"columnOrder");var m={fieldSep:"undefined"==typeof i.fieldSep?";":i.fieldSep,header:t("map")(h,"name"),txtDelim:"undefined"==typeof i.txtDelim?'"':i.txtDelim,columnOrder:t("map")(h,"objectKey"),decimalSep:"undefined"==typeof i.decimalSep?",":i.decimalSep,addByteOrderMarker:"undefined"==typeof i.addBom,charset:"undefined"==typeof i.charset?"utf-8":i.charset};r.stringify(b,m).then(function(e){var t;if(window.navigator.msSaveOrOpenBlob)t=new Blob([e],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(t,"export.csv");else if("Microsoft Internet Explorer"===window.navigator.appName){window.alert("You're using an old version of Internet Explorer and the export might therefore have the wrong format, please update your browser.");var r=angular.element("<iframe></iframe>");r[0].style.display="none";var i=angular.element("body");i.append(r);var g=null;r[0].contentDocument?g=r[0].contentDocument:r[0].contentWindow&&(g=r[0].contentWindow.document),g.open("text/plain","replace"),g.write([e]),g.close(),g.execCommand("SaveAs",!0,o+".csv")}else{t=new Blob([e],{type:"text/csv;charset=utf-8;"});var s=angular.element("<a></a>");s.attr("href",window.URL.createObjectURL(t)),s.attr("download",o+".csv"),a.find("body").append(s),n(function(){s[0].click(),s.remove()},null)}})}}]).directive("gtRow",["$compile",function(e){return{restrict:"A",scope:!1,link:function(t,n,r,a){t.toggleRow=function(r,a,i,o){if(t.row.isOpen)n.next().remove(),t.row.isOpen=!1;else{var i=e('<tr class="expanded-row"><td colspan="'+a+'">'+r+"</td></tr>")(t);n.after(i),t.row.isOpen=!0}t.$broadcast("$$rebind::gtRefresh")}}}}]).directive("gtEvent",function(){return{restrict:"A",link:function(e,t,n,r){e.$last&&e.$emit("gt-finished-rendering",e.gtId)}}}).directive("gtRender",["$compile",function(e){return{restrict:"A",scope:{row:"=rowData",settings:"=fieldSettings",compile:"=gtCompile"},link:function(t,n,r,a){var i,o=t.row,g=t.settings.objectKey,s=t.settings.render;i=s&&angular.isFunction(s)?s(o,g):o[g],t.compile===!0&&(i=e(i)(t.$parent)),n[0].innerHTML=i}}}]).filter("getProperty",["$filter",function(e){return function(t,n,r){try{var a=e("filter")(t,{objectKey:n},!0)[0][r]}catch(i){console.log('cannot read property: "'+r+'" on missing key: "'+n+'" in settings.',i)}return a}}]).filter("searchRow",["$filter",function(e){return function(t,n,r){for(var a=[],r="undefined"==typeof r?"":r,i=r.toLowerCase().split(" "),o=0;o<t.length;o++){var g=t[o],s="";e("map")(n,function(e){s+=g[e]}),s=s.toLowerCase();for(var l=!0,c=0;c<i.length;c++){var d=i[c];if(l=-1!==s.indexOf(d),!l)break}l&&a.push(g)}return a}}]).filter("camelToDash",function(){return function(e){try{return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}catch(t){console.log("nothing to replace:",t)}}}).filter("gtSort",function(){return function(e,t){function n(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,r){var a=n[e]<r[e]?-1:n[e]>r[e]?1:0;return a*t}}function r(e){var t=e;return function(e,r){for(var a=0,i=0,o=t.length;0===i&&o>a;)i=n(t[a])(e,r),a++;return i}}return e.sort(r(t))}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyaWMtdGFibGUuanMiLCJhbmd1bGFyLmdlbmVyaWMudGFibGUudHBsLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJlIiwidCIsInJ1biIsInB1dCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVwbGFjZSIsInNjb3BlIiwiZ3RJZCIsImd0Q2xhc3NlcyIsImd0U2V0dGluZ3MiLCJndEZpZWxkcyIsImd0VG90YWxzIiwiZ3REYXRhIiwiZ3RSb3dzIiwiZ3RSb3dUcmFuc2l0aW9uIiwiZ3RQYWdpbmF0aW9uIiwiZ3ROb0RhdGFUeHQiLCJ0ZW1wbGF0ZVVybCIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCJmbiIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkZmlsdGVyIiwiJHRpbWVvdXQiLCJDU1YiLCIkZG9jdW1lbnQiLCJvcmlnaW5hbERhdGEiLCJtYXBwZWREYXRhIiwiZmlsdGVyZWREYXRhIiwic29ydGVkRGF0YSIsInNlYXJjaENvbHVtbnMiLCJ0YWJsZUZpbHRlcnMiLCJzZWFyY2hUZXJtcyIsInNvcnRpbmciLCJzb3J0IiwiZXhwZWN0ZWQiLCJhY3R1YWwiLCJpbmRleE9mIiwib2JqZWN0S2V5IiwiJGlkIiwiZXh0ZW5kRmllbGREZWZpbml0aW9ucyIsInNldHRpbmciLCJmaWVsZCIsImNvbHVtbk9yZGVyIiwiZXhwb3J0RmllbGQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpbml0VGFibGUiLCJpbml0RGF0YSIsImd0SGFzRGF0YSIsInNsaWNlIiwiJGVtaXQiLCJtYXBLZXlzIiwiY2hhbmdlRGF0YSIsIm5ld0RhdGEiLCJkYXRhIiwic2VhcmNoIiwicHJvcGVydGllcyIsImVuYWJsZWQiLCJyb3ciLCJvYmoiLCJwcm9wZXJ0eSIsInZhbHVlRnVuY3Rpb24iLCJpc0Z1bmN0aW9uIiwiYXBwbHlGaWx0ZXIiLCJmaWx0ZXJlZCIsImFwcGx5U29ydCIsImFwcGx5UGFnaW5hdGlvbiIsInBhZ2VzIiwicGFyc2VJbnQiLCJjdXJyZW50UGFnZSIsImxvYWRpbmciLCJndERpc3BsYXlEYXRhIiwicGFnaW5hdGlvbiIsImxlbmd0aCIsIiRicm9hZGNhc3QiLCIkb24iLCJldmVudCIsImFyZyIsImZpZWxkcyIsInNldHRpbmdzIiwiZm9yY2VTb3J0aW5nIiwic29ydFByb3BlcnR5IiwiZ3RFeHBvcnQiLCJ0b3RhbFBhZ2VzIiwidG90YWwiLCJzaG93aW5nRnJvbSIsInNob3dpbmdUbyIsInBhZ2VMZW5ndGgiLCJudW1iZXJPZlBhZ2VzIiwibmV4dFBhZ2UiLCJwcmV2aW91c1BhZ2UiLCJzZXRQYWdlIiwicGFnZSIsImkiLCJvcHRpb25zIiwiZmlsZU5hbWUiLCJleHBvcnREYXRhIiwiSlNPTiIsInBhcnNlIiwidG9Kc29uIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJmaWVsZFNldHRpbmciLCJ0YWJsZVNldHRpbmciLCJleHBvcnRNZXRob2QiLCJleHBvcnRDb2x1bW5zIiwiZXhwb3J0RmllbGRzIiwiaGVhZGVycyIsImZpZWxkU2VwIiwiaGVhZGVyIiwidHh0RGVsaW0iLCJkZWNpbWFsU2VwIiwiYWRkQnl0ZU9yZGVyTWFya2VyIiwiYWRkQm9tIiwiY2hhcnNldCIsInN0cmluZ2lmeSIsInRoZW4iLCJyZXN1bHQiLCJibG9iIiwid2luZG93IiwibmF2aWdhdG9yIiwibXNTYXZlT3JPcGVuQmxvYiIsIkJsb2IiLCJ0eXBlIiwibXNTYXZlQmxvYiIsImFwcE5hbWUiLCJhbGVydCIsImlmcmFtZSIsInN0eWxlIiwiZGlzcGxheSIsImFwcGVuZCIsImRvYyIsImNvbnRlbnREb2N1bWVudCIsImNvbnRlbnRXaW5kb3ciLCJkb2N1bWVudCIsIm9wZW4iLCJ3cml0ZSIsImNsb3NlIiwiZXhlY0NvbW1hbmQiLCJkb3dubG9hZExpbmsiLCJhdHRyIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiZmluZCIsImNsaWNrIiwicmVtb3ZlIiwiJGNvbXBpbGUiLCJ0b2dnbGVSb3ciLCJjb250ZW50IiwiY29sdW1ucyIsImlzT3BlbiIsIm5leHQiLCJhZnRlciIsIiRsYXN0IiwiY29tcGlsZSIsIm91dHB1dCIsInJlbmRlck1ldGhvZCIsInJlbmRlciIsIiRwYXJlbnQiLCJpbm5lckhUTUwiLCJmaWx0ZXIiLCJhcnJheSIsImZpbHRlcmVkQXJyYXkiLCJzZWFyY2hUZXJtc0FycmF5IiwidG9Mb3dlckNhc2UiLCJzcGxpdCIsInN0cmluZyIsIm1hdGNoIiwiayIsInRlcm0iLCJwdXNoIiwicHJvcGVydHlBcnJheSIsImR5bmFtaWNTb3J0Iiwic29ydE9yZGVyIiwic3Vic3RyIiwiYSIsImIiLCJkeW5hbWljU29ydE11bHRpcGxlIiwicHJvcHMiLCJvYmoxIiwib2JqMiIsIm51bWJlck9mUHJvcGVydGllcyJdLCJtYXBwaW5ncyI6IkFBT0FBLFFBQUFDLE9BQUEseUJBQUEsWUFBQSxpQkFBQSx3QkFBQSxXQ1BBLFNBQUFDLEdBQUEsSUFBQUEsRUFBQUYsUUFBQUMsT0FBQSx5QkFBQSxNQUFBRSxHQUFBRCxFQUFBRixRQUFBQyxPQUFBLDRCQUFBQyxFQUFBRSxLQUFBLGlCQUFBLFNBQUFGLEdBQUFBLEVBQUFHLElBQUEsMkRBQUEsb29IRGtCQUwsUUFBQUMsT0FBQSx5QkFBQUssVUFBQSxlQUFBLFdBQ0EsT0FDQUMsU0FBQSxJQUNBQyxTQUFBLEVBQ0FDLE9BQ0FDLEtBQUEsUUFDQUMsVUFBQSxhQUNBQyxXQUFBLGNBQ0FDLFNBQUEsWUFDQUMsU0FBQSxZQUVBQyxPQUFBLFVBQ0FDLE9BQUEsVUFDQUMsZ0JBQUEsbUJBQ0FDLGFBQUEsZ0JBQ0FDLFlBQUEsS0FFQUMsWUFBQSwyREFDQUMsS0FBQSxTQUFBWixFQUFBYSxFQUFBQyxFQUFBQyxLQUdBQyxXQUFBLDRCQUVBQSxXQUFBLDBCQUFBLFNBQUEsVUFBQSxXQUFBLE1BQUEsWUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBRUFDLEVBQUEsbUJBQUFaLEdBQUFkLFlBQUEsRUFBQWUsRUFBQSxPQUFB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d0csT0FFQUYsT0FBQSxjQUFBLFdBQ0EsTUFBQSxVQUFBTSxHQUFBLElBQ0EsTUFBQUEsR0FBQXJLLFFBQUEsa0JBQUEsU0FBQW1LLGNBQUEsTUFBQXpILEdBQUFDLFFBQUFDLElBQUEsc0JBQUFGLE9BRUFxSCxPQUFBLFNBQUEsV0FDQSxNQUFBLFVBQUFDLEVBQUFVLEdBQ0EsUUFBQUMsR0FBQWhILEdBQ0EsR0FBQWlILEdBQUEsQ0FLQSxPQUpBLE1BQUFqSCxFQUFBLEtBQ0FpSCxFQUFBLEdBQ0FqSCxFQUFBQSxFQUFBa0gsT0FBQSxJQUVBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQTNELEdBQUEwRCxFQUFBbkgsR0FBQW9ILEVBQUFwSCxHQUFBLEdBQUFtSCxFQUFBbkgsR0FBQW9ILEVBQUFwSCxHQUFBLEVBQUEsQ0FDQSxPQUFBeUQsR0FBQXdELEdBR0EsUUFBQUksR0FBQU4sR0FNQSxHQUFBTyxHQUFBUCxDQUNBLE9BQUEsVUFBQVEsRUFBQUMsR0FLQSxJQUpBLEdBQUF2RixHQUFBLEVBQUF3QixFQUFBLEVBQUFnRSxFQUFBSCxFQUFBekcsT0FJQSxJQUFBNEMsR0FBQWdFLEVBQUF4RixHQUNBd0IsRUFBQXVELEVBQUFNLEVBQUFyRixJQUFBc0YsRUFBQUMsR0FDQXZGLEdBRUEsT0FBQXdCLElBR0EsTUFBQTRDLEdBQUFqSSxLQUFBaUosRUFBQU4iLCJmaWxlIjoiYW5ndWxhci1nZW5lcmljLXRhYmxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIGFuZ3VsYXIuZ2VuZXJpYy50YWJsZS5kaXJlY3RpdmU6Z2VuZXJpY1RhYmxlXHJcbiAqIEByZXF1aXJlcyAvLyAncHJvdmlkZSBhbnkgZGVwZW5kZW5jaWVzIGV4LiAkc2NvcGUsIHlvdSBjYW4gaGF2ZSBtdWx0aXBsZSBAcmVxdWlyZXMgbGluZXMnXHJcbiAqXHJcbiAqIEByZXN0cmljdCBFXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBEZXNjcmlwdGlvbiBvZiBnZW5lcmljVGFibGUgZGlyZWN0aXZlLCBsb3JlbSBpcHN1bSBkb2xhciBzaXQgYW1ldFxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZz19IGRhdGEtYXR0cmlidXRlIC8vICdhdHRyaWJ1dGVzIHVzZWQgYnkgZGlyZWN0aXZlLCB5b3UgY2FuIGhhdmUgbXVsdGlwbGUgQHBhcmFtIGxpbmVzJ1xyXG4gKlxyXG4gKiAgQGV4YW1wbGUgPHByZT5cclxuICpcclxuICogPGdlbmVyaWMtdGFibGUgZGF0YS1hdHRyaWJ1dGU9XCJteS12YWx1ZVwiPjwvZ2VuZXJpYy10YWJsZT5cclxuICpcclxuICogPC9wcmU+XHJcbiAqL1xyXG5hbmd1bGFyLm1vZHVsZSgnYW5ndWxhci5nZW5lcmljLnRhYmxlJykuZGlyZWN0aXZlKCdnZW5lcmljVGFibGUnLCBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgIGd0SWQ6Jz1ndElkJyxcclxuICAgICAgICAgICAgZ3RDbGFzc2VzOidAZ3RDbGFzc2VzJyxcclxuICAgICAgICAgICAgZ3RTZXR0aW5nczonPWd0U2V0dGluZ3MnLFxyXG4gICAgICAgICAgICBndEZpZWxkczonPWd0RmllbGRzJyxcclxuICAgICAgICAgICAgZ3RUb3RhbHM6Jz1ndFRvdGFscycsXHJcbiAgICAgICAgICAgIC8vZ3RJbmRleDonPWd0SW5kZXgnLFxyXG4gICAgICAgICAgICBndERhdGE6Jz1ndERhdGEnLFxyXG4gICAgICAgICAgICBndFJvd3M6J0BndFJvd3MnLFxyXG4gICAgICAgICAgICBndFJvd1RyYW5zaXRpb246J0BndFJvd1RyYW5zaXRpb24nLFxyXG4gICAgICAgICAgICBndFBhZ2luYXRpb246J0BndFBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICBndE5vRGF0YVR4dDonQCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnZ2VuZXJpYy10YWJsZS9kaXJlY3RpdmUvZ2VuZXJpYy10YWJsZS9nZW5lcmljLXRhYmxlLmh0bWwnLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgZm4pIHtcclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250cm9sbGVyOlwiZ2VuZXJpY1RhYmxlQ29udHJvbGxlclwiXHJcbiAgICB9O1xyXG59KS5jb250cm9sbGVyKCdnZW5lcmljVGFibGVDb250cm9sbGVyJyxmdW5jdGlvbigkc2NvcGUsJGZpbHRlciwkdGltZW91dCwgQ1NWLCRkb2N1bWVudCl7XHJcbiAgICB2YXIgb3JpZ2luYWxEYXRhOyAvLyBvcmlnaW5hbCB1bnRvdWNoZWQgZGF0YVxyXG4gICAgdmFyIG1hcHBlZERhdGE7IC8vIG1hcHBlZCBkYXRhLCBhcnJheSBjb250YWluaW5nIG1hcHBlZCBrZXlzIHVzZWQgYnkgdGFibGVcclxuICAgIHZhciBmaWx0ZXJlZERhdGE7IC8vIGZpbHRlcmVkIG1hcHBlZCBkYXRhXHJcbiAgICB2YXIgc29ydGVkRGF0YTsgLy8gc29ydGVkIG1hcHBlZCBkYXRhXHJcbiAgICB2YXIgc2VhcmNoQ29sdW1uczsgLy8gY29sdW1ucyB0byBzZWFyY2hcclxuICAgIHZhciB0YWJsZUZpbHRlcnM7IC8vIGZpbHRlcnMgYXBwbGllZCB0byB0aGUgdGFibGUgaW50ZXJuYWxseVxyXG4gICAgdmFyIHNlYXJjaFRlcm1zOyAvLyBzZWFyY2ggdGVybXMgdXNlZCBmb3Igc2VhcmNoaW5nIHRhYmxlXHJcblxyXG4gICAgdmFyIHNvcnRpbmcgPSB0eXBlb2YgJHNjb3BlLmd0U2V0dGluZ3MgPT09ICd1bmRlZmluZWQnID8gZmFsc2U6JGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3Mse3NvcnQ6XCJhc2MgZGVzY1wifSxmdW5jdGlvbihleHBlY3RlZCwgYWN0dWFsKXtcclxuICAgICAgICByZXR1cm4gYWN0dWFsLmluZGV4T2YoZXhwZWN0ZWQpID4gLTE7XHJcbiAgICB9KSxmdW5jdGlvbihzb3J0KXtcclxuICAgICAgICByZXR1cm4gKHNvcnQuc29ydCA9PT0gJ2Rlc2MnID8gJy0nOicnKSArIHNvcnQub2JqZWN0S2V5XHJcbiAgICB9KTsgLy8gcmV0dXJucyBhcnJheSBjb250YWluaW5nIHNvcnRpbmcgY3JpdGVyaWFcclxuICAgICRzY29wZS5ndFBhZ2luYXRpb24gPSB0eXBlb2YgJHNjb3BlLmd0UGFnaW5hdGlvbiA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlOiRzY29wZS5ndFBhZ2luYXRpb24gIT09ICdmYWxzZSc7XHJcbiAgICAkc2NvcGUuZ3RSb3dzID0gdHlwZW9mICRzY29wZS5ndFJvd3MgPT09ICd1bmRlZmluZWQnID8gMjA6JHNjb3BlLmd0Um93cztcclxuICAgICRzY29wZS5ndE5vRGF0YVR4dCA9IHR5cGVvZiAkc2NvcGUuZ3ROb0RhdGFUeHQgPT09ICd1bmRlZmluZWQnID8gJ05vIHRhYmxlIGRhdGEgdG8gZGlzcGxheSc6JHNjb3BlLmd0Tm9EYXRhVHh0O1xyXG4gICAgJHNjb3BlLmd0SWQgPSB0eXBlb2YgJHNjb3BlLmd0SWQgPT09ICd1bmRlZmluZWQnID8gJHNjb3BlLiRpZDokc2NvcGUuZ3RJZDtcclxuXHJcbiAgICAvLyBleHRlbmQgZmllbGQgZGVmaW5pdGlvbnNcclxuICAgIHZhciBleHRlbmRGaWVsZERlZmluaXRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJGZpbHRlcignbWFwJykoJHNjb3BlLmd0U2V0dGluZ3MsZnVuY3Rpb24oc2V0dGluZyl7XHJcbiAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9ICRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndEZpZWxkcyx7b2JqZWN0S2V5OnNldHRpbmcub2JqZWN0S2V5fSx0cnVlKVswXTtcclxuICAgICAgICAgICAgICAgIGZpZWxkLmNvbHVtbk9yZGVyID0gc2V0dGluZy5jb2x1bW5PcmRlcjsgLy8gYWRkIGNvbHVtbiBvcmRlclxyXG4gICAgICAgICAgICAgICAgaWYoc2V0dGluZy5leHBvcnQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGQuZXhwb3J0RmllbGQgPSBmYWxzZTsgLy8gYWRkIGV4cG9ydCBmaWVsZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmllbGQgZGVmaW5pdGlvbiBvYmplY3QgZm9yIHByb3BlcnR5OiBcIicrIHNldHRpbmcub2JqZWN0S2V5ICsnXCIgbm90IGZvdW5kLicsZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGV4dGVuZEZpZWxkRGVmaW5pdGlvbnMoKTtcclxuXHJcbiAgICB2YXIgaW5pdFRhYmxlID0gZnVuY3Rpb24oaW5pdERhdGEpe1xyXG4gICAgICAgICRzY29wZS5ndEhhc0RhdGEgPSBmYWxzZTtcclxuICAgICAgICBvcmlnaW5hbERhdGEgPSBpbml0RGF0YS5zbGljZSgwKTtcclxuICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LXN0YXJ0ZWQtZGF0YS1wcm9jZXNzaW5nJywkc2NvcGUuZ3RJZCk7XHJcbiAgICAgICAgbWFwS2V5cyhpbml0RGF0YSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNoYW5nZSBkYXRhLCB0aGlzIHdlIHVwZGF0ZSBvciBkYXRhIHNldFxyXG4gICAgdmFyIGNoYW5nZURhdGEgPSBmdW5jdGlvbihuZXdEYXRhKXtcclxuICAgICAgICAkc2NvcGUuZ3RIYXNEYXRhID0gZmFsc2U7XHJcbiAgICAgICAgb3JpZ2luYWxEYXRhID0gbmV3RGF0YS5zbGljZSgwKTtcclxuICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LXN0YXJ0ZWQtZGF0YS1wcm9jZXNzaW5nJywkc2NvcGUuZ3RJZCk7XHJcbiAgICAgICAgbWFwS2V5cyhuZXdEYXRhKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbWFwcGluZywgdGhpcyBpcyB3aGVyZSB3ZSBtYXAgd2hpY2gga2V5cyBzaG91bGQgYmUgcGFydCBvZiB0aGUgdGFibGUgYXJyYXkgcm93IG9iamVjdFxyXG4gICAgdmFyIG1hcEtleXMgPSBmdW5jdGlvbiAoZGF0YSl7XHJcblxyXG4gICAgICAgIC8vIGRlZmluZSB3aGljaCBmaWVsZHMgc2hvdWxkIGJlIHNlYXJjaGFibGVcclxuICAgICAgICBzZWFyY2hDb2x1bW5zID0gJGZpbHRlcignbWFwJykoJGZpbHRlcigncmVtb3ZlV2l0aCcpKCRzY29wZS5ndEZpZWxkcy5zbGljZSgwKSx7c2VhcmNoOmZhbHNlfSksJ29iamVjdEtleScpO1xyXG5cclxuICAgICAgICAvLyBnZXQga2V5IG5hbWVzIGZyb20gc2V0dGluZ3NcclxuICAgICAgICB2YXIgcHJvcGVydGllcyA9ICRmaWx0ZXIoJ21hcCcpKCRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndFNldHRpbmdzLCB7ZW5hYmxlZDp0cnVlfSx0cnVlKSwnb2JqZWN0S2V5Jyk7XHJcblxyXG4gICAgICAgIC8vIGNyZWF0ZSBuZXcgYXJyYXkgd2l0aCBtYXBwZWQgZGF0YVxyXG4gICAgICAgIG1hcHBlZERhdGEgPSAkZmlsdGVyKCdtYXAnKShkYXRhLCBmdW5jdGlvbihyb3cpe1xyXG4gICAgICAgICAgICB2YXIgb2JqID0ge307IC8vIGNyZWF0ZSBuZXcgcm93IG9iamVjdFxyXG5cclxuICAgICAgICAgICAgLy8gcmV0cmlldmUgb2JqZWN0IHZhbHVlcyBmcm9tIHJvdyBhbmQgYWRkIHRoZW0gdG8gdGhlIGNvcnJlc3BvbmRpbmcga2V5IGRlZmluZWQgYnkgdGhlIHRhYmxlIGZpZWxkc1xyXG4gICAgICAgICAgICAkZmlsdGVyKCdtYXAnKShwcm9wZXJ0aWVzLGZ1bmN0aW9uKHByb3BlcnR5KXtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHByb3BlcnR5IGV4aXN0cyBpbiBkYXRhIG9iamVjdC4uLlxyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIHJvd1twcm9wZXJ0eV0gIT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgY29sdW1uIHZhbHVlIGZyb20gZGF0YSBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgICAgIG9ialtwcm9wZXJ0eV09cm93W3Byb3BlcnR5XVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdwcm9wZXJ0eTogXCInICsgcHJvcGVydHkgICsgJ1wiIGRvZXMgbm90IGV4aXN0IGluIGRhdGEgb2JqZWN0LCBhdHRlbXB0aW5nIHRvIHVzZSB2YWx1ZSBmdW5jdGlvbiBpbnN0ZWFkICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3BlcnR5IGRvZXMgbm90IGV4aXN0cyBpbiBkYXRhLCB1c2UgdmFsdWUgZnVuY3Rpb24gdG8gZ2V0IHZhbHVlIGZvciBjb2x1bW5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVGdW5jdGlvbiA9ICRmaWx0ZXIoJ21hcCcpKCRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndEZpZWxkcywge29iamVjdEtleTpwcm9wZXJ0eX0sdHJ1ZSksJ3ZhbHVlJylbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodmFsdWVGdW5jdGlvbiAmJiBhbmd1bGFyLmlzRnVuY3Rpb24odmFsdWVGdW5jdGlvbikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgY3VzdG9tIHZhbHVlIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHZhbHVlIGZvciBjb2x1bW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygndXNpbmcgdmFsdWUgZnVuY3Rpb24gdG8gZ2V0IGRhdGEgZm9yIHJvdyBjb2x1bW4gJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ialtwcm9wZXJ0eV0gPSB2YWx1ZUZ1bmN0aW9uKHJvdyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Byb3BlcnR5OiBcIicgKyBwcm9wZXJ0eSAgKyAnXCIgZG9lcyBub3QgZXhpc3RzIGluIGRhdGEgb2JqZWN0IGFuZCBubyB2YWx1ZSBmdW5jdGlvbiB3YXMgZGVjbGFyZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhcHBseUZpbHRlcihtYXBwZWREYXRhKVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpbnRlcm5hbCBmaWx0ZXIsIHRoaXMgaXMgd2hlcmUgd2UgYXBwbHkgZmlsdGVyc1xyXG4gICAgdmFyIGFwcGx5RmlsdGVyID0gZnVuY3Rpb24gKGRhdGEsIHNlYXJjaCkge1xyXG5cclxuICAgICAgICAvLyBhcHBseSB0YWJsZSBmaWx0ZXJzXHJcbiAgICAgICAgdmFyIGZpbHRlcmVkID0gJGZpbHRlcignZmlsdGVyJykoZGF0YS5zbGljZSgwKSx0YWJsZUZpbHRlcnMsZnVuY3Rpb24oZXhwZWN0ZWQsIGFjdHVhbCl7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3R1YWwuaW5kZXhPZihleHBlY3RlZCkgPiAtMTtcclxuICAgICAgICB9LHRydWUpLnNsaWNlKDApO1xyXG5cclxuICAgICAgICAvLyByZXR1cm4gcm93cyB3aGVyZSBjb2x1bW5zIG1hdGNoIGVudGVyZWQgc2VhcmNoIHRlcm1zXHJcbiAgICAgICAgZmlsdGVyZWREYXRhID0gJGZpbHRlcignc2VhcmNoUm93JykoZmlsdGVyZWQsc2VhcmNoQ29sdW1ucywgc2VhcmNoKTtcclxuICAgICAgICBhcHBseVNvcnQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc29ydCwgdGhpcyBpcyB3aGVyZSB3ZSBzb3J0IHRoZSBmaWx0ZXJlZCByZXN1bHRzXHJcbiAgICB2YXIgYXBwbHlTb3J0ID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgc29ydGVkRGF0YSA9IHNvcnRpbmcgIT09IGZhbHNlID8gJGZpbHRlcignZ3RTb3J0JykoZmlsdGVyZWREYXRhLCBzb3J0aW5nKTogZmlsdGVyZWREYXRhO1xyXG4gICAgICAgIGFwcGx5UGFnaW5hdGlvbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBwYWdpbmF0aW9uLCB0aGlzIGlzIHdoZXJlIHdlIGRlY2lkZSB3aGljaCBzdWJzZXQgb2YgdGhlIGRhdGEgdG8gc2hvd1xyXG4gICAgdmFyIGFwcGx5UGFnaW5hdGlvbiA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICRzY29wZS5wYWdlcyA9ICRmaWx0ZXIoJ2NodW5rQnknKShzb3J0ZWREYXRhLCBwYXJzZUludCgkc2NvcGUuZ3RSb3dzKSk7XHJcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlID0gMDtcclxuICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1zdGFydGVkLXJlbmRlcmluZycpO1xyXG4gICAgICAgICRzY29wZS5ndERpc3BsYXlEYXRhID0gJHNjb3BlLnBhZ2VzWyRzY29wZS5jdXJyZW50UGFnZV07XHJcbiAgICAgICAgcGFnaW5hdGlvbigkc2NvcGUucGFnZXMubGVuZ3RoLCRzY29wZS5jdXJyZW50UGFnZSk7XHJcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1maW5pc2hlZC1kYXRhLXByb2Nlc3NpbmcnLCRzY29wZS5ndElkKTtcclxuICAgICAgICAgICAgJHNjb3BlLmd0SGFzRGF0YSA9IHRydWU7XHJcbiAgICAgICAgfSwyMDApO1xyXG4gICAgICAgIC8vJHNjb3BlLiRlbWl0KCdndC1maW5pc2hlZC1yZW5kZXJpbmcnKTtcclxuICAgICAgICAvKmlmKCRzY29wZS5sb2FkaW5nKXtcclxuICAgICAgICAgY29uc29sZS5sb2coJ3N0aWxsIGxvb2FkaW5nJyk7XHJcbiAgICAgICAgICRzY29wZS4kZW1pdCgnZ3QtZmluaXNoZWQtcmVuZGVyaW5nJyk7XHJcbiAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgIH0qL1xyXG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCckJHJlYmluZDo6Z3RSZWZyZXNoJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGxpc3RlbiBmb3IgdXBkYXRlIHRhYmxlIGV2ZW50c1xyXG4gICAgJHNjb3BlLiRvbignZ3QtdXBkYXRlLXRhYmxlOicrJHNjb3BlLmd0SWQsZnVuY3Rpb24oZXZlbnQsYXJnKXtcclxuICAgICAgICBjaGFuZ2VEYXRhKGFyZyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBsaXN0ZW4gZm9yIHNlYXJjaCBldmVudHNcclxuICAgICRzY29wZS4kb24oJ2d0LXNlYXJjaC10YWJsZTonKyRzY29wZS5ndElkLGZ1bmN0aW9uKGV2ZW50LGFyZyl7XHJcbiAgICAgICAgc2VhcmNoVGVybXMgPSBhcmc7XHJcbiAgICAgICAgYXBwbHlGaWx0ZXIobWFwcGVkRGF0YS5zbGljZSgwKSxhcmcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gbGlzdGVuIGZvciBmaWx0ZXIgZXZlbnRzXHJcbiAgICAkc2NvcGUuJG9uKCdndC1maWx0ZXItdGFibGU6Jyskc2NvcGUuZ3RJZCxmdW5jdGlvbihldmVudCxhcmcpe1xyXG4gICAgICAgIHRhYmxlRmlsdGVycyA9IGFyZztcclxuICAgICAgICBhcHBseUZpbHRlcihtYXBwZWREYXRhLnNsaWNlKDApLHNlYXJjaFRlcm1zKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGxpc3RlbiBmb3IgdXBkYXRlIHRhYmxlIGV2ZW50c1xyXG4gICAgJHNjb3BlLiRvbignZ3QtdXBkYXRlLXN0cnVjdHVyZTonKyRzY29wZS5ndElkLGZ1bmN0aW9uKGV2ZW50LGFyZyl7XHJcbiAgICAgICAgJHNjb3BlLmd0RmllbGRzID0gYXJnLmZpZWxkcztcclxuICAgICAgICAkc2NvcGUuZ3RTZXR0aW5ncyA9IGFyZy5zZXR0aW5ncztcclxuICAgICAgICBleHRlbmRGaWVsZERlZmluaXRpb25zKCk7XHJcbiAgICAgICAgc2VhcmNoQ29sdW1ucyA9ICRmaWx0ZXIoJ21hcCcpKCRmaWx0ZXIoJ3JlbW92ZVdpdGgnKSgkc2NvcGUuZ3RGaWVsZHMuc2xpY2UoMCkse3NlYXJjaDpmYWxzZX0pLCdvYmplY3RLZXknKTtcclxuXHJcbiAgICAgICAgLy8gaWYgbm8gc29ydGluZyBpcyBhcHBsaWVkIG9yIGlmIHNvcnRpbmcgaXMgZm9yY2VkLi4uXHJcbiAgICAgICAgaWYoc29ydGluZyA9PT0gZmFsc2UgfHwgYXJnLmZvcmNlU29ydGluZyA9PT0gdHJ1ZSkge1xyXG5cclxuICAgICAgICAgICAgLy8gLi4uc2V0IHNvcnRpbmcgb3JkZXJcclxuICAgICAgICAgICAgc29ydGluZyA9ICRmaWx0ZXIoJ21hcCcpKCRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndFNldHRpbmdzLHtzb3J0OlwiYXNjIGRlc2NcIn0sZnVuY3Rpb24oZXhwZWN0ZWQsIGFjdHVhbCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0dWFsLmluZGV4T2YoZXhwZWN0ZWQpID4gLTE7XHJcbiAgICAgICAgICAgIH0pLGZ1bmN0aW9uKHNvcnQpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChzb3J0LnNvcnQgPT09ICdkZXNjJyA/ICctJzonJykgKyBzb3J0Lm9iamVjdEtleVxyXG4gICAgICAgICAgICB9KTsgLy8gcmV0dXJucyBhcnJheSBjb250YWluaW5nIHNvcnRpbmcgY3JpdGVyaWFcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyByZXNldCBzb3J0aW5nIHNldHRpbmcgJ2FzYycgYW5kICdkZXNjJyB0byAnZW5hYmxlJ1xyXG4gICAgICAgICAgICAkZmlsdGVyKCdtYXAnKSgkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZ3RTZXR0aW5ncyx7c29ydDpcImFzYyBkZXNjXCJ9LGZ1bmN0aW9uKGV4cGVjdGVkLCBhY3R1YWwpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xO1xyXG4gICAgICAgICAgICB9KSxmdW5jdGlvbihzZXR0aW5nKXtcclxuICAgICAgICAgICAgICAgIHNldHRpbmcuc29ydCA9ICdlbmFibGUnO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBzZXR0aW5ncyB0byBtYXRjaCBzb3J0aW5nIGluIHRhYmxlXHJcbiAgICAgICAgICAgICRmaWx0ZXIoJ21hcCcpKHNvcnRpbmcsZnVuY3Rpb24oc29ydFByb3BlcnR5KXtcclxuICAgICAgICAgICAgICAgIHZhciBzb3J0ID0gc29ydFByb3BlcnR5LmluZGV4T2YoJy0nKSA9PT0gLTEgPyAnYXNjJzonZGVzYyc7XHJcbiAgICAgICAgICAgICAgICBzb3J0UHJvcGVydHkgPSBzb3J0UHJvcGVydHkucmVwbGFjZSgnLScsJycpO1xyXG4gICAgICAgICAgICAgICAgJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3MsIHsnb2JqZWN0S2V5Jzpzb3J0UHJvcGVydHl9LHRydWUpWzBdLnNvcnQgPSBzb3J0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vIGxpc3RlbiBmb3IgcGFnaW5hdGlvbiBsZW5ndGggY2hhbmdlXHJcbiAgICAkc2NvcGUuJG9uKCdndC1wYWdpbmF0ZS10YWJsZTonKyRzY29wZS5ndElkLGZ1bmN0aW9uKGV2ZW50LGFyZyl7XHJcbiAgICAgICAgJHNjb3BlLmd0Um93cyA9IHBhcnNlSW50KGFyZyk7XHJcbiAgICAgICAgYXBwbHlQYWdpbmF0aW9uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBsaXN0ZW4gZm9yIGV4cG9ydCBldmVudFxyXG4gICAgJHNjb3BlLiRvbignZ3QtZXhwb3J0LWNzdjonKyRzY29wZS5ndElkLGZ1bmN0aW9uKGV2ZW50LGFyZyl7XHJcbiAgICAgICAgZ3RFeHBvcnQoYXJnKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvLyBjcmVhdGUgcGFnaW5hdGlvblxyXG4gICAgdmFyIHBhZ2luYXRpb24gPSBmdW5jdGlvbih0b3RhbFBhZ2VzLCBjdXJyZW50UGFnZSl7XHJcbiAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbXTtcclxuXHJcbiAgICAgICAgLy8gaWYgdG90YWwgcGFnZXMgZXF1YWxzIDAgaWUuIG5vIGRhdGEgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYodG90YWxQYWdlcyA9PT0gMCApIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC10YWJsZS1maWx0ZXJlZCcsIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsOm1hcHBlZERhdGEubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWQ6MCxcclxuICAgICAgICAgICAgICAgIHNob3dpbmdGcm9tOjAsXHJcbiAgICAgICAgICAgICAgICBzaG93aW5nVG86MCxcclxuICAgICAgICAgICAgICAgIHBhZ2VMZW5ndGg6JHNjb3BlLmd0Um93cyxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOjAsXHJcbiAgICAgICAgICAgICAgICBudW1iZXJPZlBhZ2VzOjBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmIGxlc3MgdGhhbiB0d28gcGFnZXNcclxuICAgICAgICBpZih0b3RhbFBhZ2VzIDwgMil7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBsZXNzIHRoYW4gdGhyZWUgcGFnZXNcclxuICAgICAgICBlbHNlIGlmKHRvdGFsUGFnZXMgPCAzKXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbMCwxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbGVzcyB0aGFuIGZvdXIgcGFnZXNcclxuICAgICAgICBlbHNlIGlmKHRvdGFsUGFnZXMgPCA0KXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbMCwxLDJdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBsZXNzIHRoYW4gZml2ZSBwYWdlc1xyXG4gICAgICAgIGVsc2UgaWYodG90YWxQYWdlcyA8IDUpe1xyXG4gICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbiA9IFswLDEsMiwzXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgY3VycmVudCBwYWdlIGlzIG9uZSBvZiB0aGUgZm91ciBmaXJzdCBwYWdlc1xyXG4gICAgICAgIGVsc2UgaWYoY3VycmVudFBhZ2UgPCA0KXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbMCwxLDIsMyw0XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbmV4dCB0byBsYXN0IHBhZ2VcclxuICAgICAgICBlbHNlIGlmKHRvdGFsUGFnZXMgPiBjdXJyZW50UGFnZSsxKXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbY3VycmVudFBhZ2UtMSxjdXJyZW50UGFnZSxjdXJyZW50UGFnZSsxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbGFzdCBwYWdlXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzID09PSBjdXJyZW50UGFnZSsxKXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbY3VycmVudFBhZ2UtMixjdXJyZW50UGFnZS0xLGN1cnJlbnRQYWdlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgY3VycmVudCBwYWdlIGlzIG5vdCBvbmUgb2YgdGhlIGZvdXIgZmlyc3QgcGFnZXNcclxuICAgICAgICBlbHNlIGlmKHRvdGFsUGFnZXMtNCA+IGN1cnJlbnRQYWdlKXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbY3VycmVudFBhZ2UtMSxjdXJyZW50UGFnZSxjdXJyZW50UGFnZSsxLCBjdXJyZW50UGFnZSsyXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS4kZW1pdCgnZ3QtdGFibGUtZmlsdGVyZWQnLCB7XHJcbiAgICAgICAgICAgIHRvdGFsOm1hcHBlZERhdGEubGVuZ3RoLFxyXG4gICAgICAgICAgICBmaWx0ZXJlZDpmaWx0ZXJlZERhdGEubGVuZ3RoLFxyXG4gICAgICAgICAgICBzaG93aW5nRnJvbTokc2NvcGUuY3VycmVudFBhZ2UqJHNjb3BlLmd0Um93cysoJHNjb3BlLmN1cnJlbnRQYWdlID4gMSA/IDA6MSksXHJcbiAgICAgICAgICAgIHNob3dpbmdUbzokc2NvcGUuY3VycmVudFBhZ2UqJHNjb3BlLmd0Um93cyskc2NvcGUuZ3REaXNwbGF5RGF0YS5sZW5ndGgsXHJcbiAgICAgICAgICAgIHBhZ2VMZW5ndGg6JHNjb3BlLmd0Um93cyxcclxuICAgICAgICAgICAgY3VycmVudFBhZ2U6JHNjb3BlLmN1cnJlbnRQYWdlLFxyXG4gICAgICAgICAgICBudW1iZXJPZlBhZ2VzOiRzY29wZS5wYWdlcy5sZW5ndGhcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLm5leHRQYWdlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFBhZ2UgKys7XHJcbiAgICAgICAgICAgICRzY29wZS5ndERpc3BsYXlEYXRhID0gJHNjb3BlLnBhZ2VzWyRzY29wZS5jdXJyZW50UGFnZV07XHJcbiAgICAgICAgICAgIHBhZ2luYXRpb24oJHNjb3BlLnBhZ2VzLmxlbmd0aCwkc2NvcGUuY3VycmVudFBhZ2UpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LXN0YXJ0ZWQtcmVuZGVyaW5nJywkc2NvcGUuZ3RJZCk7XHJcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCckJHJlYmluZDo6Z3RSZWZyZXNoJyk7XHJcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnByZXZpb3VzUGFnZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlIC0tO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ3REaXNwbGF5RGF0YSA9ICRzY29wZS5wYWdlc1skc2NvcGUuY3VycmVudFBhZ2VdO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uKCRzY29wZS5wYWdlcy5sZW5ndGgsJHNjb3BlLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1zdGFydGVkLXJlbmRlcmluZycsJHNjb3BlLmd0SWQpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnJCRyZWJpbmQ6Omd0UmVmcmVzaCcpO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAkc2NvcGUuc2V0UGFnZSA9IGZ1bmN0aW9uKHBhZ2Upe1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgICRzY29wZS5ndERpc3BsYXlEYXRhID0gJHNjb3BlLnBhZ2VzWyRzY29wZS5jdXJyZW50UGFnZV07XHJcbiAgICAgICAgICAgIHBhZ2luYXRpb24oJHNjb3BlLnBhZ2VzLmxlbmd0aCwkc2NvcGUuY3VycmVudFBhZ2UpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LXN0YXJ0ZWQtcmVuZGVyaW5nJywkc2NvcGUuZ3RJZCk7XHJcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCckJHJlYmluZDo6Z3RSZWZyZXNoJyk7XHJcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzb3J0IGZ1bmN0aW9uXHJcbiAgICAkc2NvcGUuc29ydCA9IGZ1bmN0aW9uKHByb3BlcnR5KXtcclxuICAgICAgICBpZiAocHJvcGVydHkpe1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgJHNjb3BlLmd0U2V0dGluZ3MubGVuZ3RoID4gaTsgaSsrKXtcclxuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5nID0gJHNjb3BlLmd0U2V0dGluZ3NbaV07XHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5nLm9iamVjdEtleSA9PT0gcHJvcGVydHkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ID0gc2V0dGluZy5zb3J0O1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc29ydCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Rpc2FibGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VuYWJsZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3RTZXR0aW5nc1tpXS5zb3J0ID0gJ2FzYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXNjJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5ndFNldHRpbmdzW2ldLnNvcnQgPSAnZGVzYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVzYyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3RTZXR0aW5nc1tpXS5zb3J0ID0gJ2VuYWJsZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBzb3J0aW5nID0gJGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3Mse3NvcnQ6XCJhc2MgZGVzY1wifSxmdW5jdGlvbihleHBlY3RlZCwgYWN0dWFsKXtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xO1xyXG4gICAgICAgIH0pLGZ1bmN0aW9uKHNvcnQpe1xyXG4gICAgICAgICAgICByZXR1cm4gKHNvcnQuc29ydCA9PT0gJ2Rlc2MnID8gJy0nOicnKSArIHNvcnQub2JqZWN0S2V5XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFwcGx5U29ydCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBpZiB0YWJsZSBoYXMgZGF0YSB1cG9uIGluaXRpYWxpemF0aW9uLi4uXHJcbiAgICBpZigkc2NvcGUuZ3REYXRhKXtcclxuICAgICAgICBpbml0VGFibGUoJHNjb3BlLmd0RGF0YSk7IC8vIGluaXRpYWxpemUgdGFibGUgd2l0aCBkYXRhIHBhc3NlZCB0byBkaXJlY3RpdmVcclxuICAgIH1cclxuXHJcbiAgICAvLyBleHBvcnQgZnVuY3Rpb25cclxuICAgIHZhciBndEV4cG9ydCA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xyXG4gICAgICAgIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCc/IHt9Om9wdGlvbnM7XHJcblxyXG4gICAgICAgIHZhciBmaWxlTmFtZSA9IHR5cGVvZiBvcHRpb25zLmZpbGVOYW1lID09PSAndW5kZWZpbmVkJyA/ICdleHBvcnQnOm9wdGlvbnMuZmlsZU5hbWU7XHJcblxyXG4gICAgICAgIC8vIGZpeCBleHBvcnQgZGF0YVxyXG4gICAgICAgIHZhciBleHBvcnREYXRhID0gSlNPTi5wYXJzZShhbmd1bGFyLnRvSnNvbihzb3J0ZWREYXRhLnNsaWNlKDApKSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBvcnREYXRhLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgdmFyIHJvdyA9IGV4cG9ydERhdGFbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiByb3cpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyb3cuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZFNldHRpbmcgPSAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZ3RGaWVsZHMsIHtvYmplY3RLZXk6IGtleX0sIHRydWUpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZVNldHRpbmcgPSAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZ3RTZXR0aW5ncywge29iamVjdEtleToga2V5fSwgdHJ1ZSlbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHBvcnRNZXRob2QgPSBmaWVsZFNldHRpbmcuZXhwb3J0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBleHBvcnQgbWV0aG9kIGlzIGRlY2xhcmVkIGFuZCBpcyBhIGZ1bmN0aW9uLi4uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydE1ldGhvZCAmJiBhbmd1bGFyLmlzRnVuY3Rpb24oZXhwb3J0TWV0aG9kKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5yZXBsYWNlIGV4cG9ydCBkYXRhIHJvdyB2YWx1ZSB3aXRoIHZhbHVlIHJldHVybmVkIGJ5IGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd1trZXldID0gZXhwb3J0TWV0aG9kKHJvdywga2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGV4cG9ydENvbHVtbnMgYXJlIHBhc3NlZCB3aXRoIG9wdGlvbnMuLi5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZXhwb3J0Q29sdW1ucyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi4uc2V0IHZhbHVlIHRvIG51bGwgaS5lLiBkb24ndCBleHBvcnQgY29sdW1uIGlmIGl0J3Mgbm90IGluIHRoZSBleHBvcnRDb2x1bW5zIGFycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmV4cG9ydENvbHVtbnMuaW5kZXhPZih0YWJsZVNldHRpbmcub2JqZWN0S2V5KT09PS0xKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1trZXldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBleHBvcnQgaXMgc2V0IHRvIGZhbHNlIGZvciBmaWVsZC4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0YWJsZVNldHRpbmcuZXhwb3J0ICE9PSAndW5kZWZpbmVkJyAmJiB0YWJsZVNldHRpbmcuZXhwb3J0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5zZXQgdmFsdWUgdG8gbnVsbCBpLmUuIGRvbid0IGV4cG9ydCBjb2x1bW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93W2tleV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZGVjbGFyZSBleHBvcnQgZGF0YVxyXG4gICAgICAgIHZhciBkYXRhID0gZXhwb3J0RGF0YTsvL0pTT04ucGFyc2UoYW5ndWxhci50b0pzb24oc29ydGVkRGF0YS5zbGljZSgwKSkpO1xyXG5cclxuICAgICAgICAvLyBpZiBleHBvcnRDb2x1bW5zIGFyZSBwYXNzZWQgd2l0aCBvcHRpb25zLi4uXHJcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmV4cG9ydENvbHVtbnMgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAuLi5nZXQgZmllbGQgc2V0dGluZ3MgZm9yIGFsbCBvYmplY3RLZXlzIGluIGV4cG9ydENvbHVtbnMgYXJyYXlcclxuICAgICAgICAgICAgdmFyIGV4cG9ydEZpZWxkcyA9ICRmaWx0ZXIoJ21hcCcpKG9wdGlvbnMuZXhwb3J0Q29sdW1ucywgZnVuY3Rpb24ob2JqZWN0S2V5KXtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZ3RGaWVsZHMuc2xpY2UoMCksIHtvYmplY3RLZXk6b2JqZWN0S2V5fSwgdHJ1ZSlbMF07XHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZWxzZSBleHBvcnQgYWxsIGNvbHVtbnMgZXhjZXB0IGNvbHVtbnMgbm90IG1hcmtlZCBmb3IgZXhwb3J0IGkuZS4gaGFzIGZpZWxkIHNldHRpbmcgZXhwb3J0OmZhbHNlIChhZGRlZCB0byBndEZpZWxkXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBleHBvcnRGaWVsZHMgPSAkZmlsdGVyKCdvcmRlckJ5JykoJGZpbHRlcigncmVtb3ZlV2l0aCcpKCRzY29wZS5ndEZpZWxkcyx7ZXhwb3J0RmllbGQ6ZmFsc2V9KSxcImNvbHVtbk9yZGVyXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGhlYWRlcnMgPSB7XHJcbiAgICAgICAgICAgIGZpZWxkU2VwOiB0eXBlb2Ygb3B0aW9ucy5maWVsZFNlcCA9PT0gJ3VuZGVmaW5lZCcgPyBcIjtcIjpvcHRpb25zLmZpZWxkU2VwLFxyXG4gICAgICAgICAgICBoZWFkZXI6ICRmaWx0ZXIoJ21hcCcpKGV4cG9ydEZpZWxkcyxcIm5hbWVcIiksIC8vIGdldCBoZWFkZXJzIGJ5IGNvbHVtbiBvcmRlclxyXG4gICAgICAgICAgICB0eHREZWxpbTogdHlwZW9mIG9wdGlvbnMudHh0RGVsaW0gPT09ICd1bmRlZmluZWQnID8gJ1wiJzpvcHRpb25zLnR4dERlbGltLFxyXG4gICAgICAgICAgICBjb2x1bW5PcmRlcjokZmlsdGVyKCdtYXAnKShleHBvcnRGaWVsZHMsXCJvYmplY3RLZXlcIiksIC8vIGdldCBjb2x1bW4gb3JkZXJcclxuICAgICAgICAgICAgZGVjaW1hbFNlcDp0eXBlb2Ygb3B0aW9ucy5kZWNpbWFsU2VwID09PSAndW5kZWZpbmVkJyA/ICcsJzpvcHRpb25zLmRlY2ltYWxTZXAsXHJcbiAgICAgICAgICAgIGFkZEJ5dGVPcmRlck1hcmtlcjp0eXBlb2Ygb3B0aW9ucy5hZGRCb20gPT09ICd1bmRlZmluZWQnLFxyXG4gICAgICAgICAgICBjaGFyc2V0OnR5cGVvZiBvcHRpb25zLmNoYXJzZXQgPT09ICd1bmRlZmluZWQnID8gJ3V0Zi04JzpvcHRpb25zLmNoYXJzZXRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBDU1Yuc3RyaW5naWZ5KGRhdGEsIGhlYWRlcnMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcclxuXHJcbiAgICAgICAgICAgIHZhciBibG9iO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYikge1xyXG4gICAgICAgICAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFtyZXN1bHRdLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04O1wiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsICdleHBvcnQuY3N2Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIG5vdCBhIGZ1bGx5IHdvcmtpbmcgc29sdXRpb24sIHNvbWUgdGFncyAodGV4IDxCT0RZPikgc2hvdyB1cCBpbiBleGNlbCB0b2dldGhlciB3aXRoIHRoZSBjb3JyZWN0IGRhdGEuXHJcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGFkZGVkIGFuIGFsZXJ0IG1lc3NhZ2UgdG8gdXJnZSB1c2VycyB0byB1c2UgYW5vdGhlciBicm93c2VyIG9yIHVwZGF0ZSB0aGVpciBicm93c2VyIGZvciBhIGJldHRlciBsb29raW5nIGV4cG9ydC5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFwiWW91J3JlIHVzaW5nIGFuIG9sZCB2ZXJzaW9uIG9mIEludGVybmV0IEV4cGxvcmVyIGFuZCB0aGUgZXhwb3J0IG1pZ2h0IHRoZXJlZm9yZSBoYXZlIHRoZSB3cm9uZyBmb3JtYXQsIHBsZWFzZSB1cGRhdGUgeW91ciBicm93c2VyLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gYW5ndWxhci5lbGVtZW50KCc8aWZyYW1lPjwvaWZyYW1lPicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmcmFtZVswXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJ2JvZHknKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChpZnJhbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZnJhbWVbMF0uY29udGVudERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYyA9IGlmcmFtZVswXS5jb250ZW50RG9jdW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKGlmcmFtZVswXS5jb250ZW50V2luZG93KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jID0gaWZyYW1lWzBdLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRvYy5vcGVuKFwidGV4dC9wbGFpblwiLCBcInJlcGxhY2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jLndyaXRlKFtyZXN1bHRdKTtcclxuICAgICAgICAgICAgICAgICAgICBkb2MuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2lmcmFtZS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvYy5leGVjQ29tbWFuZCgnU2F2ZUFzJywgdHJ1ZSwgZmlsZU5hbWUrJy5jc3YnKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2IgPSBuZXcgQmxvYihbcmVzdWx0XSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQvY3N2O2NoYXJzZXQ9dXRmLTg7XCJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZG93bmxvYWRMaW5rID0gYW5ndWxhci5lbGVtZW50KCc8YT48L2E+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rLmF0dHIoJ2hyZWYnLCB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rLmF0dHIoJ2Rvd25sb2FkJyxmaWxlTmFtZSsnLmNzdicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBhcHBlbmQgZG93bmxvYWQgbGluayB0byBib2R5IGFuZCBjbGljayBpdCwgb25jZSBjbGlja2VkIHJlbW92ZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5maW5kKCdib2R5JykuYXBwZW5kKGRvd25sb2FkTGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGlua1swXS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxufSkuZGlyZWN0aXZlKCdndFJvdycsIGZ1bmN0aW9uKCRjb21waWxlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgc2NvcGU6ZmFsc2UsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBmbikge1xyXG4gICAgICAgICAgICBzY29wZS50b2dnbGVSb3cgPSBmdW5jdGlvbihjb250ZW50LGNvbHVtbnMscm93LGtleSl7XHJcbiAgICAgICAgICAgICAgICBpZighc2NvcGUucm93LmlzT3Blbil7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9ICRjb21waWxlKCc8dHIgY2xhc3M9XCJleHBhbmRlZC1yb3dcIj48dGQgY29sc3Bhbj1cIicrY29sdW1ucysnXCI+Jytjb250ZW50Kyc8L3RkPjwvdHI+Jykoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWZ0ZXIocm93KTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5yb3cuaXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUucm93LmlzT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGJyb2FkY2FzdCgnJCRyZWJpbmQ6Omd0UmVmcmVzaCcpOyAvLyB1cGRhdGUgYmluZGluZ3NcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KS5kaXJlY3RpdmUoJ2d0RXZlbnQnLCBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGZuKSB7XHJcbiAgICAgICAgICAgIGlmIChzY29wZS4kbGFzdCl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnZ3QtZmluaXNoZWQtcmVuZGVyaW5nJyxzY29wZS5ndElkKTtcclxuICAgICAgICAgICAgICAgIC8vc2NvcGUuJHBhcmVudC4kcGFyZW50LmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pLmRpcmVjdGl2ZSgnZ3RSZW5kZXInLCBmdW5jdGlvbigkY29tcGlsZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgIHNjb3BlOntcclxuICAgICAgICAgICAgcm93Oic9cm93RGF0YScsXHJcbiAgICAgICAgICAgIHNldHRpbmdzOic9ZmllbGRTZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGNvbXBpbGU6Jz1ndENvbXBpbGUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGZuKSB7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBzY29wZS5yb3c7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBzY29wZS5zZXR0aW5ncy5vYmplY3RLZXk7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVuZGVyTWV0aG9kID0gc2NvcGUuc2V0dGluZ3MucmVuZGVyO1xyXG4gICAgICAgICAgICBpZihyZW5kZXJNZXRob2QgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKHJlbmRlck1ldGhvZCkpe1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gcmVuZGVyTWV0aG9kKHJvdywga2V5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG91dHB1dCA9IHJvd1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHNjb3BlLmNvbXBpbGUgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gJGNvbXBpbGUob3V0cHV0KShzY29wZS4kcGFyZW50KTsgLy8gdXNlIHNhbWUgc2NvcGUgYXMgcm93XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnRbMF0uaW5uZXJIVE1MID0gb3V0cHV0OyAvLyBhZGQgaHRtbFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pLmZpbHRlcignZ2V0UHJvcGVydHknLGZ1bmN0aW9uKCRmaWx0ZXIpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNldHRpbmdzLCBrZXkscHJvcGVydHkpe1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coa2V5KTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJGZpbHRlcignZmlsdGVyJykoc2V0dGluZ3Mse29iamVjdEtleTprZXl9LHRydWUpWzBdW3Byb3BlcnR5XTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2Fubm90IHJlYWQgcHJvcGVydHk6IFwiJyArIHByb3BlcnR5ICsgJ1wiIG9uIG1pc3Npbmcga2V5OiBcIicgKyBrZXkgKyAnXCIgaW4gc2V0dGluZ3MuJywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfVxyXG59KS5maWx0ZXIoJ3NlYXJjaFJvdycsZnVuY3Rpb24oJGZpbHRlcil7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksZmllbGRzLHNlYXJjaFRlcm1zKXtcclxuXHJcbiAgICAgICAgdmFyIGZpbHRlcmVkQXJyYXkgPSBbXTtcclxuICAgICAgICB2YXIgc2VhcmNoVGVybXMgPSB0eXBlb2Ygc2VhcmNoVGVybXMgPT09ICd1bmRlZmluZWQnID8gJyc6c2VhcmNoVGVybXM7XHJcbiAgICAgICAgdmFyIHNlYXJjaFRlcm1zQXJyYXkgPSBzZWFyY2hUZXJtcy50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICB2YXIgcm93ID0gYXJyYXlbaV07XHJcbiAgICAgICAgICAgIHZhciBzdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgJGZpbHRlcignbWFwJykoZmllbGRzLGZ1bmN0aW9uKGZpZWxkKXtcclxuICAgICAgICAgICAgICAgIHN0cmluZyArPSByb3dbZmllbGRdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3RyaW5nID0gc3RyaW5nLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2VhcmNoVGVybXNBcnJheS5sZW5ndGg7aysrKXtcclxuICAgICAgICAgICAgICAgIHZhciB0ZXJtID0gc2VhcmNoVGVybXNBcnJheVtrXTtcclxuICAgICAgICAgICAgICAgIG1hdGNoID0gc3RyaW5nLmluZGV4T2YodGVybSkgIT09IC0xO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFtYXRjaCl7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbWF0Y2hcclxuICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBtYXRjaDtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYobWF0Y2gpe1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygncHVzaCcscm93KTtcclxuICAgICAgICAgICAgICAgIGZpbHRlcmVkQXJyYXkucHVzaChyb3cpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkQXJyYXk7XHJcbiAgICB9XHJcbn0pLmZpbHRlcignY2FtZWxUb0Rhc2gnLGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKXt0cnl7XHJcbiAgICAgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKCAvKFthLXpdKShbQS1aXSkvZywgJyQxLSQyJyApLnRvTG93ZXJDYXNlKCl9IGNhdGNoKGVycm9yKXtjb25zb2xlLmxvZygnbm90aGluZyB0byByZXBsYWNlOicsIGVycm9yKX07XHJcbiAgICB9XHJcbn0pLmZpbHRlcignZ3RTb3J0JyxmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcm9wZXJ0eUFycmF5KXtcclxuICAgICAgICBmdW5jdGlvbiBkeW5hbWljU29ydChwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICB2YXIgc29ydE9yZGVyID0gMTtcclxuICAgICAgICAgICAgaWYocHJvcGVydHlbMF0gPT09IFwiLVwiKSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0T3JkZXIgPSAtMTtcclxuICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gcHJvcGVydHkuc3Vic3RyKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSxiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gKGFbcHJvcGVydHldIDwgYltwcm9wZXJ0eV0pID8gLTEgOiAoYVtwcm9wZXJ0eV0gPiBiW3Byb3BlcnR5XSkgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgKiBzb3J0T3JkZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gZHluYW1pY1NvcnRNdWx0aXBsZShwcm9wZXJ0eUFycmF5KSB7XHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAqIHNhdmUgdGhlIGFyZ3VtZW50cyBvYmplY3QgYXMgaXQgd2lsbCBiZSBvdmVyd3JpdHRlblxyXG4gICAgICAgICAgICAgKiBub3RlIHRoYXQgYXJndW1lbnRzIG9iamVjdCBpcyBhbiBhcnJheS1saWtlIG9iamVjdFxyXG4gICAgICAgICAgICAgKiBjb25zaXN0aW5nIG9mIHRoZSBuYW1lcyBvZiB0aGUgcHJvcGVydGllcyB0byBzb3J0IGJ5XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgcHJvcHMgPSBwcm9wZXJ0eUFycmF5OyAvL2FyZ3VtZW50cztcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvYmoxLCBvYmoyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDAsIHJlc3VsdCA9IDAsIG51bWJlck9mUHJvcGVydGllcyA9IHByb3BzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIC8qIHRyeSBnZXR0aW5nIGEgZGlmZmVyZW50IHJlc3VsdCBmcm9tIDAgKGVxdWFsKVxyXG4gICAgICAgICAgICAgICAgICogYXMgbG9uZyBhcyB3ZSBoYXZlIGV4dHJhIHByb3BlcnRpZXMgdG8gY29tcGFyZVxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICB3aGlsZShyZXN1bHQgPT09IDAgJiYgaSA8IG51bWJlck9mUHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGR5bmFtaWNTb3J0KHByb3BzW2ldKShvYmoxLCBvYmoyKTtcclxuICAgICAgICAgICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheS5zb3J0KGR5bmFtaWNTb3J0TXVsdGlwbGUocHJvcGVydHlBcnJheSkpO1xyXG4gICAgfVxyXG59KTsiLCIhZnVuY3Rpb24oZSl7dHJ5e2U9YW5ndWxhci5tb2R1bGUoXCJhbmd1bGFyLmdlbmVyaWMudGFibGVcIil9Y2F0Y2godCl7ZT1hbmd1bGFyLm1vZHVsZShcImFuZ3VsYXIuZ2VuZXJpYy50YWJsZVwiLFtdKX1lLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGUpe2UucHV0KFwiZ2VuZXJpYy10YWJsZS9kaXJlY3RpdmUvZ2VuZXJpYy10YWJsZS9nZW5lcmljLXRhYmxlLmh0bWxcIiwnPGRpdiBjbGFzcz1cImdlbmVyaWMtdGFibGVcIj48ZGl2IGNsYXNzPVwiZ3Qtd3JhcHBlclwiPjx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLXNvcnRhYmxlXCIgbmctaWY9XCJndEhhc0RhdGFcIiBuZy1jbGFzcz1cIjpndFJlZnJlc2g6Z3RDbGFzc2VzXCI+PHRoZWFkPjx0ciBuZy1jbGFzcz1cIjo6Z3RSb3dUcmFuc2l0aW9uID8gXFwnZmFkZS1pbiBhbmltYXRlXFwnOlxcJ1xcJ1wiPjx0aCBuZy1yZXBlYXQ9XCJmaWVsZCBpbiA6Omd0RmllbGRzIHwgb3JkZXJCeTpcXCdjb2x1bW5PcmRlclxcJyB0cmFjayBieSBmaWVsZC5vYmplY3RLZXlcIiBuZy1zaG93PVwiOmd0UmVmcmVzaDpndFNldHRpbmdzIHwgZ2V0UHJvcGVydHk6ZmllbGQub2JqZWN0S2V5OlxcJ3Zpc2libGVcXCdcIiBuZy1jbGFzcz1cIjpndFJlZnJlc2g6W2ZpZWxkLmNsYXNzTmFtZXMsIChmaWVsZC5vYmplY3RLZXkgfCBjYW1lbFRvRGFzaCkgKyBcXCctY29sdW1uXFwnLCBcXCdzb3J0LVxcJysoZ3RTZXR0aW5ncyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCdzb3J0XFwnKV1cIj48c3BhbiBuZy1jbGljaz1cIjpndFJlZnJlc2g6KGd0U2V0dGluZ3MgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnc29ydFxcJykgPT09IFxcJ2VuYWJsZVxcJyA/IHNvcnQoZmllbGQub2JqZWN0S2V5KTooZ3RTZXR0aW5ncyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCdzb3J0XFwnKSA9PT0gXFwnYXNjXFwnID8gc29ydChmaWVsZC5vYmplY3RLZXkpOihndFNldHRpbmdzIHwgZ2V0UHJvcGVydHk6ZmllbGQub2JqZWN0S2V5OlxcJ3NvcnRcXCcpID09PSBcXCdkZXNjXFwnID8gc29ydChmaWVsZC5vYmplY3RLZXkpOlxcJ1xcJ1wiPnt7OjpmaWVsZC5uYW1lfX08L3NwYW4+PC90aD48L3RyPjx0ciBuZy1pZj1cIjpndFJlZnJlc2g6Z3RUb3RhbHNcIiBuZy1jbGFzcz1cIjo6Z3RSb3dUcmFuc2l0aW9uID8gXFwnZmFkZS1pbiBhbmltYXRlXFwnOlxcJ1xcJ1wiPjx0ZCBuZy1yZXBlYXQ9XCJmaWVsZCBpbiA6Omd0RmllbGRzIHwgb3JkZXJCeTpcXCdjb2x1bW5PcmRlclxcJyB0cmFjayBieSBmaWVsZC5vYmplY3RLZXlcIiBjbGFzcz1cInRvdGFsLWNvbHVtblwiIG5nLXNob3c9XCI6Z3RSZWZyZXNoOmd0U2V0dGluZ3MgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwndmlzaWJsZVxcJ1wiIG5nLWNsYXNzPVwiOjpbKGd0RmllbGRzIHwgZ2V0UHJvcGVydHk6ZmllbGQub2JqZWN0S2V5OlxcJ2NsYXNzTmFtZXNcXCcpLCAoZmllbGQub2JqZWN0S2V5IHwgY2FtZWxUb0Rhc2gpICsgXFwnLWNvbHVtblxcJ11cIiBmaWVsZC1zZXR0aW5ncz1cIjo6ZmllbGRcIiBndC1yZW5kZXI9XCJcIiByb3ctZGF0YT1cIjo6Z3RUb3RhbHNcIiBndC1jb21waWxlPVwiOjpmaWVsZC5jb21waWxlXCI+PC90ZD48L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBndC1yb3c9XCJcIiBuZy1yZXBlYXQ9XCJyb3cgaW4gOmd0UmVmcmVzaDpndERpc3BsYXlEYXRhIHwgbGltaXRUbzogZGlzcGxheVJvd3NcIiBndC1ldmVudD1cIlwiIG5nLWNsYXNzPVwiOmd0UmVmcmVzaDpbZ3RSb3dUcmFuc2l0aW9uID8gXFwnZmFkZS1pbiBhbmltYXRlXFwnOlxcJ1xcJyxyb3cuaXNPcGVuID8gXFwncm93LW9wZW5cXCc6XFwnXFwnLCAkaW5kZXggJSAyID09IDAgPyBcXCdyb3ctb2RkXFwnOlxcJ3Jvdy1ldmVuXFwnXVwiPjx0ZCBuZy1yZXBlYXQ9XCJmaWVsZCBpbiA6Z3RSZWZyZXNoOmd0RmllbGRzIHwgb3JkZXJCeTpcXCdjb2x1bW5PcmRlclxcJyB0cmFjayBieSBmaWVsZC5vYmplY3RLZXlcIiBuZy1zaG93PVwiOmd0UmVmcmVzaDpndFNldHRpbmdzIHwgZ2V0UHJvcGVydHk6ZmllbGQub2JqZWN0S2V5OlxcJ3Zpc2libGVcXCdcIiBuZy1jbGFzcz1cIjo6WyhndEZpZWxkcyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCdjbGFzc05hbWVzXFwnKSwgKGZpZWxkLm9iamVjdEtleSB8IGNhbWVsVG9EYXNoKSArIFxcJy1jb2x1bW5cXCddXCI+PHNwYW4gbmctY2xhc3M9XCI6OmZpZWxkLmNsaWNrID8gXFwnZ3QtY2xpY2stZW5hYmxlZFxcJzpcXCdcXCdcIiBmaWVsZC1zZXR0aW5ncz1cIjo6ZmllbGRcIiBndC1yZW5kZXI9XCJcIiByb3ctZGF0YT1cIjo6cm93XCIgZ3QtY29tcGlsZT1cIjo6ZmllbGQuY29tcGlsZVwiIG5nLWNsaWNrPVwiOmd0UmVmcmVzaDohZmllbGQuY2xpY2sgfHwgZmllbGQuY2xpY2socm93KTshZmllbGQuZXhwYW5kIHx8IHRvZ2dsZVJvdyhmaWVsZC5leHBhbmQsKGd0U2V0dGluZ3MgfCBmaWx0ZXI6e1xcJ3Zpc2libGVcXCc6dHJ1ZX06dHJ1ZSkubGVuZ3RoLHJvdyxmaWVsZC5vYmplY3RLZXkpO1wiPjwvc3Bhbj48L3RkPjwvdHI+PC90Ym9keT48dHIgbmctaWY9XCI6Z3RSZWZyZXNoOnBhZ2luYXRpb24gPT09IGZhbHNlXCI+PHRkIGNsYXNzPVwiZ3Qtbm8tZGF0YVwiIGNvbHNwYW49XCJ7ezpndFJlZnJlc2g6KGd0U2V0dGluZ3MgfCBmaWx0ZXI6e1xcJ3Zpc2libGVcXCc6dHJ1ZX06dHJ1ZSkubGVuZ3RofX1cIj57ezo6Z3ROb0RhdGFUeHR9fTwvdGQ+PC90cj48L3RhYmxlPjwvZGl2PjxkaXYgY2xhc3M9XCJndC1wYWdpbmF0aW9uIHRleHQtY2VudGVyXCIgbmctaWY9XCI6Z3RSZWZyZXNoOmd0UGFnaW5hdGlvbiA9PT0gdHJ1ZSAmJiBwYWdpbmF0aW9uICE9PSBmYWxzZVwiPjx1bCBjbGFzcz1cInBhZ2luYXRpb25cIj48bGkgbmctY2xhc3M9XCI6Z3RSZWZyZXNoOntkaXNhYmxlZDogY3VycmVudFBhZ2UgPT09IDB9XCIgbmctc2hvdz1cImN1cnJlbnRQYWdlICE9PSAwXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi1saW5rIGxpbmtcIiBuZy1jbGljaz1cInByZXZpb3VzUGFnZSgpXCIgdHJhbnNsYXRlPVwiQUxMLkdFTkVSQUwjUEFHSU5BVElPTl9QUkVWSU9VUyNCVVRUT05cIiBuZy1kaXNhYmxlZD1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UgPT09IDBcIj4mbGFxdW87IFByZXY8L2J1dHRvbj48L2xpPjxsaSBuZy1zaG93PVwiOmd0UmVmcmVzaDpjdXJyZW50UGFnZSA+IDNcIj48YnV0dG9uIGNsYXNzPVwiYnRuLWxpbmsgbGlua1wiIG5nLWNsaWNrPVwic2V0UGFnZSgwKVwiPjE8L2J1dHRvbj48c21hbGw+JmhlbGxpcDs8L3NtYWxsPjwvbGk+PGxpIHN0eWxlPVwiZGlzcGxheTogaW5saW5lO3BhZGRpbmc6IDAgNXB4O1wiIG5nLXJlcGVhdD1cInBhZ2UgaW4gOmd0UmVmcmVzaDpwYWdpbmF0aW9uXCIgbmctY2xhc3M9XCI6Z3RSZWZyZXNoOnBhZ2UgPT09IGN1cnJlbnRQYWdlID8gXFwnYWN0aXZlXFwnOlxcJ1xcJ1wiPjxidXR0b24gY2xhc3M9XCJidG4tbGluayBsaW5rXCIgbmctY2xpY2s9XCJzZXRQYWdlKHBhZ2UpXCI+e3twYWdlKzF9fTwvYnV0dG9uPjwvbGk+PGxpIG5nLXNob3c9XCI6Z3RSZWZyZXNoOmN1cnJlbnRQYWdlICsxIDwgcGFnZXMubGVuZ3RoLTEgJiYgcGFnZXMubGVuZ3RoID4gNFwiPjxzbWFsbCBuZy1zaG93PVwiOmd0UmVmcmVzaDpjdXJyZW50UGFnZSArIDMgPCBwYWdlcy5sZW5ndGhcIj4maGVsbGlwOzwvc21hbGw+PGJ1dHRvbiBjbGFzcz1cImJ0bi1saW5rIGxpbmtcIiBuZy1jbGljaz1cInNldFBhZ2UocGFnZXMubGVuZ3RoLTEpXCI+e3twYWdlcy5sZW5ndGh9fTwvYnV0dG9uPjwvbGk+PGxpIG5nLWNsYXNzPVwiOmd0UmVmcmVzaDp7ZGlzYWJsZWQ6IGN1cnJlbnRQYWdlID09IHBhZ2VzLmxlbmd0aH1cIiBuZy1zaG93PVwiOmd0UmVmcmVzaDpjdXJyZW50UGFnZSsxICE9PSBwYWdlcy5sZW5ndGhcIj48YnV0dG9uIGNsYXNzPVwiYnRuLWxpbmsgbGlua1wiIG5nLWNsaWNrPVwibmV4dFBhZ2UoKVwiIHRyYW5zbGF0ZT1cIkFMTC5HRU5FUkFMI1BBR0lOQVRJT05fTkVYVCNCVVRUT05cIiBuZy1kaXNhYmxlZD1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UrMSA9PT0gcGFnZXMubGVuZ3RoXCI+TmV4dCAmcmFxdW87PC9idXR0b24+PC9saT48L3VsPjwvZGl2PjwvZGl2PicpfV0pfSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
