!function(e){try{e=angular.module("generic.table")}catch(t){e=angular.module("generic.table",[])}e.run(["$templateCache",function(e){e.put("directive/generic-table/generic-table.html",'<div class="generic-table"><div class="gt-wrapper"><table class="table table-sortable" ng-if="gtHasData" ng-class=":gtRefresh:gtClasses"><thead><tr ng-class="::gtRowTransition ? \'fade-in animate\':\'\'"><th ng-repeat="field in ::gtFields | orderBy:\'columnOrder\' track by field.objectKey" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class=":gtRefresh:[field.classNames, (field.objectKey | camelToDash) + \'-column\', \'sort-\'+(gtSettings | getProperty:field.objectKey:\'sort\')]"><span ng-click=":gtRefresh:(gtSettings | getProperty:field.objectKey:\'sort\') === \'enable\' ? sort(field.objectKey):(gtSettings | getProperty:field.objectKey:\'sort\') === \'asc\' ? sort(field.objectKey):(gtSettings | getProperty:field.objectKey:\'sort\') === \'desc\' ? sort(field.objectKey):\'\'">{{::field.name}}</span></th></tr><tr ng-if=":gtRefresh:gtTotals" ng-class="::gtRowTransition ? \'fade-in animate\':\'\'"><td ng-repeat="field in ::gtFields | orderBy:\'columnOrder\' track by field.objectKey" class="total-column" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class="::[(gtFields | getProperty:field.objectKey:\'classNames\'), (field.objectKey | camelToDash) + \'-column\']" field-settings="::field" gt-render="" row-data="::gtTotals" gt-compile="::field.compile"></td></tr></thead><tbody><tr gt-row="" ng-repeat="row in :gtRefresh:gtDisplayData | limitTo: displayRows" gt-event="" ng-class=":gtRefresh:[gtRowTransition ? \'fade-in animate\':\'\',row.isOpen ? \'row-open\':\'\', $index % 2 == 0 ? \'row-odd\':\'row-even\']"><td ng-repeat="field in :gtRefresh:gtFields | orderBy:\'columnOrder\' track by field.objectKey" ng-show=":gtRefresh:gtSettings | getProperty:field.objectKey:\'visible\'" ng-class="::[(gtFields | getProperty:field.objectKey:\'classNames\'), (field.objectKey | camelToDash) + \'-column\']"><span ng-class="::field.click ? \'gt-click-enabled\':\'\'" field-settings="::field" gt-render="" row-data="::row" gt-compile="::field.compile" ng-click=":gtRefresh:!field.click || field.click(row);!field.expand || toggleRow(field.expand,(gtSettings | filter:{\'visible\':true}:true).length,row,field.objectKey);"></span></td></tr></tbody><tr ng-if=":gtRefresh:pagination === false"><td class="gt-no-data" colspan="{{:gtRefresh:(gtSettings | filter:{\'visible\':true}:true).length}}">{{::gtNoDataTxt}}</td></tr></table><div class="gt-pagination text-center" ng-if=":gtRefresh:gtPagination === true && pagination !== false"><ul class="pagination"><li ng-class=":gtRefresh:{disabled: currentPage === 0}" ng-show="currentPage !== 0"><button class="btn-link link" ng-click="previousPage()" translate="ALL.GENERAL#PAGINATION_PREVIOUS#BUTTON" ng-disabled=":gtRefresh:currentPage === 0">&laquo; Prev</button></li><li ng-show=":gtRefresh:currentPage > 3"><button class="btn-link link" ng-click="setPage(0)">1</button><small>&hellip;</small></li><li style="display: inline;padding: 0 5px;" ng-repeat="page in :gtRefresh:pagination" ng-class=":gtRefresh:page === currentPage ? \'active\':\'\'"><button class="btn-link link" ng-click="setPage(page)">{{page+1}}</button></li><li ng-show=":gtRefresh:currentPage +1 < pages.length-1 && pages.length > 4"><small ng-show=":gtRefresh:currentPage + 3 < pages.length">&hellip;</small><button class="btn-link link" ng-click="setPage(pages.length-1)">{{pages.length}}</button></li><li ng-class=":gtRefresh:{disabled: currentPage == pages.length}" ng-show=":gtRefresh:currentPage+1 !== pages.length"><button class="btn-link link" ng-click="nextPage()" translate="ALL.GENERAL#PAGINATION_NEXT#BUTTON" ng-disabled=":gtRefresh:currentPage+1 === pages.length">Next &raquo;</button></li></ul></div></div></div>')}])}(),angular.module("generic.table").directive("genericTable",function(){return{restrict:"E",replace:!0,scope:{gtId:"=gtId",gtClasses:"@gtClasses",gtSettings:"=gtSettings",gtFields:"=gtFields",gtTotals:"=gtTotals",gtData:"=gtData",gtRows:"@gtRows",gtRowTransition:"@gtRowTransition",gtPagination:"@gtPagination",gtNoDataTxt:"@"},templateUrl:"directive/generic-table/generic-table.html",link:function(e,t,n,r){},controller:"genericTableController"}}).controller("genericTableController",["$scope","$filter","$timeout","CSV","$document",function(e,t,n,r,a){var i,o,g,s,l,c,d,f="undefined"==typeof e.gtSettings?!1:t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey});e.gtPagination="undefined"==typeof e.gtPagination?!0:"false"!==e.gtPagination,e.gtRows="undefined"==typeof e.gtRows?20:e.gtRows,e.gtNoDataTxt="undefined"==typeof e.gtNoDataTxt?"No table data to display":e.gtNoDataTxt,e.gtId="undefined"==typeof e.gtId?e.$id:e.gtId,t("map")(e.gtSettings,function(n){try{var r=t("filter")(e.gtFields,{objectKey:n.objectKey},!0)[0];r.columnOrder=n.columnOrder,n["export"]===!1&&(r.exportField=!1)}catch(a){console.log('field definition object for property: "'+n.objectKey+'" not found.',a)}});var u=function(t){e.gtHasData=!1,i=t.slice(0),e.$emit("gt-started-data-processing",e.gtId),b(t)},p=function(t){e.gtHasData=!1,i=t.slice(0),e.$emit("gt-started-data-processing",e.gtId),b(t)},b=function(n){l=t("map")(t("removeWith")(e.gtFields.slice(0),{search:!1}),"objectKey");var r=t("map")(t("filter")(e.gtSettings,{enabled:!0},!0),"objectKey");o=t("map")(n,function(n){var a={};return t("map")(r,function(r){if("undefined"!=typeof n[r])a[r]=n[r];else{var i=t("map")(t("filter")(e.gtFields,{objectKey:r},!0),"value")[0];i&&angular.isFunction(i)?a[r]=i(n):console.log('property: "'+r+'" does not exists in data object and no value function was declared')}}),a}),h(o)},h=function(e,n){var r=t("filter")(e.slice(0),c,function(e,t){return t.indexOf(e)>-1},!0).slice(0);g=t("searchRow")(r,l,n),m()},m=function(){s=f!==!1?t("gtSort")(g,f):g,y()},y=function(){e.pages=t("chunkBy")(s,parseInt(e.gtRows)),e.currentPage=0,e.loading=!0,e.$emit("gt-started-rendering"),e.gtDisplayData=e.pages[e.currentPage],v(e.pages.length,e.currentPage),n(function(){e.$emit("gt-finished-data-processing",e.gtId),e.gtHasData=!0},200),e.$broadcast("$$rebind::gtRefresh")};e.$on("gt-update-table:"+e.gtId,function(e,t){p(t)}),e.$on("gt-search-table:"+e.gtId,function(e,t){d=t,h(o.slice(0),t)}),e.$on("gt-filter-table:"+e.gtId,function(e,t){c=t,h(o.slice(0),d)}),e.$on("gt-update-structure:"+e.gtId,function(n,r){e.gtFields=r.fields,e.gtSettings=r.settings,l=t("map")(t("removeWith")(e.gtFields.slice(0),{search:!1}),"objectKey"),f===!1||r.forceSorting===!0?f=t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey}):(t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){e.sort="enable"}),t("map")(f,function(n){var r=-1===n.indexOf("-")?"asc":"desc";n=n.replace("-",""),t("filter")(e.gtSettings,{objectKey:n},!0)[0].sort=r}))}),e.$on("gt-paginate-table:"+e.gtId,function(t,n){e.gtRows=parseInt(n),y()}),e.$on("gt-export-csv:"+e.gtId,function(e,t){w(t)});var v=function(t,n){return e.pagination=[],0===t?(e.pagination=!1,void e.$emit("gt-table-filtered",{total:o.length,filtered:0,showingFrom:0,showingTo:0,pageLength:e.gtRows,currentPage:0,numberOfPages:0})):(2>t?e.pagination=[0]:3>t?e.pagination=[0,1]:4>t?e.pagination=[0,1,2]:5>t?e.pagination=[0,1,2,3]:4>n?e.pagination=[0,1,2,3,4]:t>n+1?e.pagination=[n-1,n,n+1]:t===n+1?e.pagination=[n-2,n-1,n]:t-4>n&&(e.pagination=[n-1,n,n+1,n+2]),void e.$emit("gt-table-filtered",{total:o.length,filtered:g.length,showingFrom:e.currentPage*e.gtRows+(e.currentPage>1?0:1),showingTo:e.currentPage*e.gtRows+e.gtDisplayData.length,pageLength:e.gtRows,currentPage:e.currentPage,numberOfPages:e.pages.length}))};e.nextPage=function(){try{e.currentPage++,e.gtDisplayData=e.pages[e.currentPage],v(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(t){console.log(t)}},e.previousPage=function(){try{e.currentPage--,e.gtDisplayData=e.pages[e.currentPage],v(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(t){console.log(t)}},e.setPage=function(t){try{e.currentPage=t,e.gtDisplayData=e.pages[e.currentPage],v(e.pages.length,e.currentPage),e.$emit("gt-started-rendering",e.gtId),e.$broadcast("$$rebind::gtRefresh")}catch(n){console.log(n)}},e.sort=function(n){if(n)for(var r=0;e.gtSettings.length>r;r++){var a=e.gtSettings[r];if(a.objectKey===n){var i=a.sort;switch(i){case"disable":break;case"enable":e.gtSettings[r].sort="asc";break;case"asc":e.gtSettings[r].sort="desc";break;case"desc":e.gtSettings[r].sort="enable"}}}f=t("map")(t("filter")(e.gtSettings,{sort:"asc desc"},function(e,t){return t.indexOf(e)>-1}),function(e){return("desc"===e.sort?"-":"")+e.objectKey}),m()},e.gtData&&u(e.gtData);var w=function(i){i="undefined"==typeof i?{}:i;for(var o="undefined"==typeof i.fileName?"export":i.fileName,g=JSON.parse(angular.toJson(s.slice(0))),l=0;l<g.length;l++){var c=g[l];for(var d in c)if(c.hasOwnProperty(d)){var f=t("filter")(e.gtFields,{objectKey:d},!0)[0],u=t("filter")(e.gtSettings,{objectKey:d},!0)[0],p=f["export"];p&&angular.isFunction(p)&&(c[d]=p(c,d)),"undefined"!=typeof u["export"]&&u["export"]===!1&&(c[d]=null)}}var b=g,h=t("orderBy")(t("removeWith")(e.gtFields,{exportField:!1}),"columnOrder"),m={fieldSep:"undefined"==typeof i.fieldSep?";":i.fieldSep,header:t("map")(h,"name"),txtDelim:"undefined"==typeof i.txtDelim?'"':i.txtDelim,columnOrder:t("map")(h,"objectKey"),decimalSep:"undefined"==typeof i.decimalSep?",":i.decimalSep,addByteOrderMarker:"undefined"==typeof i.addBom,charset:"undefined"==typeof i.charset?"utf-8":i.charset};r.stringify(b,m).then(function(e){var t;if(window.navigator.msSaveOrOpenBlob)t=new Blob([e],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(t,"export.csv");else if("Microsoft Internet Explorer"===window.navigator.appName){window.alert("You're using an old version of Internet Explorer and the export might therefore have the wrong format, please update your browser.");var r=angular.element("<iframe></iframe>");r[0].style.display="none";var i=angular.element("body");i.append(r);var g=null;r[0].contentDocument?g=r[0].contentDocument:r[0].contentWindow&&(g=r[0].contentWindow.document),g.open("text/plain","replace"),g.write([e]),g.close(),g.execCommand("SaveAs",!0,o+".csv")}else{t=new Blob([e],{type:"text/csv;charset=utf-8;"});var s=angular.element("<a></a>");s.attr("href",window.URL.createObjectURL(t)),s.attr("download",o+".csv"),a.find("body").append(s),n(function(){s[0].click(),s.remove()},null)}})}}]).directive("gtRow",["$compile",function(e){return{restrict:"A",scope:!1,link:function(t,n,r,a){t.toggleRow=function(r,a,i,o){if(t.row.isOpen)n.next().remove(),t.row.isOpen=!1;else{var i=e('<tr class="expanded-row"><td colspan="'+a+'">'+r+"</td></tr>")(t);n.after(i),t.row.isOpen=!0}t.$broadcast("$$rebind::gtRefresh")}}}}]).directive("gtEvent",function(){return{restrict:"A",link:function(e,t,n,r){e.$last&&e.$emit("gt-finished-rendering",e.gtId)}}}).directive("gtRender",["$compile",function(e){return{restrict:"A",scope:{row:"=rowData",settings:"=fieldSettings",compile:"=gtCompile"},link:function(t,n,r,a){var i,o=t.row,g=t.settings.objectKey,s=t.settings.render;i=s&&angular.isFunction(s)?s(o,g):o[g],t.compile===!0&&(i=e(i)(t.$parent)),n.append(i)}}}]).filter("getProperty",["$filter",function(e){return function(t,n,r){try{var a=e("filter")(t,{objectKey:n},!0)[0][r]}catch(i){console.log('cannot read property: "'+r+'" on missing key: "'+n+'" in settings.',i)}return a}}]).filter("searchRow",["$filter",function(e){return function(t,n,r){for(var a=[],r="undefined"==typeof r?"":r,i=r.toLowerCase().split(" "),o=0;o<t.length;o++){var g=t[o],s="";e("map")(n,function(e){s+=g[e]}),s=s.toLowerCase();for(var l=!0,c=0;c<i.length;c++){var d=i[c];if(l=-1!==s.indexOf(d),!l)break}l&&a.push(g)}return a}}]).filter("camelToDash",function(){return function(e){try{return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}catch(t){console.log("nothing to replace:",t)}}}).filter("gtSort",function(){return function(e,t){function n(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,r){var a=n[e]<r[e]?-1:n[e]>r[e]?1:0;return a*t}}function r(e){var t=e;return function(e,r){for(var a=0,i=0,o=t.length;0===i&&o>a;)i=n(t[a])(e,r),a++;return i}}return e.sort(r(t))}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlbmVyaWMudGFibGUudHBsLmpzIiwiZ2VuZXJpYy10YWJsZS5qcyJdLCJuYW1lcyI6WyJlIiwiYW5ndWxhciIsIm1vZHVsZSIsInQiLCJydW4iLCJwdXQiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJzY29wZSIsImd0SWQiLCJndENsYXNzZXMiLCJndFNldHRpbmdzIiwiZ3RGaWVsZHMiLCJndFRvdGFscyIsImd0RGF0YSIsImd0Um93cyIsImd0Um93VHJhbnNpdGlvbiIsImd0UGFnaW5hdGlvbiIsImd0Tm9EYXRhVHh0IiwidGVtcGxhdGVVcmwiLCJsaW5rIiwiZWxlbWVudCIsImF0dHJzIiwiZm4iLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGZpbHRlciIsIiR0aW1lb3V0IiwiQ1NWIiwiJGRvY3VtZW50Iiwib3JpZ2luYWxEYXRhIiwibWFwcGVkRGF0YSIsImZpbHRlcmVkRGF0YSIsInNvcnRlZERhdGEiLCJzZWFyY2hDb2x1bW5zIiwidGFibGVGaWx0ZXJzIiwic2VhcmNoVGVybXMiLCJzb3J0aW5nIiwic29ydCIsImV4cGVjdGVkIiwiYWN0dWFsIiwiaW5kZXhPZiIsIm9iamVjdEtleSIsIiRpZCIsInNldHRpbmciLCJmaWVsZCIsImNvbHVtbk9yZGVyIiwiZXhwb3J0RmllbGQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpbml0VGFibGUiLCJpbml0RGF0YSIsImd0SGFzRGF0YSIsInNsaWNlIiwiJGVtaXQiLCJtYXBLZXlzIiwiY2hhbmdlRGF0YSIsIm5ld0RhdGEiLCJkYXRhIiwic2VhcmNoIiwicHJvcGVydGllcyIsImVuYWJsZWQiLCJyb3ciLCJvYmoiLCJwcm9wZXJ0eSIsInZhbHVlRnVuY3Rpb24iLCJpc0Z1bmN0aW9uIiwiYXBwbHlGaWx0ZXIiLCJmaWx0ZXJlZCIsImFwcGx5U29ydCIsImFwcGx5UGFnaW5hdGlvbiIsInBhZ2VzIiwicGFyc2VJbnQiLCJjdXJyZW50UGFnZSIsImxvYWRpbmciLCJndERpc3BsYXlEYXRhIiwicGFnaW5hdGlvbiIsImxlbmd0aCIsIiRicm9hZGNhc3QiLCIkb24iLCJldmVudCIsImFyZyIsImZpZWxkcyIsInNldHRpbmdzIiwiZm9yY2VTb3J0aW5nIiwic29ydFByb3BlcnR5IiwiZ3RFeHBvcnQiLCJ0b3RhbFBhZ2VzIiwidG90YWwiLCJzaG93aW5nRnJvbSIsInNob3dpbmdUbyIsInBhZ2VMZW5ndGgiLCJudW1iZXJPZlBhZ2VzIiwibmV4dFBhZ2UiLCJwcmV2aW91c1BhZ2UiLCJzZXRQYWdlIiwicGFnZSIsImkiLCJvcHRpb25zIiwiZmlsZU5hbWUiLCJleHBvcnREYXRhIiwiSlNPTiIsInBhcnNlIiwidG9Kc29uIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJmaWVsZFNldHRpbmciLCJ0YWJsZVNldHRpbmciLCJleHBvcnRNZXRob2QiLCJleHBvcnRGaWVsZHMiLCJoZWFkZXJzIiwiZmllbGRTZXAiLCJoZWFkZXIiLCJ0eHREZWxpbSIsImRlY2ltYWxTZXAiLCJhZGRCeXRlT3JkZXJNYXJrZXIiLCJhZGRCb20iLCJjaGFyc2V0Iiwic3RyaW5naWZ5IiwidGhlbiIsInJlc3VsdCIsImJsb2IiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJtc1NhdmVPck9wZW5CbG9iIiwiQmxvYiIsInR5cGUiLCJtc1NhdmVCbG9iIiwiYXBwTmFtZSIsImFsZXJ0IiwiaWZyYW1lIiwic3R5bGUiLCJkaXNwbGF5IiwiYXBwZW5kIiwiZG9jIiwiY29udGVudERvY3VtZW50IiwiY29udGVudFdpbmRvdyIsImRvY3VtZW50Iiwib3BlbiIsIndyaXRlIiwiY2xvc2UiLCJleGVjQ29tbWFuZCIsImRvd25sb2FkTGluayIsImF0dHIiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJmaW5kIiwiY2xpY2siLCJyZW1vdmUiLCIkY29tcGlsZSIsInRvZ2dsZVJvdyIsImNvbnRlbnQiLCJjb2x1bW5zIiwiaXNPcGVuIiwibmV4dCIsImFmdGVyIiwiJGxhc3QiLCJjb21waWxlIiwib3V0cHV0IiwicmVuZGVyTWV0aG9kIiwicmVuZGVyIiwiJHBhcmVudCIsImZpbHRlciIsImFycmF5IiwiZmlsdGVyZWRBcnJheSIsInNlYXJjaFRlcm1zQXJyYXkiLCJ0b0xvd2VyQ2FzZSIsInNwbGl0Iiwic3RyaW5nIiwibWF0Y2giLCJrIiwidGVybSIsInB1c2giLCJwcm9wZXJ0eUFycmF5IiwiZHluYW1pY1NvcnQiLCJzb3J0T3JkZXIiLCJzdWJzdHIiLCJhIiwiYiIsImR5bmFtaWNTb3J0TXVsdGlwbGUiLCJwcm9wcyIsIm9iajEiLCJvYmoyIiwibnVtYmVyT2ZQcm9wZXJ0aWVzIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxHQUFBLElBQUFBLEVBQUFDLFFBQUFDLE9BQUEsaUJBQUEsTUFBQUMsR0FBQUgsRUFBQUMsUUFBQUMsT0FBQSxvQkFBQUYsRUFBQUksS0FBQSxpQkFBQSxTQUFBSixHQUFBQSxFQUFBSyxJQUFBLDZDQUFBLG9vSENrQkFKLFFBQUFDLE9BQUEsaUJBQUFJLFVBQUEsZUFBQSxXQUNBLE9BQ0FDLFNBQUEsSUFDQUMsU0FBQSxFQUNBQyxPQUNBQyxLQUFBLFFBQ0FDLFVBQUEsYUFDQUMsV0FBQSxjQUNBQyxTQUFBLFlBQ0FDLFNBQUEsWUFFQUMsT0FBQSxVQUNBQyxPQUFBLFVBQ0FDLGdCQUFBLG1CQUNBQyxhQUFBLGdCQUNBQyxZQUFBLEtBRUFDLFlBQUEsNkNBQ0FDLEtBQUEsU0FBQVosRUFBQWEsRUFBQUMsRUFBQUMsS0FHQUMsV0FBQSw0QkFFQUEsV0FBQSwwQkFBQSxTQUFBLFVBQUEsV0FBQSxNQUFBLFlBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUVBQyxFQUFBLG1CQUFBWixHQUFBZCxZQUFBLEVBQUFlLEVBQUEsT0FBQUEsRUFBQSxVQUFBRCxFQUFBZCxZQUFBMkIsS0FBQSxZQUFBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsUUFBQUYsR0FBQSxLQUNBLFNBQUFELEdBQ0EsT0FBQSxTQUFB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QUF1RCxHQUdBLFFBQUFJLEdBQUFOLEdBTUEsR0FBQU8sR0FBQVAsQ0FDQSxPQUFBLFVBQUFRLEVBQUFDLEdBS0EsSUFKQSxHQUFBckYsR0FBQSxFQUFBdUIsRUFBQSxFQUFBK0QsRUFBQUgsRUFBQXZHLE9BSUEsSUFBQTJDLEdBQUErRCxFQUFBdEYsR0FDQXVCLEVBQUFzRCxFQUFBTSxFQUFBbkYsSUFBQW9GLEVBQUFDLEdBQ0FyRixHQUVBLE9BQUF1QixJQUdBLE1BQUEyQyxHQUFBOUgsS0FBQThJLEVBQUFOIiwiZmlsZSI6ImdlbmVyaWMudGFibGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKGUpe3RyeXtlPWFuZ3VsYXIubW9kdWxlKFwiZ2VuZXJpYy50YWJsZVwiKX1jYXRjaCh0KXtlPWFuZ3VsYXIubW9kdWxlKFwiZ2VuZXJpYy50YWJsZVwiLFtdKX1lLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGUpe2UucHV0KFwiZGlyZWN0aXZlL2dlbmVyaWMtdGFibGUvZ2VuZXJpYy10YWJsZS5odG1sXCIsJzxkaXYgY2xhc3M9XCJnZW5lcmljLXRhYmxlXCI+PGRpdiBjbGFzcz1cImd0LXdyYXBwZXJcIj48dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1zb3J0YWJsZVwiIG5nLWlmPVwiZ3RIYXNEYXRhXCIgbmctY2xhc3M9XCI6Z3RSZWZyZXNoOmd0Q2xhc3Nlc1wiPjx0aGVhZD48dHIgbmctY2xhc3M9XCI6Omd0Um93VHJhbnNpdGlvbiA/IFxcJ2ZhZGUtaW4gYW5pbWF0ZVxcJzpcXCdcXCdcIj48dGggbmctcmVwZWF0PVwiZmllbGQgaW4gOjpndEZpZWxkcyB8IG9yZGVyQnk6XFwnY29sdW1uT3JkZXJcXCcgdHJhY2sgYnkgZmllbGQub2JqZWN0S2V5XCIgbmctc2hvdz1cIjpndFJlZnJlc2g6Z3RTZXR0aW5ncyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCd2aXNpYmxlXFwnXCIgbmctY2xhc3M9XCI6Z3RSZWZyZXNoOltmaWVsZC5jbGFzc05hbWVzLCAoZmllbGQub2JqZWN0S2V5IHwgY2FtZWxUb0Rhc2gpICsgXFwnLWNvbHVtblxcJywgXFwnc29ydC1cXCcrKGd0U2V0dGluZ3MgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnc29ydFxcJyldXCI+PHNwYW4gbmctY2xpY2s9XCI6Z3RSZWZyZXNoOihndFNldHRpbmdzIHwgZ2V0UHJvcGVydHk6ZmllbGQub2JqZWN0S2V5OlxcJ3NvcnRcXCcpID09PSBcXCdlbmFibGVcXCcgPyBzb3J0KGZpZWxkLm9iamVjdEtleSk6KGd0U2V0dGluZ3MgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnc29ydFxcJykgPT09IFxcJ2FzY1xcJyA/IHNvcnQoZmllbGQub2JqZWN0S2V5KTooZ3RTZXR0aW5ncyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCdzb3J0XFwnKSA9PT0gXFwnZGVzY1xcJyA/IHNvcnQoZmllbGQub2JqZWN0S2V5KTpcXCdcXCdcIj57ezo6ZmllbGQubmFtZX19PC9zcGFuPjwvdGg+PC90cj48dHIgbmctaWY9XCI6Z3RSZWZyZXNoOmd0VG90YWxzXCIgbmctY2xhc3M9XCI6Omd0Um93VHJhbnNpdGlvbiA/IFxcJ2ZhZGUtaW4gYW5pbWF0ZVxcJzpcXCdcXCdcIj48dGQgbmctcmVwZWF0PVwiZmllbGQgaW4gOjpndEZpZWxkcyB8IG9yZGVyQnk6XFwnY29sdW1uT3JkZXJcXCcgdHJhY2sgYnkgZmllbGQub2JqZWN0S2V5XCIgY2xhc3M9XCJ0b3RhbC1jb2x1bW5cIiBuZy1zaG93PVwiOmd0UmVmcmVzaDpndFNldHRpbmdzIHwgZ2V0UHJvcGVydHk6ZmllbGQub2JqZWN0S2V5OlxcJ3Zpc2libGVcXCdcIiBuZy1jbGFzcz1cIjo6WyhndEZpZWxkcyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCdjbGFzc05hbWVzXFwnKSwgKGZpZWxkLm9iamVjdEtleSB8IGNhbWVsVG9EYXNoKSArIFxcJy1jb2x1bW5cXCddXCIgZmllbGQtc2V0dGluZ3M9XCI6OmZpZWxkXCIgZ3QtcmVuZGVyPVwiXCIgcm93LWRhdGE9XCI6Omd0VG90YWxzXCIgZ3QtY29tcGlsZT1cIjo6ZmllbGQuY29tcGlsZVwiPjwvdGQ+PC90cj48L3RoZWFkPjx0Ym9keT48dHIgZ3Qtcm93PVwiXCIgbmctcmVwZWF0PVwicm93IGluIDpndFJlZnJlc2g6Z3REaXNwbGF5RGF0YSB8IGxpbWl0VG86IGRpc3BsYXlSb3dzXCIgZ3QtZXZlbnQ9XCJcIiBuZy1jbGFzcz1cIjpndFJlZnJlc2g6W2d0Um93VHJhbnNpdGlvbiA/IFxcJ2ZhZGUtaW4gYW5pbWF0ZVxcJzpcXCdcXCcscm93LmlzT3BlbiA/IFxcJ3Jvdy1vcGVuXFwnOlxcJ1xcJywgJGluZGV4ICUgMiA9PSAwID8gXFwncm93LW9kZFxcJzpcXCdyb3ctZXZlblxcJ11cIj48dGQgbmctcmVwZWF0PVwiZmllbGQgaW4gOmd0UmVmcmVzaDpndEZpZWxkcyB8IG9yZGVyQnk6XFwnY29sdW1uT3JkZXJcXCcgdHJhY2sgYnkgZmllbGQub2JqZWN0S2V5XCIgbmctc2hvdz1cIjpndFJlZnJlc2g6Z3RTZXR0aW5ncyB8IGdldFByb3BlcnR5OmZpZWxkLm9iamVjdEtleTpcXCd2aXNpYmxlXFwnXCIgbmctY2xhc3M9XCI6OlsoZ3RGaWVsZHMgfCBnZXRQcm9wZXJ0eTpmaWVsZC5vYmplY3RLZXk6XFwnY2xhc3NOYW1lc1xcJyksIChmaWVsZC5vYmplY3RLZXkgfCBjYW1lbFRvRGFzaCkgKyBcXCctY29sdW1uXFwnXVwiPjxzcGFuIG5nLWNsYXNzPVwiOjpmaWVsZC5jbGljayA/IFxcJ2d0LWNsaWNrLWVuYWJsZWRcXCc6XFwnXFwnXCIgZmllbGQtc2V0dGluZ3M9XCI6OmZpZWxkXCIgZ3QtcmVuZGVyPVwiXCIgcm93LWRhdGE9XCI6OnJvd1wiIGd0LWNvbXBpbGU9XCI6OmZpZWxkLmNvbXBpbGVcIiBuZy1jbGljaz1cIjpndFJlZnJlc2g6IWZpZWxkLmNsaWNrIHx8IGZpZWxkLmNsaWNrKHJvdyk7IWZpZWxkLmV4cGFuZCB8fCB0b2dnbGVSb3coZmllbGQuZXhwYW5kLChndFNldHRpbmdzIHwgZmlsdGVyOntcXCd2aXNpYmxlXFwnOnRydWV9OnRydWUpLmxlbmd0aCxyb3csZmllbGQub2JqZWN0S2V5KTtcIj48L3NwYW4+PC90ZD48L3RyPjwvdGJvZHk+PHRyIG5nLWlmPVwiOmd0UmVmcmVzaDpwYWdpbmF0aW9uID09PSBmYWxzZVwiPjx0ZCBjbGFzcz1cImd0LW5vLWRhdGFcIiBjb2xzcGFuPVwie3s6Z3RSZWZyZXNoOihndFNldHRpbmdzIHwgZmlsdGVyOntcXCd2aXNpYmxlXFwnOnRydWV9OnRydWUpLmxlbmd0aH19XCI+e3s6Omd0Tm9EYXRhVHh0fX08L3RkPjwvdHI+PC90YWJsZT48ZGl2IGNsYXNzPVwiZ3QtcGFnaW5hdGlvbiB0ZXh0LWNlbnRlclwiIG5nLWlmPVwiOmd0UmVmcmVzaDpndFBhZ2luYXRpb24gPT09IHRydWUgJiYgcGFnaW5hdGlvbiAhPT0gZmFsc2VcIj48dWwgY2xhc3M9XCJwYWdpbmF0aW9uXCI+PGxpIG5nLWNsYXNzPVwiOmd0UmVmcmVzaDp7ZGlzYWJsZWQ6IGN1cnJlbnRQYWdlID09PSAwfVwiIG5nLXNob3c9XCJjdXJyZW50UGFnZSAhPT0gMFwiPjxidXR0b24gY2xhc3M9XCJidG4tbGluayBsaW5rXCIgbmctY2xpY2s9XCJwcmV2aW91c1BhZ2UoKVwiIHRyYW5zbGF0ZT1cIkFMTC5HRU5FUkFMI1BBR0lOQVRJT05fUFJFVklPVVMjQlVUVE9OXCIgbmctZGlzYWJsZWQ9XCI6Z3RSZWZyZXNoOmN1cnJlbnRQYWdlID09PSAwXCI+JmxhcXVvOyBQcmV2PC9idXR0b24+PC9saT48bGkgbmctc2hvdz1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UgPiAzXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi1saW5rIGxpbmtcIiBuZy1jbGljaz1cInNldFBhZ2UoMClcIj4xPC9idXR0b24+PHNtYWxsPiZoZWxsaXA7PC9zbWFsbD48L2xpPjxsaSBzdHlsZT1cImRpc3BsYXk6IGlubGluZTtwYWRkaW5nOiAwIDVweDtcIiBuZy1yZXBlYXQ9XCJwYWdlIGluIDpndFJlZnJlc2g6cGFnaW5hdGlvblwiIG5nLWNsYXNzPVwiOmd0UmVmcmVzaDpwYWdlID09PSBjdXJyZW50UGFnZSA/IFxcJ2FjdGl2ZVxcJzpcXCdcXCdcIj48YnV0dG9uIGNsYXNzPVwiYnRuLWxpbmsgbGlua1wiIG5nLWNsaWNrPVwic2V0UGFnZShwYWdlKVwiPnt7cGFnZSsxfX08L2J1dHRvbj48L2xpPjxsaSBuZy1zaG93PVwiOmd0UmVmcmVzaDpjdXJyZW50UGFnZSArMSA8IHBhZ2VzLmxlbmd0aC0xICYmIHBhZ2VzLmxlbmd0aCA+IDRcIj48c21hbGwgbmctc2hvdz1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UgKyAzIDwgcGFnZXMubGVuZ3RoXCI+JmhlbGxpcDs8L3NtYWxsPjxidXR0b24gY2xhc3M9XCJidG4tbGluayBsaW5rXCIgbmctY2xpY2s9XCJzZXRQYWdlKHBhZ2VzLmxlbmd0aC0xKVwiPnt7cGFnZXMubGVuZ3RofX08L2J1dHRvbj48L2xpPjxsaSBuZy1jbGFzcz1cIjpndFJlZnJlc2g6e2Rpc2FibGVkOiBjdXJyZW50UGFnZSA9PSBwYWdlcy5sZW5ndGh9XCIgbmctc2hvdz1cIjpndFJlZnJlc2g6Y3VycmVudFBhZ2UrMSAhPT0gcGFnZXMubGVuZ3RoXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bi1saW5rIGxpbmtcIiBuZy1jbGljaz1cIm5leHRQYWdlKClcIiB0cmFuc2xhdGU9XCJBTEwuR0VORVJBTCNQQUdJTkFUSU9OX05FWFQjQlVUVE9OXCIgbmctZGlzYWJsZWQ9XCI6Z3RSZWZyZXNoOmN1cnJlbnRQYWdlKzEgPT09IHBhZ2VzLmxlbmd0aFwiPk5leHQgJnJhcXVvOzwvYnV0dG9uPjwvbGk+PC91bD48L2Rpdj48L2Rpdj48L2Rpdj4nKX1dKX0oKTsiLCIvKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSBnZW5lcmljLnRhYmxlLmRpcmVjdGl2ZTpnZW5lcmljVGFibGVcclxuICogQHJlcXVpcmVzIC8vICdwcm92aWRlIGFueSBkZXBlbmRlbmNpZXMgZXguICRzY29wZSwgeW91IGNhbiBoYXZlIG11bHRpcGxlIEByZXF1aXJlcyBsaW5lcydcclxuICpcclxuICogQHJlc3RyaWN0IEVcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIERlc2NyaXB0aW9uIG9mIGdlbmVyaWNUYWJsZSBkaXJlY3RpdmUsIGxvcmVtIGlwc3VtIGRvbGFyIHNpdCBhbWV0XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nPX0gZGF0YS1hdHRyaWJ1dGUgLy8gJ2F0dHJpYnV0ZXMgdXNlZCBieSBkaXJlY3RpdmUsIHlvdSBjYW4gaGF2ZSBtdWx0aXBsZSBAcGFyYW0gbGluZXMnXHJcbiAqXHJcbiAqICBAZXhhbXBsZSA8cHJlPlxyXG4gKlxyXG4gKiA8Z2VuZXJpYy10YWJsZSBkYXRhLWF0dHJpYnV0ZT1cIm15LXZhbHVlXCI+PC9nZW5lcmljLXRhYmxlPlxyXG4gKlxyXG4gKiA8L3ByZT5cclxuICovXHJcbmFuZ3VsYXIubW9kdWxlKCdnZW5lcmljLnRhYmxlJykuZGlyZWN0aXZlKCdnZW5lcmljVGFibGUnLCBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgIGd0SWQ6Jz1ndElkJyxcclxuICAgICAgICAgICAgZ3RDbGFzc2VzOidAZ3RDbGFzc2VzJyxcclxuICAgICAgICAgICAgZ3RTZXR0aW5nczonPWd0U2V0dGluZ3MnLFxyXG4gICAgICAgICAgICBndEZpZWxkczonPWd0RmllbGRzJyxcclxuICAgICAgICAgICAgZ3RUb3RhbHM6Jz1ndFRvdGFscycsXHJcbiAgICAgICAgICAgIC8vZ3RJbmRleDonPWd0SW5kZXgnLFxyXG4gICAgICAgICAgICBndERhdGE6Jz1ndERhdGEnLFxyXG4gICAgICAgICAgICBndFJvd3M6J0BndFJvd3MnLFxyXG4gICAgICAgICAgICBndFJvd1RyYW5zaXRpb246J0BndFJvd1RyYW5zaXRpb24nLFxyXG4gICAgICAgICAgICBndFBhZ2luYXRpb246J0BndFBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICBndE5vRGF0YVR4dDonQCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnZGlyZWN0aXZlL2dlbmVyaWMtdGFibGUvZ2VuZXJpYy10YWJsZS5odG1sJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGZuKSB7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjpcImdlbmVyaWNUYWJsZUNvbnRyb2xsZXJcIlxyXG4gICAgfTtcclxufSkuY29udHJvbGxlcignZ2VuZXJpY1RhYmxlQ29udHJvbGxlcicsZnVuY3Rpb24oJHNjb3BlLCRmaWx0ZXIsJHRpbWVvdXQsIENTViwkZG9jdW1lbnQpe1xyXG4gICAgdmFyIG9yaWdpbmFsRGF0YTsgLy8gb3JpZ2luYWwgdW50b3VjaGVkIGRhdGFcclxuICAgIHZhciBtYXBwZWREYXRhOyAvLyBtYXBwZWQgZGF0YSwgYXJyYXkgY29udGFpbmluZyBtYXBwZWQga2V5cyB1c2VkIGJ5IHRhYmxlXHJcbiAgICB2YXIgZmlsdGVyZWREYXRhOyAvLyBmaWx0ZXJlZCBtYXBwZWQgZGF0YVxyXG4gICAgdmFyIHNvcnRlZERhdGE7IC8vIHNvcnRlZCBtYXBwZWQgZGF0YVxyXG4gICAgdmFyIHNlYXJjaENvbHVtbnM7IC8vIGNvbHVtbnMgdG8gc2VhcmNoXHJcbiAgICB2YXIgdGFibGVGaWx0ZXJzOyAvLyBmaWx0ZXJzIGFwcGxpZWQgdG8gdGhlIHRhYmxlIGludGVybmFsbHlcclxuICAgIHZhciBzZWFyY2hUZXJtczsgLy8gc2VhcmNoIHRlcm1zIHVzZWQgZm9yIHNlYXJjaGluZyB0YWJsZVxyXG5cclxuICAgIHZhciBzb3J0aW5nID0gdHlwZW9mICRzY29wZS5ndFNldHRpbmdzID09PSAndW5kZWZpbmVkJyA/IGZhbHNlOiRmaWx0ZXIoJ21hcCcpKCRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndFNldHRpbmdzLHtzb3J0OlwiYXNjIGRlc2NcIn0sZnVuY3Rpb24oZXhwZWN0ZWQsIGFjdHVhbCl7XHJcbiAgICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xO1xyXG4gICAgfSksZnVuY3Rpb24oc29ydCl7XHJcbiAgICAgICAgcmV0dXJuIChzb3J0LnNvcnQgPT09ICdkZXNjJyA/ICctJzonJykgKyBzb3J0Lm9iamVjdEtleVxyXG4gICAgfSk7IC8vIHJldHVybnMgYXJyYXkgY29udGFpbmluZyBzb3J0aW5nIGNyaXRlcmlhXHJcbiAgICAkc2NvcGUuZ3RQYWdpbmF0aW9uID0gdHlwZW9mICRzY29wZS5ndFBhZ2luYXRpb24gPT09ICd1bmRlZmluZWQnID8gdHJ1ZTokc2NvcGUuZ3RQYWdpbmF0aW9uICE9PSAnZmFsc2UnO1xyXG4gICAgJHNjb3BlLmd0Um93cyA9IHR5cGVvZiAkc2NvcGUuZ3RSb3dzID09PSAndW5kZWZpbmVkJyA/IDIwOiRzY29wZS5ndFJvd3M7XHJcbiAgICAkc2NvcGUuZ3ROb0RhdGFUeHQgPSB0eXBlb2YgJHNjb3BlLmd0Tm9EYXRhVHh0ID09PSAndW5kZWZpbmVkJyA/ICdObyB0YWJsZSBkYXRhIHRvIGRpc3BsYXknOiRzY29wZS5ndE5vRGF0YVR4dDtcclxuICAgICRzY29wZS5ndElkID0gdHlwZW9mICRzY29wZS5ndElkID09PSAndW5kZWZpbmVkJyA/ICRzY29wZS4kaWQ6JHNjb3BlLmd0SWQ7XHJcblxyXG4gICAgLy8gb3JkZXIgY29sdW1uc1xyXG4gICAgJGZpbHRlcignbWFwJykoJHNjb3BlLmd0U2V0dGluZ3MsZnVuY3Rpb24oc2V0dGluZyl7XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICB2YXIgZmllbGQgPSAkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZ3RGaWVsZHMse29iamVjdEtleTpzZXR0aW5nLm9iamVjdEtleX0sdHJ1ZSlbMF07XHJcbiAgICAgICAgICAgIGZpZWxkLmNvbHVtbk9yZGVyID0gc2V0dGluZy5jb2x1bW5PcmRlcjtcclxuICAgICAgICAgICAgaWYoc2V0dGluZy5leHBvcnQgPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgIGZpZWxkLmV4cG9ydEZpZWxkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaWVsZCBkZWZpbml0aW9uIG9iamVjdCBmb3IgcHJvcGVydHk6IFwiJysgc2V0dGluZy5vYmplY3RLZXkgKydcIiBub3QgZm91bmQuJyxlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBpbml0VGFibGUgPSBmdW5jdGlvbihpbml0RGF0YSl7XHJcbiAgICAgICAgJHNjb3BlLmd0SGFzRGF0YSA9IGZhbHNlO1xyXG4gICAgICAgIG9yaWdpbmFsRGF0YSA9IGluaXREYXRhLnNsaWNlKDApO1xyXG4gICAgICAgICRzY29wZS4kZW1pdCgnZ3Qtc3RhcnRlZC1kYXRhLXByb2Nlc3NpbmcnLCRzY29wZS5ndElkKTtcclxuICAgICAgICBtYXBLZXlzKGluaXREYXRhKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gY2hhbmdlIGRhdGEsIHRoaXMgd2UgdXBkYXRlIG9yIGRhdGEgc2V0XHJcbiAgICB2YXIgY2hhbmdlRGF0YSA9IGZ1bmN0aW9uKG5ld0RhdGEpe1xyXG4gICAgICAgICRzY29wZS5ndEhhc0RhdGEgPSBmYWxzZTtcclxuICAgICAgICBvcmlnaW5hbERhdGEgPSBuZXdEYXRhLnNsaWNlKDApO1xyXG4gICAgICAgICRzY29wZS4kZW1pdCgnZ3Qtc3RhcnRlZC1kYXRhLXByb2Nlc3NpbmcnLCRzY29wZS5ndElkKTtcclxuICAgICAgICBtYXBLZXlzKG5ld0RhdGEpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBtYXBwaW5nLCB0aGlzIGlzIHdoZXJlIHdlIG1hcCB3aGljaCBrZXlzIHNob3VsZCBiZSBwYXJ0IG9mIHRoZSB0YWJsZSBhcnJheSByb3cgb2JqZWN0XHJcbiAgICB2YXIgbWFwS2V5cyA9IGZ1bmN0aW9uIChkYXRhKXtcclxuXHJcbiAgICAgICAgLy8gZGVmaW5lIHdoaWNoIGZpZWxkcyBzaG91bGQgYmUgc2VhcmNoYWJsZVxyXG4gICAgICAgIHNlYXJjaENvbHVtbnMgPSAkZmlsdGVyKCdtYXAnKSgkZmlsdGVyKCdyZW1vdmVXaXRoJykoJHNjb3BlLmd0RmllbGRzLnNsaWNlKDApLHtzZWFyY2g6ZmFsc2V9KSwnb2JqZWN0S2V5Jyk7XHJcblxyXG4gICAgICAgIC8vIGdldCBrZXkgbmFtZXMgZnJvbSBzZXR0aW5nc1xyXG4gICAgICAgIHZhciBwcm9wZXJ0aWVzID0gJGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3MsIHtlbmFibGVkOnRydWV9LHRydWUpLCdvYmplY3RLZXknKTtcclxuXHJcbiAgICAgICAgLy8gY3JlYXRlIG5ldyBhcnJheSB3aXRoIG1hcHBlZCBkYXRhXHJcbiAgICAgICAgbWFwcGVkRGF0YSA9ICRmaWx0ZXIoJ21hcCcpKGRhdGEsIGZ1bmN0aW9uKHJvdyl7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7fTsgLy8gY3JlYXRlIG5ldyByb3cgb2JqZWN0XHJcblxyXG4gICAgICAgICAgICAvLyByZXRyaWV2ZSBvYmplY3QgdmFsdWVzIGZyb20gcm93IGFuZCBhZGQgdGhlbSB0byB0aGUgY29ycmVzcG9uZGluZyBrZXkgZGVmaW5lZCBieSB0aGUgdGFibGUgZmllbGRzXHJcbiAgICAgICAgICAgICRmaWx0ZXIoJ21hcCcpKHByb3BlcnRpZXMsZnVuY3Rpb24ocHJvcGVydHkpe1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgcHJvcGVydHkgZXhpc3RzIGluIGRhdGEgb2JqZWN0Li4uXHJcbiAgICAgICAgICAgICAgICBpZih0eXBlb2Ygcm93W3Byb3BlcnR5XSAhPT0gJ3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCBjb2x1bW4gdmFsdWUgZnJvbSBkYXRhIHByb3BlcnR5XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqW3Byb3BlcnR5XT1yb3dbcHJvcGVydHldXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Byb3BlcnR5OiBcIicgKyBwcm9wZXJ0eSAgKyAnXCIgZG9lcyBub3QgZXhpc3QgaW4gZGF0YSBvYmplY3QsIGF0dGVtcHRpbmcgdG8gdXNlIHZhbHVlIGZ1bmN0aW9uIGluc3RlYWQgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJvcGVydHkgZG9lcyBub3QgZXhpc3RzIGluIGRhdGEsIHVzZSB2YWx1ZSBmdW5jdGlvbiB0byBnZXQgdmFsdWUgZm9yIGNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZUZ1bmN0aW9uID0gJGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0RmllbGRzLCB7b2JqZWN0S2V5OnByb3BlcnR5fSx0cnVlKSwndmFsdWUnKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZUZ1bmN0aW9uICYmIGFuZ3VsYXIuaXNGdW5jdGlvbih2YWx1ZUZ1bmN0aW9uKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZSBjdXN0b20gdmFsdWUgZnVuY3Rpb24gdG8gcmV0cmlldmUgdmFsdWUgZm9yIGNvbHVtblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd1c2luZyB2YWx1ZSBmdW5jdGlvbiB0byBnZXQgZGF0YSBmb3Igcm93IGNvbHVtbiAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqW3Byb3BlcnR5XSA9IHZhbHVlRnVuY3Rpb24ocm93KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncHJvcGVydHk6IFwiJyArIHByb3BlcnR5ICArICdcIiBkb2VzIG5vdCBleGlzdHMgaW4gZGF0YSBvYmplY3QgYW5kIG5vIHZhbHVlIGZ1bmN0aW9uIHdhcyBkZWNsYXJlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFwcGx5RmlsdGVyKG1hcHBlZERhdGEpXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGludGVybmFsIGZpbHRlciwgdGhpcyBpcyB3aGVyZSB3ZSBhcHBseSBmaWx0ZXJzXHJcbiAgICB2YXIgYXBwbHlGaWx0ZXIgPSBmdW5jdGlvbiAoZGF0YSwgc2VhcmNoKSB7XHJcblxyXG4gICAgICAgIC8vIGFwcGx5IHRhYmxlIGZpbHRlcnNcclxuICAgICAgICB2YXIgZmlsdGVyZWQgPSAkZmlsdGVyKCdmaWx0ZXInKShkYXRhLnNsaWNlKDApLHRhYmxlRmlsdGVycyxmdW5jdGlvbihleHBlY3RlZCwgYWN0dWFsKXtcclxuICAgICAgICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xO1xyXG4gICAgICAgIH0sdHJ1ZSkuc2xpY2UoMCk7XHJcblxyXG4gICAgICAgIC8vIHJldHVybiByb3dzIHdoZXJlIGNvbHVtbnMgbWF0Y2ggZW50ZXJlZCBzZWFyY2ggdGVybXNcclxuICAgICAgICBmaWx0ZXJlZERhdGEgPSAkZmlsdGVyKCdzZWFyY2hSb3cnKShmaWx0ZXJlZCxzZWFyY2hDb2x1bW5zLCBzZWFyY2gpO1xyXG4gICAgICAgIGFwcGx5U29ydCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzb3J0LCB0aGlzIGlzIHdoZXJlIHdlIHNvcnQgdGhlIGZpbHRlcmVkIHJlc3VsdHNcclxuICAgIHZhciBhcHBseVNvcnQgPSBmdW5jdGlvbiAoKXtcclxuICAgICAgICBzb3J0ZWREYXRhID0gc29ydGluZyAhPT0gZmFsc2UgPyAkZmlsdGVyKCdndFNvcnQnKShmaWx0ZXJlZERhdGEsIHNvcnRpbmcpOiBmaWx0ZXJlZERhdGE7XHJcbiAgICAgICAgYXBwbHlQYWdpbmF0aW9uKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHBhZ2luYXRpb24sIHRoaXMgaXMgd2hlcmUgd2UgZGVjaWRlIHdoaWNoIHN1YnNldCBvZiB0aGUgZGF0YSB0byBzaG93XHJcbiAgICB2YXIgYXBwbHlQYWdpbmF0aW9uID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgJHNjb3BlLnBhZ2VzID0gJGZpbHRlcignY2h1bmtCeScpKHNvcnRlZERhdGEsIHBhcnNlSW50KCRzY29wZS5ndFJvd3MpKTtcclxuICAgICAgICAkc2NvcGUuY3VycmVudFBhZ2UgPSAwO1xyXG4gICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LXN0YXJ0ZWQtcmVuZGVyaW5nJyk7XHJcbiAgICAgICAgJHNjb3BlLmd0RGlzcGxheURhdGEgPSAkc2NvcGUucGFnZXNbJHNjb3BlLmN1cnJlbnRQYWdlXTtcclxuICAgICAgICBwYWdpbmF0aW9uKCRzY29wZS5wYWdlcy5sZW5ndGgsJHNjb3BlLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LWZpbmlzaGVkLWRhdGEtcHJvY2Vzc2luZycsJHNjb3BlLmd0SWQpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ3RIYXNEYXRhID0gdHJ1ZTtcclxuICAgICAgICB9LDIwMCk7XHJcbiAgICAgICAgLy8kc2NvcGUuJGVtaXQoJ2d0LWZpbmlzaGVkLXJlbmRlcmluZycpO1xyXG4gICAgICAgIC8qaWYoJHNjb3BlLmxvYWRpbmcpe1xyXG4gICAgICAgICBjb25zb2xlLmxvZygnc3RpbGwgbG9vYWRpbmcnKTtcclxuICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1maW5pc2hlZC1yZW5kZXJpbmcnKTtcclxuICAgICAgICAgJHNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgfSovXHJcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJyQkcmViaW5kOjpndFJlZnJlc2gnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gbGlzdGVuIGZvciB1cGRhdGUgdGFibGUgZXZlbnRzXHJcbiAgICAkc2NvcGUuJG9uKCdndC11cGRhdGUtdGFibGU6Jyskc2NvcGUuZ3RJZCxmdW5jdGlvbihldmVudCxhcmcpe1xyXG4gICAgICAgIGNoYW5nZURhdGEoYXJnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGxpc3RlbiBmb3Igc2VhcmNoIGV2ZW50c1xyXG4gICAgJHNjb3BlLiRvbignZ3Qtc2VhcmNoLXRhYmxlOicrJHNjb3BlLmd0SWQsZnVuY3Rpb24oZXZlbnQsYXJnKXtcclxuICAgICAgICBzZWFyY2hUZXJtcyA9IGFyZztcclxuICAgICAgICBhcHBseUZpbHRlcihtYXBwZWREYXRhLnNsaWNlKDApLGFyZyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBsaXN0ZW4gZm9yIGZpbHRlciBldmVudHNcclxuICAgICRzY29wZS4kb24oJ2d0LWZpbHRlci10YWJsZTonKyRzY29wZS5ndElkLGZ1bmN0aW9uKGV2ZW50LGFyZyl7XHJcbiAgICAgICAgdGFibGVGaWx0ZXJzID0gYXJnO1xyXG4gICAgICAgIGFwcGx5RmlsdGVyKG1hcHBlZERhdGEuc2xpY2UoMCksc2VhcmNoVGVybXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gbGlzdGVuIGZvciB1cGRhdGUgdGFibGUgZXZlbnRzXHJcbiAgICAkc2NvcGUuJG9uKCdndC11cGRhdGUtc3RydWN0dXJlOicrJHNjb3BlLmd0SWQsZnVuY3Rpb24oZXZlbnQsYXJnKXtcclxuICAgICAgICAkc2NvcGUuZ3RGaWVsZHMgPSBhcmcuZmllbGRzO1xyXG4gICAgICAgICRzY29wZS5ndFNldHRpbmdzID0gYXJnLnNldHRpbmdzO1xyXG4gICAgICAgIHNlYXJjaENvbHVtbnMgPSAkZmlsdGVyKCdtYXAnKSgkZmlsdGVyKCdyZW1vdmVXaXRoJykoJHNjb3BlLmd0RmllbGRzLnNsaWNlKDApLHtzZWFyY2g6ZmFsc2V9KSwnb2JqZWN0S2V5Jyk7XHJcblxyXG4gICAgICAgIC8vIGlmIG5vIHNvcnRpbmcgaXMgYXBwbGllZCBvciBpZiBzb3J0aW5nIGlzIGZvcmNlZC4uLlxyXG4gICAgICAgIGlmKHNvcnRpbmcgPT09IGZhbHNlIHx8IGFyZy5mb3JjZVNvcnRpbmcgPT09IHRydWUpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIC4uLnNldCBzb3J0aW5nIG9yZGVyXHJcbiAgICAgICAgICAgIHNvcnRpbmcgPSAkZmlsdGVyKCdtYXAnKSgkZmlsdGVyKCdmaWx0ZXInKSgkc2NvcGUuZ3RTZXR0aW5ncyx7c29ydDpcImFzYyBkZXNjXCJ9LGZ1bmN0aW9uKGV4cGVjdGVkLCBhY3R1YWwpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdHVhbC5pbmRleE9mKGV4cGVjdGVkKSA+IC0xO1xyXG4gICAgICAgICAgICB9KSxmdW5jdGlvbihzb3J0KXtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoc29ydC5zb3J0ID09PSAnZGVzYycgPyAnLSc6JycpICsgc29ydC5vYmplY3RLZXlcclxuICAgICAgICAgICAgfSk7IC8vIHJldHVybnMgYXJyYXkgY29udGFpbmluZyBzb3J0aW5nIGNyaXRlcmlhXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcmVzZXQgc29ydGluZyBzZXR0aW5nICdhc2MnIGFuZCAnZGVzYycgdG8gJ2VuYWJsZSdcclxuICAgICAgICAgICAgJGZpbHRlcignbWFwJykoJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3Mse3NvcnQ6XCJhc2MgZGVzY1wifSxmdW5jdGlvbihleHBlY3RlZCwgYWN0dWFsKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhY3R1YWwuaW5kZXhPZihleHBlY3RlZCkgPiAtMTtcclxuICAgICAgICAgICAgfSksZnVuY3Rpb24oc2V0dGluZyl7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nLnNvcnQgPSAnZW5hYmxlJztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgc2V0dGluZ3MgdG8gbWF0Y2ggc29ydGluZyBpbiB0YWJsZVxyXG4gICAgICAgICAgICAkZmlsdGVyKCdtYXAnKShzb3J0aW5nLGZ1bmN0aW9uKHNvcnRQcm9wZXJ0eSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc29ydCA9IHNvcnRQcm9wZXJ0eS5pbmRleE9mKCctJykgPT09IC0xID8gJ2FzYyc6J2Rlc2MnO1xyXG4gICAgICAgICAgICAgICAgc29ydFByb3BlcnR5ID0gc29ydFByb3BlcnR5LnJlcGxhY2UoJy0nLCcnKTtcclxuICAgICAgICAgICAgICAgICRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndFNldHRpbmdzLCB7J29iamVjdEtleSc6c29ydFByb3BlcnR5fSx0cnVlKVswXS5zb3J0ID0gc29ydDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvLyBsaXN0ZW4gZm9yIHBhZ2luYXRpb24gbGVuZ3RoIGNoYW5nZVxyXG4gICAgJHNjb3BlLiRvbignZ3QtcGFnaW5hdGUtdGFibGU6Jyskc2NvcGUuZ3RJZCxmdW5jdGlvbihldmVudCxhcmcpe1xyXG4gICAgICAgICRzY29wZS5ndFJvd3MgPSBwYXJzZUludChhcmcpO1xyXG4gICAgICAgIGFwcGx5UGFnaW5hdGlvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gbGlzdGVuIGZvciBleHBvcnQgZXZlbnRcclxuICAgICRzY29wZS4kb24oJ2d0LWV4cG9ydC1jc3Y6Jyskc2NvcGUuZ3RJZCxmdW5jdGlvbihldmVudCxhcmcpe1xyXG4gICAgICAgIGd0RXhwb3J0KGFyZyk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gY3JlYXRlIHBhZ2luYXRpb25cclxuICAgIHZhciBwYWdpbmF0aW9uID0gZnVuY3Rpb24odG90YWxQYWdlcywgY3VycmVudFBhZ2Upe1xyXG4gICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gW107XHJcblxyXG4gICAgICAgIC8vIGlmIHRvdGFsIHBhZ2VzIGVxdWFscyAwIGllLiBubyBkYXRhIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmKHRvdGFsUGFnZXMgPT09IDAgKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS4kZW1pdCgnZ3QtdGFibGUtZmlsdGVyZWQnLCB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbDptYXBwZWREYXRhLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGZpbHRlcmVkOjAsXHJcbiAgICAgICAgICAgICAgICBzaG93aW5nRnJvbTowLFxyXG4gICAgICAgICAgICAgICAgc2hvd2luZ1RvOjAsXHJcbiAgICAgICAgICAgICAgICBwYWdlTGVuZ3RoOiRzY29wZS5ndFJvd3MsXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTowLFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZQYWdlczowXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiBsZXNzIHRoYW4gdHdvIHBhZ2VzXHJcbiAgICAgICAgaWYodG90YWxQYWdlcyA8IDIpe1xyXG4gICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbiA9IFswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbGVzcyB0aGFuIHRocmVlIHBhZ2VzXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzIDwgMyl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gWzAsMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGxlc3MgdGhhbiBmb3VyIHBhZ2VzXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzIDwgNCl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gWzAsMSwyXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgbGVzcyB0aGFuIGZpdmUgcGFnZXNcclxuICAgICAgICBlbHNlIGlmKHRvdGFsUGFnZXMgPCA1KXtcclxuICAgICAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSBbMCwxLDIsM107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGN1cnJlbnQgcGFnZSBpcyBvbmUgb2YgdGhlIGZvdXIgZmlyc3QgcGFnZXNcclxuICAgICAgICBlbHNlIGlmKGN1cnJlbnRQYWdlIDwgNCl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gWzAsMSwyLDMsNF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIG5leHQgdG8gbGFzdCBwYWdlXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzID4gY3VycmVudFBhZ2UrMSl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gW2N1cnJlbnRQYWdlLTEsY3VycmVudFBhZ2UsY3VycmVudFBhZ2UrMV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGxhc3QgcGFnZVxyXG4gICAgICAgIGVsc2UgaWYodG90YWxQYWdlcyA9PT0gY3VycmVudFBhZ2UrMSl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gW2N1cnJlbnRQYWdlLTIsY3VycmVudFBhZ2UtMSxjdXJyZW50UGFnZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGN1cnJlbnQgcGFnZSBpcyBub3Qgb25lIG9mIHRoZSBmb3VyIGZpcnN0IHBhZ2VzXHJcbiAgICAgICAgZWxzZSBpZih0b3RhbFBhZ2VzLTQgPiBjdXJyZW50UGFnZSl7XHJcbiAgICAgICAgICAgICRzY29wZS5wYWdpbmF0aW9uID0gW2N1cnJlbnRQYWdlLTEsY3VycmVudFBhZ2UsY3VycmVudFBhZ2UrMSwgY3VycmVudFBhZ2UrMl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuJGVtaXQoJ2d0LXRhYmxlLWZpbHRlcmVkJywge1xyXG4gICAgICAgICAgICB0b3RhbDptYXBwZWREYXRhLmxlbmd0aCxcclxuICAgICAgICAgICAgZmlsdGVyZWQ6ZmlsdGVyZWREYXRhLmxlbmd0aCxcclxuICAgICAgICAgICAgc2hvd2luZ0Zyb206JHNjb3BlLmN1cnJlbnRQYWdlKiRzY29wZS5ndFJvd3MrKCRzY29wZS5jdXJyZW50UGFnZSA+IDEgPyAwOjEpLFxyXG4gICAgICAgICAgICBzaG93aW5nVG86JHNjb3BlLmN1cnJlbnRQYWdlKiRzY29wZS5ndFJvd3MrJHNjb3BlLmd0RGlzcGxheURhdGEubGVuZ3RoLFxyXG4gICAgICAgICAgICBwYWdlTGVuZ3RoOiRzY29wZS5ndFJvd3MsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiRzY29wZS5jdXJyZW50UGFnZSxcclxuICAgICAgICAgICAgbnVtYmVyT2ZQYWdlczokc2NvcGUucGFnZXMubGVuZ3RoXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5uZXh0UGFnZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRQYWdlICsrO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ3REaXNwbGF5RGF0YSA9ICRzY29wZS5wYWdlc1skc2NvcGUuY3VycmVudFBhZ2VdO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uKCRzY29wZS5wYWdlcy5sZW5ndGgsJHNjb3BlLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1zdGFydGVkLXJlbmRlcmluZycsJHNjb3BlLmd0SWQpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnJCRyZWJpbmQ6Omd0UmVmcmVzaCcpO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5wcmV2aW91c1BhZ2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50UGFnZSAtLTtcclxuICAgICAgICAgICAgJHNjb3BlLmd0RGlzcGxheURhdGEgPSAkc2NvcGUucGFnZXNbJHNjb3BlLmN1cnJlbnRQYWdlXTtcclxuICAgICAgICAgICAgcGFnaW5hdGlvbigkc2NvcGUucGFnZXMubGVuZ3RoLCRzY29wZS5jdXJyZW50UGFnZSk7XHJcbiAgICAgICAgICAgICRzY29wZS4kZW1pdCgnZ3Qtc3RhcnRlZC1yZW5kZXJpbmcnLCRzY29wZS5ndElkKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJyQkcmViaW5kOjpndFJlZnJlc2gnKTtcclxuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgJHNjb3BlLnNldFBhZ2UgPSBmdW5jdGlvbihwYWdlKXtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY3VycmVudFBhZ2UgPSBwYWdlO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ3REaXNwbGF5RGF0YSA9ICRzY29wZS5wYWdlc1skc2NvcGUuY3VycmVudFBhZ2VdO1xyXG4gICAgICAgICAgICBwYWdpbmF0aW9uKCRzY29wZS5wYWdlcy5sZW5ndGgsJHNjb3BlLmN1cnJlbnRQYWdlKTtcclxuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdndC1zdGFydGVkLXJlbmRlcmluZycsJHNjb3BlLmd0SWQpO1xyXG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnJCRyZWJpbmQ6Omd0UmVmcmVzaCcpO1xyXG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gc29ydCBmdW5jdGlvblxyXG4gICAgJHNjb3BlLnNvcnQgPSBmdW5jdGlvbihwcm9wZXJ0eSl7XHJcbiAgICAgICAgaWYgKHByb3BlcnR5KXtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7ICRzY29wZS5ndFNldHRpbmdzLmxlbmd0aCA+IGk7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGluZyA9ICRzY29wZS5ndFNldHRpbmdzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYoc2V0dGluZy5vYmplY3RLZXkgPT09IHByb3BlcnR5KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydCA9IHNldHRpbmcuc29ydDtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNvcnQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkaXNhYmxlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlbmFibGUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmd0U2V0dGluZ3NbaV0uc29ydCA9ICdhc2MnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FzYyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ3RTZXR0aW5nc1tpXS5zb3J0ID0gJ2Rlc2MnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Rlc2MnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmd0U2V0dGluZ3NbaV0uc29ydCA9ICdlbmFibGUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgc29ydGluZyA9ICRmaWx0ZXIoJ21hcCcpKCRmaWx0ZXIoJ2ZpbHRlcicpKCRzY29wZS5ndFNldHRpbmdzLHtzb3J0OlwiYXNjIGRlc2NcIn0sZnVuY3Rpb24oZXhwZWN0ZWQsIGFjdHVhbCl7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3R1YWwuaW5kZXhPZihleHBlY3RlZCkgPiAtMTtcclxuICAgICAgICB9KSxmdW5jdGlvbihzb3J0KXtcclxuICAgICAgICAgICAgcmV0dXJuIChzb3J0LnNvcnQgPT09ICdkZXNjJyA/ICctJzonJykgKyBzb3J0Lm9iamVjdEtleVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhcHBseVNvcnQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gaWYgdGFibGUgaGFzIGRhdGEgdXBvbiBpbml0aWFsaXphdGlvbi4uLlxyXG4gICAgaWYoJHNjb3BlLmd0RGF0YSl7XHJcbiAgICAgICAgaW5pdFRhYmxlKCRzY29wZS5ndERhdGEpOyAvLyBpbml0aWFsaXplIHRhYmxlIHdpdGggZGF0YSBwYXNzZWQgdG8gZGlyZWN0aXZlXHJcbiAgICB9XHJcblxyXG4gICAgLy8gZXhwb3J0IGZ1bmN0aW9uXHJcbiAgICB2YXIgZ3RFeHBvcnQgPSBmdW5jdGlvbihvcHRpb25zKXtcclxuICAgICAgICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnPyB7fTpvcHRpb25zO1xyXG5cclxuICAgICAgICB2YXIgZmlsZU5hbWUgPSB0eXBlb2Ygb3B0aW9ucy5maWxlTmFtZSA9PT0gJ3VuZGVmaW5lZCcgPyAnZXhwb3J0JzpvcHRpb25zLmZpbGVOYW1lO1xyXG5cclxuICAgICAgICAvLyBmaXggZXhwb3J0IGRhdGFcclxuICAgICAgICB2YXIgZXhwb3J0RGF0YSA9IEpTT04ucGFyc2UoYW5ndWxhci50b0pzb24oc29ydGVkRGF0YS5zbGljZSgwKSkpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwb3J0RGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBleHBvcnREYXRhW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcm93KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocm93Lmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRTZXR0aW5nID0gJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0RmllbGRzLHtvYmplY3RLZXk6a2V5fSx0cnVlKVswXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVTZXR0aW5nID0gJGZpbHRlcignZmlsdGVyJykoJHNjb3BlLmd0U2V0dGluZ3Mse29iamVjdEtleTprZXl9LHRydWUpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhwb3J0TWV0aG9kID0gZmllbGRTZXR0aW5nLmV4cG9ydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgZXhwb3J0IG1ldGhvZCBpcyBkZWNsYXJlZCBhbmQgaXMgYSBmdW5jdGlvbi4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGV4cG9ydE1ldGhvZCAmJiBhbmd1bGFyLmlzRnVuY3Rpb24oZXhwb3J0TWV0aG9kKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLnJlcGxhY2UgZXhwb3J0IGRhdGEgcm93IHZhbHVlIHdpdGggdmFsdWUgcmV0dXJuZWQgYnkgZnVuY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgcm93W2tleV0gPSBleHBvcnRNZXRob2Qocm93LCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBleHBvcnQgaXMgc2V0IHRvIGZhbHNlIGZvciBmaWVsZC4uLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB0YWJsZVNldHRpbmcuZXhwb3J0ICE9PSAndW5kZWZpbmVkJyAmJiB0YWJsZVNldHRpbmcuZXhwb3J0ID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5zZXQgdmFsdWUgdG8gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3dba2V5XSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZWNsYXJlIGV4cG9ydCBkYXRhXHJcbiAgICAgICAgdmFyIGRhdGEgPSBleHBvcnREYXRhOy8vSlNPTi5wYXJzZShhbmd1bGFyLnRvSnNvbihzb3J0ZWREYXRhLnNsaWNlKDApKSk7XHJcblxyXG4gICAgICAgIHZhciBleHBvcnRGaWVsZHMgPSAkZmlsdGVyKCdvcmRlckJ5JykoJGZpbHRlcigncmVtb3ZlV2l0aCcpKCRzY29wZS5ndEZpZWxkcyx7ZXhwb3J0RmllbGQ6ZmFsc2V9KSxcImNvbHVtbk9yZGVyXCIpO1xyXG4gICAgICAgIHZhciBoZWFkZXJzID0ge1xyXG4gICAgICAgICAgICBmaWVsZFNlcDogdHlwZW9mIG9wdGlvbnMuZmllbGRTZXAgPT09ICd1bmRlZmluZWQnID8gXCI7XCI6b3B0aW9ucy5maWVsZFNlcCxcclxuICAgICAgICAgICAgaGVhZGVyOiAkZmlsdGVyKCdtYXAnKShleHBvcnRGaWVsZHMsXCJuYW1lXCIpLCAvLyBnZXQgaGVhZGVycyBieSBjb2x1bW4gb3JkZXJcclxuICAgICAgICAgICAgdHh0RGVsaW06IHR5cGVvZiBvcHRpb25zLnR4dERlbGltID09PSAndW5kZWZpbmVkJyA/ICdcIic6b3B0aW9ucy50eHREZWxpbSxcclxuICAgICAgICAgICAgY29sdW1uT3JkZXI6JGZpbHRlcignbWFwJykoZXhwb3J0RmllbGRzLFwib2JqZWN0S2V5XCIpLCAvLyBnZXQgY29sdW1uIG9yZGVyXHJcbiAgICAgICAgICAgIGRlY2ltYWxTZXA6dHlwZW9mIG9wdGlvbnMuZGVjaW1hbFNlcCA9PT0gJ3VuZGVmaW5lZCcgPyAnLCc6b3B0aW9ucy5kZWNpbWFsU2VwLFxyXG4gICAgICAgICAgICBhZGRCeXRlT3JkZXJNYXJrZXI6dHlwZW9mIG9wdGlvbnMuYWRkQm9tID09PSAndW5kZWZpbmVkJyxcclxuICAgICAgICAgICAgY2hhcnNldDp0eXBlb2Ygb3B0aW9ucy5jaGFyc2V0ID09PSAndW5kZWZpbmVkJyA/ICd1dGYtOCc6b3B0aW9ucy5jaGFyc2V0XHJcbiAgICAgICAgfTtcclxuICAgICAgICBDU1Yuc3RyaW5naWZ5KGRhdGEsIGhlYWRlcnMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcclxuXHJcbiAgICAgICAgICAgIHZhciBibG9iO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYikge1xyXG4gICAgICAgICAgICAgICAgYmxvYiA9IG5ldyBCbG9iKFtyZXN1bHRdLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0L2NzdjtjaGFyc2V0PXV0Zi04O1wiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tc1NhdmVCbG9iKGJsb2IsICdleHBvcnQuY3N2Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIG5vdCBhIGZ1bGx5IHdvcmtpbmcgc29sdXRpb24sIHNvbWUgdGFncyAodGV4IDxCT0RZPikgc2hvdyB1cCBpbiBleGNlbCB0b2dldGhlciB3aXRoIHRoZSBjb3JyZWN0IGRhdGEuXHJcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGFkZGVkIGFuIGFsZXJ0IG1lc3NhZ2UgdG8gdXJnZSB1c2VycyB0byB1c2UgYW5vdGhlciBicm93c2VyIG9yIHVwZGF0ZSB0aGVpciBicm93c2VyIGZvciBhIGJldHRlciBsb29raW5nIGV4cG9ydC5cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFsZXJ0KFwiWW91J3JlIHVzaW5nIGFuIG9sZCB2ZXJzaW9uIG9mIEludGVybmV0IEV4cGxvcmVyIGFuZCB0aGUgZXhwb3J0IG1pZ2h0IHRoZXJlZm9yZSBoYXZlIHRoZSB3cm9uZyBmb3JtYXQsIHBsZWFzZSB1cGRhdGUgeW91ciBicm93c2VyLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gYW5ndWxhci5lbGVtZW50KCc8aWZyYW1lPjwvaWZyYW1lPicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmcmFtZVswXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoJ2JvZHknKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChpZnJhbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2MgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZnJhbWVbMF0uY29udGVudERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYyA9IGlmcmFtZVswXS5jb250ZW50RG9jdW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYgKGlmcmFtZVswXS5jb250ZW50V2luZG93KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jID0gaWZyYW1lWzBdLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRvYy5vcGVuKFwidGV4dC9wbGFpblwiLCBcInJlcGxhY2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jLndyaXRlKFtyZXN1bHRdKTtcclxuICAgICAgICAgICAgICAgICAgICBkb2MuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2lmcmFtZS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRvYy5leGVjQ29tbWFuZCgnU2F2ZUFzJywgdHJ1ZSwgZmlsZU5hbWUrJy5jc3YnKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGJsb2IgPSBuZXcgQmxvYihbcmVzdWx0XSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInRleHQvY3N2O2NoYXJzZXQ9dXRmLTg7XCJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZG93bmxvYWRMaW5rID0gYW5ndWxhci5lbGVtZW50KCc8YT48L2E+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rLmF0dHIoJ2hyZWYnLCB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRMaW5rLmF0dHIoJ2Rvd25sb2FkJyxmaWxlTmFtZSsnLmNzdicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBhcHBlbmQgZG93bmxvYWQgbGluayB0byBib2R5IGFuZCBjbGljayBpdCwgb25jZSBjbGlja2VkIHJlbW92ZSBpdFxyXG4gICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5maW5kKCdib2R5JykuYXBwZW5kKGRvd25sb2FkTGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGlua1swXS5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZExpbmsucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxufSkuZGlyZWN0aXZlKCdndFJvdycsIGZ1bmN0aW9uKCRjb21waWxlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgc2NvcGU6ZmFsc2UsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBmbikge1xyXG4gICAgICAgICAgICBzY29wZS50b2dnbGVSb3cgPSBmdW5jdGlvbihjb250ZW50LGNvbHVtbnMscm93LGtleSl7XHJcbiAgICAgICAgICAgICAgICBpZighc2NvcGUucm93LmlzT3Blbil7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9ICRjb21waWxlKCc8dHIgY2xhc3M9XCJleHBhbmRlZC1yb3dcIj48dGQgY29sc3Bhbj1cIicrY29sdW1ucysnXCI+Jytjb250ZW50Kyc8L3RkPjwvdHI+Jykoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWZ0ZXIocm93KTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS5yb3cuaXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUucm93LmlzT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJGJyb2FkY2FzdCgnJCRyZWJpbmQ6Omd0UmVmcmVzaCcpOyAvLyB1cGRhdGUgYmluZGluZ3NcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KS5kaXJlY3RpdmUoJ2d0RXZlbnQnLCBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGZuKSB7XHJcbiAgICAgICAgICAgIGlmIChzY29wZS4kbGFzdCl7XHJcbiAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnZ3QtZmluaXNoZWQtcmVuZGVyaW5nJyxzY29wZS5ndElkKTtcclxuICAgICAgICAgICAgICAgIC8vc2NvcGUuJHBhcmVudC4kcGFyZW50LmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pLmRpcmVjdGl2ZSgnZ3RSZW5kZXInLCBmdW5jdGlvbigkY29tcGlsZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgIHNjb3BlOntcclxuICAgICAgICAgICAgcm93Oic9cm93RGF0YScsXHJcbiAgICAgICAgICAgIHNldHRpbmdzOic9ZmllbGRTZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGNvbXBpbGU6Jz1ndENvbXBpbGUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGZuKSB7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBzY29wZS5yb3c7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBzY29wZS5zZXR0aW5ncy5vYmplY3RLZXk7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVuZGVyTWV0aG9kID0gc2NvcGUuc2V0dGluZ3MucmVuZGVyO1xyXG4gICAgICAgICAgICBpZihyZW5kZXJNZXRob2QgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKHJlbmRlck1ldGhvZCkpe1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gcmVuZGVyTWV0aG9kKHJvdywga2V5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG91dHB1dCA9IHJvd1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHNjb3BlLmNvbXBpbGUgPT09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gJGNvbXBpbGUob3V0cHV0KShzY29wZS4kcGFyZW50KTsgLy8gdXNlIHNhbWUgc2NvcGUgYXMgcm93XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKG91dHB1dCk7IC8vIGFkZCBodG1sXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSkuZmlsdGVyKCdnZXRQcm9wZXJ0eScsZnVuY3Rpb24oJGZpbHRlcil7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oc2V0dGluZ3MsIGtleSxwcm9wZXJ0eSl7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhrZXkpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAkZmlsdGVyKCdmaWx0ZXInKShzZXR0aW5ncyx7b2JqZWN0S2V5OmtleX0sdHJ1ZSlbMF1bcHJvcGVydHldO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYW5ub3QgcmVhZCBwcm9wZXJ0eTogXCInICsgcHJvcGVydHkgKyAnXCIgb24gbWlzc2luZyBrZXk6IFwiJyArIGtleSArICdcIiBpbiBzZXR0aW5ncy4nLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9XHJcbn0pLmZpbHRlcignc2VhcmNoUm93JyxmdW5jdGlvbigkZmlsdGVyKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSxmaWVsZHMsc2VhcmNoVGVybXMpe1xyXG5cclxuICAgICAgICB2YXIgZmlsdGVyZWRBcnJheSA9IFtdO1xyXG4gICAgICAgIHZhciBzZWFyY2hUZXJtcyA9IHR5cGVvZiBzZWFyY2hUZXJtcyA9PT0gJ3VuZGVmaW5lZCcgPyAnJzpzZWFyY2hUZXJtcztcclxuICAgICAgICB2YXIgc2VhcmNoVGVybXNBcnJheSA9IHNlYXJjaFRlcm1zLnRvTG93ZXJDYXNlKCkuc3BsaXQoJyAnKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHZhciByb3cgPSBhcnJheVtpXTtcclxuICAgICAgICAgICAgdmFyIHN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICAkZmlsdGVyKCdtYXAnKShmaWVsZHMsZnVuY3Rpb24oZmllbGQpe1xyXG4gICAgICAgICAgICAgICAgc3RyaW5nICs9IHJvd1tmaWVsZF07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgdmFyIG1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBzZWFyY2hUZXJtc0FycmF5Lmxlbmd0aDtrKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBzZWFyY2hUZXJtc0FycmF5W2tdO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2ggPSBzdHJpbmcuaW5kZXhPZih0ZXJtKSAhPT0gLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIW1hdGNoKXtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAvLyBubyBtYXRjaFxyXG4gICAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIG1hdGNoO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihtYXRjaCl7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdwdXNoJyxyb3cpO1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyZWRBcnJheS5wdXNoKHJvdylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmlsdGVyZWRBcnJheTtcclxuICAgIH1cclxufSkuZmlsdGVyKCdjYW1lbFRvRGFzaCcsZnVuY3Rpb24oKXtcclxuICAgIHJldHVybiBmdW5jdGlvbihzdHJpbmcpe3RyeXtcclxuICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoIC8oW2Etel0pKFtBLVpdKS9nLCAnJDEtJDInICkudG9Mb3dlckNhc2UoKX0gY2F0Y2goZXJyb3Ipe2NvbnNvbGUubG9nKCdub3RoaW5nIHRvIHJlcGxhY2U6JywgZXJyb3IpfTtcclxuICAgIH1cclxufSkuZmlsdGVyKCdndFNvcnQnLGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIHByb3BlcnR5QXJyYXkpe1xyXG4gICAgICAgIGZ1bmN0aW9uIGR5bmFtaWNTb3J0KHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIHZhciBzb3J0T3JkZXIgPSAxO1xyXG4gICAgICAgICAgICBpZihwcm9wZXJ0eVswXSA9PT0gXCItXCIpIHtcclxuICAgICAgICAgICAgICAgIHNvcnRPcmRlciA9IC0xO1xyXG4gICAgICAgICAgICAgICAgcHJvcGVydHkgPSBwcm9wZXJ0eS5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAoYVtwcm9wZXJ0eV0gPCBiW3Byb3BlcnR5XSkgPyAtMSA6IChhW3Byb3BlcnR5XSA+IGJbcHJvcGVydHldKSA/IDEgOiAwO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAqIHNvcnRPcmRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBkeW5hbWljU29ydE11bHRpcGxlKHByb3BlcnR5QXJyYXkpIHtcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogc2F2ZSB0aGUgYXJndW1lbnRzIG9iamVjdCBhcyBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuXHJcbiAgICAgICAgICAgICAqIG5vdGUgdGhhdCBhcmd1bWVudHMgb2JqZWN0IGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0XHJcbiAgICAgICAgICAgICAqIGNvbnNpc3Rpbmcgb2YgdGhlIG5hbWVzIG9mIHRoZSBwcm9wZXJ0aWVzIHRvIHNvcnQgYnlcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IHByb3BlcnR5QXJyYXk7IC8vYXJndW1lbnRzO1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG9iajEsIG9iajIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gMCwgcmVzdWx0ID0gMCwgbnVtYmVyT2ZQcm9wZXJ0aWVzID0gcHJvcHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgLyogdHJ5IGdldHRpbmcgYSBkaWZmZXJlbnQgcmVzdWx0IGZyb20gMCAoZXF1YWwpXHJcbiAgICAgICAgICAgICAgICAgKiBhcyBsb25nIGFzIHdlIGhhdmUgZXh0cmEgcHJvcGVydGllcyB0byBjb21wYXJlXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIHdoaWxlKHJlc3VsdCA9PT0gMCAmJiBpIDwgbnVtYmVyT2ZQcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZHluYW1pY1NvcnQocHJvcHNbaV0pKG9iajEsIG9iajIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFycmF5LnNvcnQoZHluYW1pY1NvcnRNdWx0aXBsZShwcm9wZXJ0eUFycmF5KSk7XHJcbiAgICB9XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
